
/* /web/static/src/js/services/session.js defined in bundle 'web.assets_frontend' */
odoo.define('web.session',function(require){"use strict";var Session=require('web.Session');var modules=odoo._modules;var session=new Session(undefined,undefined,{modules:modules,use_cors:false});session.is_bound=session.session_bind();return session;});;

/* /website/static/src/js/content/website_root.js defined in bundle 'web.assets_frontend' */
odoo.define('root.widget',function(require){'use strict';require('web.dom_ready');var websiteRootData=require('website.WebsiteRoot');var websiteRoot=new websiteRootData.WebsiteRoot(null);return websiteRoot.attachTo(document.body).then(function(){return websiteRoot;});});odoo.define('website.WebsiteRoot',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Dialog=require('web.Dialog');var utils=require('web.utils');var BodyManager=require('web_editor.BodyManager');var weContext=require('web_editor.context');var rootWidget=require('web_editor.root_widget');var sAnimation=require('website.content.snippets.animation');require("website.content.zoomodoo");var _t=core._t;var websiteRootRegistry=new rootWidget.RootWidgetRegistry();var lang=utils.get_cookie('frontend_lang')||weContext.get().lang;var localeDef=ajax.loadJS('/web/webclient/locale/'+lang.replace('-','_'));var WebsiteRoot=BodyManager.extend({events:_.extend({},BodyManager.prototype.events||{},{'click .js_change_lang':'_onLangChangeClick','click .js_publish_management .js_publish_btn':'_onPublishBtnClick','submit .js_website_submit_form':'_onWebsiteFormSubmit','click .js_disable_on_click':'_onDisableOnClick','click .js_multi_website_switch':'_multiWebsiteSwitch','click .js_multi_company_switch':'_multiCompanySwitch',}),custom_events:_.extend({},BodyManager.prototype.custom_events||{},{animation_start_demand:'_onAnimationStartDemand',animation_stop_demand:'_onAnimationStopDemand',main_object_request:'_onMainObjectRequest',ready_to_clean_for_save:'_onAnimationStopDemand',}),init:function(){this._super.apply(this,arguments);this.animations=[];},willStart:function(){return $.when(this._super.apply(this,arguments),localeDef);},start:function(){var defs=[this._super.apply(this,arguments)];defs.push(this._startAnimations());if(!this.$('.js_change_lang').length){var $links=this.$('ul.js_language_selector li a:not([data-oe-id])');var m=$(_.min($links,function(l){return $(l).attr('href').length;})).attr('href');$links.each(function(){var $link=$(this);var t=$link.attr('href');var l=(t===m)?"default":t.split('/')[1];$link.data('lang',l).addClass('js_change_lang');});}
this.$(".o_image[data-mimetype^='image']").each(function(){var $img=$(this);if(/gif|jpe|jpg|png/.test($img.data('mimetype'))&&$img.data('src')){$img.css('background-image',"url('"+$img.data('src')+"')");}});this.$('.zoomable img[data-zoom]').zoomOdoo();if(window.location.hash.indexOf("scrollTop=")>-1){this.el.scrollTop=+window.location.hash.match(/scrollTop=([0-9]+)/)[1];}
if($.fn.placeholder){$('input, textarea').placeholder();}
return $.when.apply($,defs);},_getRegistry:function(){return websiteRootRegistry;},_startAnimations:function(editableMode,$from){var self=this;editableMode=editableMode||false;if($from===undefined){$from=this.$('#wrapwrap');}
this._stopAnimations($from);var defs=_.map(sAnimation.registry,function(Animation,animationName){var selector=Animation.prototype.selector||'';var $target=$from.find(selector).addBack(selector);var defs=_.map($target,function(el){var animation=new Animation(self,editableMode);self.animations.push(animation);return animation.attachTo($(el));});return $.when.apply($,defs);});return $.when.apply($,defs);},_stopAnimations:function($from){var removedAnimations=_.map(this.animations,function(animation){if(!$from||$from.filter(animation.el).length||$from.find(animation.el).length){animation.destroy();return animation;}
return null;});this.animations=_.difference(this.animations,removedAnimations);},_onAnimationStartDemand:function(ev){this._startAnimations(ev.data.editableMode,ev.data.$target).done(ev.data.onSuccess).fail(ev.data.onFailure);},_onAnimationStopDemand:function(ev){this._stopAnimations(ev.data.$target);},_onLangChangeClick:function(ev){ev.preventDefault();var $target=$(ev.target);var redirect={lang:$target.data('lang'),url:encodeURIComponent($target.attr('href').replace(/[&?]edit_translations[^&?]+/,'')),hash:encodeURIComponent(window.location.hash)};window.location.href=_.str.sprintf("/website/lang/%(lang)s?r=%(url)s%(hash)s",redirect);},_onMainObjectRequest:function(ev){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);ev.data.callback({model:m[1],id:m[2]|0,});},_onPublishBtnClick:function(ev){ev.preventDefault();var self=this;var $data=$(ev.currentTarget).parents(".js_publish_management:first");this._rpc({route:$data.data('controller')||'/website/publish',params:{id:+$data.data('id'),object:$data.data('object'),},}).done(function(result){$data.toggleClass("css_unpublished css_published");$data.find('input').prop("checked",result);$data.parents("[data-publish]").attr("data-publish",+result?'on':'off');}).fail(function(err,data){return new Dialog(self,{title:data.data?data.data.arguments[0]:"",$content:$('<div/>',{html:(data.data?data.data.arguments[1]:data.statusText)
+'<br/>'
+_.str.sprintf(_t('It might be possible to edit the relevant items or fix the issue in <a href="%s">the classic Odoo interface</a>'),'/web#return_label=Website&model='+$data.data('object')+'&id='+$data.data('id')),}),}).open();});},_onWebsiteFormSubmit:function(ev){var $buttons=$(ev.currentTarget).find('button[type="submit"], a.a-submit');_.each($buttons,function(btn){var $btn=$(btn);$btn.html('<i class="fa fa-spinner fa-spin"></i> '+$btn.text());$btn.prop('disabled',true);});},_onDisableOnClick:function(ev){$(ev.currentTarget).addClass('disabled');},_multiWebsiteSwitch:function(ev){var websiteId=ev.currentTarget.getAttribute('website-id');var websiteDomain=ev.currentTarget.getAttribute('domain');var url=window.location.href;if(websiteDomain&&window.location.hostname!==websiteDomain){var path=window.location.pathname+window.location.search+window.location.hash;url=websiteDomain+path;}
window.location.href=$.param.querystring(url,{'fw':websiteId});},_multiCompanySwitch:function(ev){var company_id_to_switch_to=ev.currentTarget.getAttribute('company-id');this._rpc({model:'res.users',method:'write',args:[odoo.session_info.user_id,{'company_id':parseInt(company_id_to_switch_to,10)}],}).then(function(){window.location.reload(true);});},});return{WebsiteRoot:WebsiteRoot,websiteRootRegistry:websiteRootRegistry,};});;

/* /web_editor/static/src/js/content/body_manager.js defined in bundle 'web.assets_frontend' */
odoo.define('web_editor.BodyManager',function(require){'use strict';var weContext=require('web_editor.context');var rootWidget=require('web_editor.root_widget');var ServiceProviderMixin=require('web.ServiceProviderMixin');var session=require('web.session');var BodyManager=rootWidget.RootWidget.extend(ServiceProviderMixin,{init:function(){this._super.apply(this,arguments);ServiceProviderMixin.init.call(this);},willStart:function(){return $.when(this._super.apply(this,arguments),session.is_bound);},_call_service:function(event){if(event.data.service==='ajax'&&event.data.method==='rpc'){var route=event.data.args[0];if(_.str.startsWith(route,'/web/dataset/call_kw/')){var params=event.data.args[1];var options=event.data.args[2];params.kwargs.context=_.extend({},weContext.get(),params.kwargs.context||{});if(options){params.kwargs.context=_.omit(params.kwargs.context,options.noContextKeys);event.data.args[2]=_.omit(options,'noContextKeys');}
params.kwargs.context=JSON.parse(JSON.stringify(params.kwargs.context));}}
return ServiceProviderMixin._call_service.apply(this,arguments);},});return BodyManager;});;

/* /web_editor/static/src/js/root_widget.js defined in bundle 'web.assets_frontend' */
odoo.define('web_editor.root_widget',function(require){'use strict';var Class=require('web.Class');var dom=require('web.dom');var mixins=require('web.mixins');var session=require('web.session');var Widget=require('web.Widget');var RootWidget=Widget.extend({custom_events:_.extend({},Widget.prototype.custom_events||{},{registry_update:'_onRegistryUpdate',get_session:'_onGetSession',}),init:function(){this._super.apply(this,arguments);this._widgets=[];this._listenToUpdates=false;this._getRegistry().setParent(this);},start:function(){var defs=[this._super.apply(this,arguments)];defs.push(this._attachComponents());this._listenToUpdates=true;return $.when.apply($,defs);},_attachComponent:function(childInfo,$from){var self=this;var $elements=dom.cssFind($from||this.$el,childInfo.selector);var defs=_.map($elements,function(element){var w=new childInfo.Widget(self);self._widgets.push(w);return w.attachTo(element);});return $.when.apply($,defs);},_attachComponents:function($from){var self=this;var childInfos=this._getRegistry().get();var defs=_.map(childInfos,function(childInfo){return self._attachComponent(childInfo,$from);});return $.when.apply($,defs);},_getRegistry:function(){},_onGetSession:function(event){if(event.data.callback){event.data.callback(session);}},_onRegistryUpdate:function(ev){ev.stopPropagation();if(this._listenToUpdates){this._attachComponent(ev.data);}},});var RootWidgetRegistry=Class.extend(mixins.EventDispatcherMixin,{init:function(){mixins.EventDispatcherMixin.init.call(this);this._registry=[];},add:function(Widget,selector){var registryInfo={Widget:Widget,selector:selector,};this._registry.push(registryInfo);this.trigger_up('registry_update',registryInfo);},get:function(){return this._registry;},});return{RootWidget:RootWidget,RootWidgetRegistry:RootWidgetRegistry,};});;

/* /portal/static/src/js/portal.js defined in bundle 'web.assets_frontend' */
odoo.define('portal.portal',function(require){'use strict';require('web.dom_ready');if(!$('.o_portal').length){return $.Deferred().reject("DOM doesn't contain '.o_portal'");}
if($('.o_portal_details').length){var state_options=$("select[name='state_id']:enabled option:not(:first)");$('.o_portal_details').on('change',"select[name='country_id']",function(){var select=$("select[name='state_id']");state_options.detach();var displayed_state=state_options.filter("[data-country_id="+($(this).val()||0)+"]");var nb=displayed_state.appendTo(select).show().size();select.parent().toggle(nb>=1);});$('.o_portal_details').find("select[name='country_id']").change();}
if($('.o_portal_search_panel').length){$('.o_portal_search_panel .search-submit').click(function(){var search=$.deparam(window.location.search.substring(1));search.search_in=$(".o_portal_search_panel .dropdown-item.active").attr("href").replace("#","");search.search=$(".o_portal_search_panel input[name='search']").val();window.location.search=$.param(search);});$('.o_portal_search_panel .dropdown-menu').find('.dropdown-item').click(function(e){e.preventDefault();$(this).parents('.dropdown-menu').find('.dropdown-item').removeClass('active');$(this).closest('.dropdown-item').addClass('active');var label=$(this).clone();label.find('span.nolabel').remove();$(".o_portal_search_panel span#search_label").text(label.text());});$('.o_portal_search_panel .dropdown-menu').find('.dropdown-item.active').trigger('click');$(".o_portal_search_panel input[name='search']").on('keyup',function(e){if(e.keyCode===13){$('.o_portal_search_panel .search-submit').trigger('click');}});}});;

/* /portal/static/src/js/portal_tour.js defined in bundle 'web.assets_frontend' */
odoo.define('portal.tour',function(require){'use strict';var tour=require("web_tour.tour");tour.register('portal_load_homepage',{test:true,url:'/my',},[{content:"Check portal is loaded",trigger:'a[href*="/my/account"]:contains("Edit"):first',},{content:"Load my account details",trigger:'input[value="Joel Willis"]'}]);});;

/* /portal/static/src/js/portal_chatter.js defined in bundle 'web.assets_frontend' */
odoo.define('portal.chatter',function(require){'use strict';var base=require('web_editor.base');var ajax=require('web.ajax');var core=require('web.core');var dom=require('web.dom');var Widget=require('web.Widget');var rpc=require('web.rpc');var time=require('web.time');var qweb=core.qweb;var _t=core._t;var PortalChatter=Widget.extend({template:'portal.chatter',events:{"click .o_portal_chatter_pager_btn":'_onClickPager','click .o_portal_chatter_composer_btn':'_onSubmitButtonClick',},init:function(parent,options){this._super.apply(this,arguments);this.options=_.defaults(options||{},{'allow_composer':true,'display_composer':false,'csrf_token':odoo.csrf_token,'message_count':0,'pager_step':10,'pager_scope':5,'pager_start':1,'is_user_public':true,'is_user_publisher':false,'domain':[],});this.set('messages',[]);this.set('message_count',this.options['message_count']);this.set('pager',{});this.set('domain',this.options['domain']);this._current_page=this.options['pager_start'];this._onSubmitButtonClick=dom.makeButtonHandler(this._onSubmitButtonClick);},willStart:function(){var self=this;return $.when(rpc.query({route:'/mail/chatter_init',params:this._messageFetchPrepareParams()}),this._loadTemplates()).then(function(result){self.result=result;self.options=_.extend(self.options,self.result['options']||{});return result;});},start:function(){this.on("change:messages",this,this._renderMessages);this.on("change:message_count",this,function(){this._renderMessageCount();this.set('pager',this._pager(this._current_page));});this.on("change:pager",this,this._renderPager);this.on("change:domain",this,this._onChangeDomain);this.set('message_count',this.options['message_count']);this.set('messages',this.preprocessMessages(this.result['messages']));return this._super.apply(this,arguments);},messageFetch:function(domain){var self=this;return rpc.query({route:'/mail/chatter_fetch',params:self._messageFetchPrepareParams()}).then(function(result){self.set('messages',self.preprocessMessages(result['messages']));self.set('message_count',result['message_count']);});},preprocessMessages:function(messages){_.each(messages,function(m){m['author_avatar_url']=_.str.sprintf('/web/image/%s/%s/author_avatar/50x50','mail.message',m.id);m['published_date_str']=_.str.sprintf(_t('Published on %s'),moment(time.str_to_datetime(m.date)).format('MMMM Do YYYY, h:mm:ss a'));});return messages;},_changeCurrentPage:function(page,domain){this._current_page=page;var d=domain?domain:_.clone(this.get('domain'));this.set('domain',d);},_loadTemplates:function(){return ajax.loadXML('/portal/static/src/xml/portal_chatter.xml',qweb);},_messageFetchPrepareParams:function(){var self=this;var data={'res_model':this.options['res_model'],'res_id':this.options['res_id'],'limit':this.options['pager_step'],'offset':(this._current_page-1)*this.options['pager_step'],'allow_composer':this.options['allow_composer'],};if(self.options['token']){data['token']=self.options['token'];}
if(this.get('domain')){data['domain']=this.get('domain');}
return data;},_pager:function(page){var page=page||1;var total=this.get('message_count');var scope=this.options['pager_scope'];var step=this.options['pager_step'];var page_count=Math.ceil(parseFloat(total)/step);var page=Math.max(1,Math.min(parseInt(page),page_count));scope-=1;var pmin=Math.max(page-parseInt(Math.floor(scope/2)),1);var pmax=Math.min(pmin+scope,page_count);if(pmax-scope>0){pmin=pmax-scope;}else{pmin=1;}
var pages=[];_.each(_.range(pmin,pmax+1),function(index){pages.push(index);});return{"page_count":page_count,"offset":(page-1)*step,"page":page,"page_start":pmin,"page_previous":Math.max(pmin,page-1),"page_next":Math.min(pmax,page+1),"page_end":pmax,"pages":pages};},_renderMessages:function(){this.$('.o_portal_chatter_messages').html(qweb.render("portal.chatter_messages",{widget:this}));},_renderMessageCount:function(){this.$('.o_message_counter').replaceWith(qweb.render("portal.chatter_message_count",{widget:this}));},_renderPager:function(){this.$('.o_portal_chatter_pager').replaceWith(qweb.render("portal.pager",{widget:this}));},_onChangeDomain:function(){var self=this;this.messageFetch().then(function(){var p=self._current_page;self.set('pager',self._pager(p));});},_onClickPager:function(ev){ev.preventDefault();var page=$(ev.currentTarget).data('page');this._changeCurrentPage(page);},_onSubmitButtonClick:function(){return $.Deferred();},});base.ready().then(function(){$('.o_portal_chatter').each(function(index){var $elem=$(this);var mail_thread=new PortalChatter(null,$elem.data());mail_thread.appendTo($elem);});});return{PortalChatter:PortalChatter,};});;

/* /portal/static/src/js/portal_signature.js defined in bundle 'web.assets_frontend' */
odoo.define('portal.signature_form',function(require){"use strict";require('web_editor.ready');var ajax=require('web.ajax');var base=require('web_editor.base');var core=require('web.core');var Widget=require("web.Widget");var rpc=require("web.rpc");var qweb=core.qweb;var SignatureForm=Widget.extend({template:'portal.portal_signature',events:{'click #o_portal_sign_clear':'clearSign','click .o_portal_sign_submit':'submitSign','init #o_portal_sign_accept':'initSign',},init:function(parent,options){this._super.apply(this,arguments);this.options=_.extend(options||{},{csrf_token:odoo.csrf_token,});},willStart:function(){return this._loadTemplates();},start:function(){this.initSign();},initSign:function(){this.$("#o_portal_signature").empty().jSignature({'decor-color':'#D1D0CE','color':'#000','background-color':'#fff','height':'142px','width':'100%',});this.empty_sign=this.$("#o_portal_signature").jSignature('getData','image');},clearSign:function(){this.$("#o_portal_signature").jSignature('reset');},submitSign:function(ev){ev.preventDefault();var self=this;var $confirm_btn=self.$el.find('button[type="submit"]');var partner_name=self.$("#o_portal_sign_name").val();var signature=self.$("#o_portal_signature").jSignature('getData','image');var is_empty=signature?this.empty_sign[1]===signature[1]:true;this.$('#o_portal_sign_name').parent().toggleClass('o_has_error',!partner_name).find('.form-control, .custom-select').toggleClass('is-invalid',!partner_name);this.$('#o_portal_sign_draw').toggleClass('bg-danger text-white',is_empty);if(is_empty||!partner_name){return false;}
$confirm_btn.prepend('<i class="fa fa-spinner fa-spin"></i> ');$confirm_btn.attr('disabled',true);return rpc.query({route:this.options.callUrl,params:{'res_id':this.options.resId,'access_token':this.options.accessToken,'partner_name':partner_name,'signature':signature?signature[1]:false,},}).then(function(data){self.$('.fa-spinner').remove();if(data.error){self.$('.o_portal_sign_error_msg').remove();$confirm_btn.before(qweb.render('portal.portal_signature_error',{message:data.error}));$confirm_btn.attr('disabled',false);}
else if(data.success){$confirm_btn.remove();var $success=qweb.render("portal.portal_signature_success",{widget:data});self.$('#o_portal_sign_draw').parent().replaceWith($success);}
if(data.force_refresh){if(data.redirect_url){window.location=data.redirect_url;}else{window.location.reload();}}});},_loadTemplates:function(){return ajax.loadXML('/portal/static/src/xml/portal_signature.xml',qweb);},});base.ready().then(function(){$('.o_portal_signature_form').each(function(){var hasBeenReset=false;var $elem=$(this);var form=new SignatureForm(null,$elem.data());form.appendTo($elem);$elem.parents('.modal').on('shown.bs.modal',function(ev){$elem.trigger('resize');if(!hasBeenReset){hasBeenReset=true;form.initSign();}});});});return{SignatureForm:SignatureForm,};});;

/* /portal/static/src/js/portal_sidebar.js defined in bundle 'web.assets_frontend' */
odoo.define('portal.PortalSidebar',function(require){"use strict";var config=require('web.config');var core=require('web.core');var Widget=require('web.Widget');var time=require('web.time');var _t=core._t;var PortalSidebar=Widget.extend({start:function(){var self=this;this._super.apply(this,arguments);this._setDelayLabel();},_setDelayLabel:function(){var $sidebarTimeago=this.$el.find('.o_portal_sidebar_timeago');_.each($sidebarTimeago,function(el){var dateTime=moment(time.auto_str_to_date($(el).attr('datetime'))),today=moment().startOf('day'),diff=dateTime.diff(today,'days',true),displayStr;if(diff===0){displayStr=_t('Due today');}else if(diff>0){displayStr=_.str.sprintf(_t('Due in %d days'),Math.abs(diff));}else{displayStr=_.str.sprintf(_t('%d days overdue'),Math.abs(diff));}
$(el).text(displayStr);});},_printIframeContent:function(href){if($.browser.mozilla){window.open(href,'_blank');return;}
if(!this.printContent){this.printContent=$('<iframe id="print_iframe_content" src="'+href+'" style="display:none"></iframe>');this.$el.append(this.printContent);this.printContent.on('load',function(){$(this).get(0).contentWindow.print();});}else{this.printContent.get(0).contentWindow.print();}},});return PortalSidebar;});;

/* /auth_signup/static/src/js/signup.js defined in bundle 'web.assets_frontend' */
odoo.define('auth_signup.signup',function(require){'use strict';var base=require('web_editor.base');base.ready().then(function(){if($('.oe_signup_form').length>0){$('.oe_signup_form').on('submit',function(ev){var $form=$(ev.currentTarget);var $btn=$form.find('.oe_login_buttons > button[type="submit"]');$btn.attr('disabled','disabled');$btn.prepend('<i class="fa fa-refresh fa-spin"/> ');});}});});;

/* /account/static/src/js/account_portal_sidebar.js defined in bundle 'web.assets_frontend' */
odoo.define('account.AccountPortalSidebar.instance',function(require){"use strict";require('web.dom_ready');var AccountPortalSidebar=require('account.AccountPortalSidebar');if(!$('.o_portal_invoice_sidebar').length){return $.Deferred().reject("DOM doesn't contain '.o_portal_invoice_sidebar'");}
var account_portal_sidebar=new AccountPortalSidebar();return account_portal_sidebar.attachTo($('.o_portal_invoice_sidebar')).then(function(){return account_portal_sidebar;});});odoo.define('account.AccountPortalSidebar',function(require){"use strict";var PortalSidebar=require('portal.PortalSidebar');var AccountPortalSidebar=PortalSidebar.extend({events:{'click .o_portal_invoice_print':'_onPrintInvoice',},start:function(){var self=this;this._super.apply(this,arguments);var $invoiceHtml=this.$el.find('iframe#invoice_html');var updateIframeSize=self._updateIframeSize.bind(self,$invoiceHtml);$invoiceHtml.on('load',updateIframeSize);$(window).on('resize',updateIframeSize);},_updateIframeSize:function($el){var $wrapwrap=$el.contents().find('div#wrapwrap');$el.height(0);$el.height($wrapwrap[0].scrollHeight);},_onPrintInvoice:function(ev){ev.preventDefault();var href=$(ev.currentTarget).attr('href');this._printIframeContent(href);},});return AccountPortalSidebar;});;

/* /payment/static/lib/jquery.payment/jquery.payment.js defined in bundle 'web.assets_frontend' */
(function(){var $,cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardExpiry,formatForwardSlash,hasTextSelected,luhnCheck,reFormatCardNumber,restrictCVC,restrictCardNumber,restrictExpiry,restrictNumeric,setCardType,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;},_this=this;$=jQuery;$.payment={};$.payment.fn={};$.fn.payment=function(){var args,method;method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];return $.payment.fn[method].apply(this,args);};defaultFormat=/(\d{1,4})/g;cards=[{type:'maestro',pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:'dinersclub',pattern:/^(36|38|30[0-5])/,format:defaultFormat,length:[14],cvcLength:[3],luhn:true},{type:'laser',pattern:/^(6706|6771|6709)/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:true},{type:'jcb',pattern:/^35/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'unionpay',pattern:/^62/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:'discover',pattern:/^(6011|65|64[4-9]|622)/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'mastercard',pattern:/^5[1-5]/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'amex',pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:true},{type:'visa',pattern:/^4/,format:defaultFormat,length:[13,14,15,16],cvcLength:[3],luhn:true}];cardFromNumber=function(num){var card,_i,_len;num=(num+'').replace(/\D/g,'');for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];if(card.pattern.test(num)){return card;}}};cardFromType=function(type){var card,_i,_len;for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];if(card.type===type){return card;}}};luhnCheck=function(num){var digit,digits,odd,sum,_i,_len;odd=true;sum=0;digits=(num+'').split('').reverse();for(_i=0,_len=digits.length;_i<_len;_i++){digit=digits[_i];digit=parseInt(digit,10);if((odd=!odd)){digit*=2;}
if(digit>9){digit-=9;}
sum+=digit;}
return sum%10===0;};hasTextSelected=function($target){var _ref;if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==$target.prop('selectionEnd')){return true;}
if(typeof document!=="undefined"&&document!==null?(_ref=document.selection)!=null?typeof _ref.createRange==="function"?_ref.createRange().text:void 0:void 0:void 0){return true;}
return false;};reFormatCardNumber=function(e){var _this=this;return setTimeout(function(){var $target,value;$target=$(e.currentTarget);value=$target.val();value=$.payment.formatCardNumber(value);return $target.val(value);});};formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);value=$target.val();card=cardFromNumber(value+digit);length=(value.replace(/\D/g,'')+digit).length;upperLength=16;if(card){upperLength=card.length[card.length.length-1];}
if(length>=upperLength){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(card&&card.type==='amex'){re=/^(\d{4}|\d{4}\s\d{6})$/;}else{re=/(?:^|\s)(\d{4})$/;}
if(re.test(value)){e.preventDefault();return $target.val(value+' '+digit);}else if(re.test(value+digit)){e.preventDefault();return $target.val(value+digit+' ');}};formatBackCardNumber=function(e){var $target,value;$target=$(e.currentTarget);value=$target.val();if(e.meta){return;}
if(e.which!==8){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(/\d\s$/.test(value)){e.preventDefault();return $target.val(value.replace(/\d\s$/,''));}else if(/\s\d?$/.test(value)){e.preventDefault();return $target.val(value.replace(/\s\d?$/,''));}};formatExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);val=$target.val()+digit;if(/^\d$/.test(val)&&(val!=='0'&&val!=='1')){e.preventDefault();return $target.val("0"+val+" / ");}else if(/^\d\d$/.test(val)){e.preventDefault();return $target.val(""+val+" / ");}};formatForwardExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);val=$target.val();if(/^\d\d$/.test(val)){return $target.val(""+val+" / ");}};formatForwardSlash=function(e){var $target,slash,val;slash=String.fromCharCode(e.which);if(slash!=='/'){return;}
$target=$(e.currentTarget);val=$target.val();if(/^\d$/.test(val)&&val!=='0'){return $target.val("0"+val+" / ");}};formatBackExpiry=function(e){var $target,value;if(e.meta){return;}
$target=$(e.currentTarget);value=$target.val();if(e.which!==8){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(/\d(\s|\/)+$/.test(value)){e.preventDefault();return $target.val(value.replace(/\d(\s|\/)*$/,''));}else if(/\s\/\s?\d?$/.test(value)){e.preventDefault();return $target.val(value.replace(/\s\/\s?\d?$/,''));}};restrictNumeric=function(e){var input;if(e.metaKey||e.ctrlKey){return true;}
if(e.which===32){return false;}
if(e.which===0){return true;}
if(e.which<33){return true;}
input=String.fromCharCode(e.which);return!!/[\d\s]/.test(input);};restrictCardNumber=function(e){var $target,card,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
value=($target.val()+digit).replace(/\D/g,'');card=cardFromNumber(value);if(card){return value.length<=card.length[card.length.length-1];}else{return value.length<=16;}};restrictExpiry=function(e){var $target,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
value=$target.val()+digit;value=value.replace(/\D/g,'');if(value.length>6){return false;}};restrictCVC=function(e){var $target,digit,val;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
val=$target.val()+digit;return val.length<=4;};setCardType=function(e){var $target,allTypes,card,cardType,val;$target=$(e.currentTarget);val=$target.val();cardType=$.payment.cardType(val)||'unknown';if(!$target.hasClass(cardType)){allTypes=(function(){var _i,_len,_results;_results=[];for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];_results.push(card.type);}
return _results;})();$target.removeClass('unknown');$target.removeClass(allTypes.join(' '));$target.addClass(cardType);$target.toggleClass('identified',cardType!=='unknown');return $target.trigger('payment.cardType',cardType);}};$.payment.fn.formatCardCVC=function(){this.payment('restrictNumeric');this.on('keypress',restrictCVC);return this;};$.payment.fn.formatCardExpiry=function(){this.payment('restrictNumeric');this.on('keypress',restrictExpiry);this.on('keypress',formatExpiry);this.on('keypress',formatForwardSlash);this.on('keypress',formatForwardExpiry);this.on('keydown',formatBackExpiry);return this;};$.payment.fn.formatCardNumber=function(){this.payment('restrictNumeric');this.on('keypress',restrictCardNumber);this.on('keypress',formatCardNumber);this.on('keydown',formatBackCardNumber);this.on('keyup',setCardType);this.on('paste',reFormatCardNumber);return this;};$.payment.fn.restrictNumeric=function(){this.on('keypress',restrictNumeric);return this;};$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val());};$.payment.cardExpiryVal=function(value){var month,prefix,year,_ref;value=value.replace(/\s/g,'');_ref=value.split('/',2),month=_ref[0],year=_ref[1];if((year!=null?year.length:void 0)===2&&/^\d+$/.test(year)){prefix=(new Date).getFullYear();prefix=prefix.toString().slice(0,2);year=prefix+year;}
month=parseInt(month,10);year=parseInt(year,10);return{month:month,year:year};};$.payment.validateCardNumber=function(num){var card,_ref;num=(num+'').replace(/\s+|-/g,'');if(!/^\d+$/.test(num)){return false;}
card=cardFromNumber(num);if(!card){return false;}
return(_ref=num.length,__indexOf.call(card.length,_ref)>=0)&&(card.luhn===false||luhnCheck(num));};$.payment.validateCardExpiry=function(month,year){var currentTime,expiry,prefix,_ref;if(typeof month==='object'&&'month'in month){_ref=month,month=_ref.month,year=_ref.year;}
if(!(month&&year)){return false;}
month=$.trim(month);year=$.trim(year);if(!/^\d+$/.test(month)){return false;}
if(!/^\d+$/.test(year)){return false;}
if(!(parseInt(month,10)<=12)){return false;}
if(year.length===2){prefix=(new Date).getFullYear();prefix=prefix.toString().slice(0,2);year=prefix+year;}
expiry=new Date(year,month);currentTime=new Date;expiry.setMonth(expiry.getMonth()-1);expiry.setMonth(expiry.getMonth()+1,1);return expiry>currentTime;};$.payment.validateCardCVC=function(cvc,type){var _ref,_ref1;cvc=$.trim(cvc);if(!/^\d+$/.test(cvc)){return false;}
if(type){return _ref=cvc.length,__indexOf.call((_ref1=cardFromType(type))!=null?_ref1.cvcLength:void 0,_ref)>=0;}else{return cvc.length>=3&&cvc.length<=4;}};$.payment.cardType=function(num){var _ref;if(!num){return null;}
return((_ref=cardFromNumber(num))!=null?_ref.type:void 0)||null;};$.payment.formatCardNumber=function(num){var card,groups,upperLength,_ref;card=cardFromNumber(num);if(!card){return num;}
upperLength=card.length[card.length.length-1];num=num.replace(/\D/g,'');num=num.slice(0,+upperLength+1||9e9);if(card.format.global){return(_ref=num.match(card.format))!=null?_ref.join(' '):void 0;}else{groups=card.format.exec(num);if(groups!=null){groups.shift();}
return groups!=null?groups.join(' '):void 0;}};}).call(this);;

/* /payment/static/src/js/payment_portal.js defined in bundle 'web.assets_frontend' */
$(document).ready(function(){$('input#cc_number').payment('formatCardNumber');$('input#cc_cvc').payment('formatCardCVC');$('input#cc_expiry').payment('formatCardExpiry')
$('input#cc_number').on('focusout',function(e){var valid_value=$.payment.validateCardNumber(this.value);var card_type=$.payment.cardType(this.value);if(card_type){$(this).parent('.form-group').children('.card_placeholder').removeClass().addClass('card_placeholder '+card_type);$(this).parent('.form-group').children('input[name="cc_brand"]').val(card_type)}
else{$(this).parent('.form-group').children('.card_placeholder').removeClass().addClass('card_placeholder');}
if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('input#cc_cvc').on('focusout',function(e){var cc_nbr=$(this).parents('.oe_cc').find('#cc_number').val();var card_type=$.payment.cardType(cc_nbr);var valid_value=$.payment.validateCardCVC(this.value,card_type);if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('input#cc_expiry').on('focusout',function(e){var expiry_value=$.payment.cardExpiryVal(this.value);var month=expiry_value.month||'';var year=expiry_value.year||'';var valid_value=$.payment.validateCardExpiry(month,year);if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('select[name="pm_acquirer_id"]').on('change',function(){var acquirer_id=$(this).val();$('.acquirer').addClass('d-none');$('.acquirer[data-acquirer-id="'+acquirer_id+'"]').removeClass('d-none');});});;

/* /payment/static/src/js/payment_transaction_portal.js defined in bundle 'web.assets_frontend' */
;

/* /payment/static/src/js/payment_form.js defined in bundle 'web.assets_frontend' */
odoo.define('payment.payment_form',function(require){"use strict";var ajax=require('web.ajax');var config=require('web.config');var core=require('web.core');var dom=require('web.dom');var Dialog=require("web.Dialog");var Widget=require("web.Widget");var rpc=require("web.rpc");var _t=core._t;var PaymentForm=Widget.extend({events:{'click #o_payment_form_pay':'payEvent','click #o_payment_form_add_pm':'addPmEvent','click button[name="delete_pm"]':'deletePmEvent','click input[type="radio"]':'radioClickEvent','click .o_payment_form_pay_icon_more':'onClickMorePaymentIcon',},init:function(parent,options){this._super.apply(this,arguments);this.options=_.extend(options||{},{});this.payEvent=dom.makeButtonHandler(this.payEvent);},start:function(){this.updateNewPaymentDisplayStatus();$('[data-toggle="tooltip"]').tooltip();},disableButton:function(button){$(button).attr('disabled',true);$(button).children('.fa-lock').removeClass('fa-lock');$(button).prepend('<span class="o_loader"><i class="fa fa-refresh fa-spin"></i>&nbsp;</span>');},enableButton:function(button){$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-lock');$(button).find('span.o_loader').remove();},payEvent:function(ev){ev.preventDefault();var form=this.el;var checked_radio=this.$('input[type="radio"]:checked');var self=this;var button=ev.target;if(checked_radio.length===1){checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);var acquirer_form=false;if(this.isNewPaymentRadio(checked_radio)){acquirer_form=this.$('#o_payment_add_token_acq_'+acquirer_id);}else{acquirer_form=this.$('#o_payment_form_acq_'+acquirer_id);}
var inputs_form=$('input',acquirer_form);var ds=$('input[name="data_set"]',acquirer_form)[0];if(this.isNewPaymentRadio(checked_radio)){if(this.options.partnerId===undefined){console.warn('payment_form: unset partner_id when adding new token; things could go wrong');}
var form_data=this.getFormData(inputs_form);var wrong_input=false;inputs_form.toArray().forEach(function(element){if($(element).attr('type')=='hidden'){return true;}
$(element).closest('div.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(element).siblings(".o_invalid_field").remove();$(element).trigger("focusout");if(element.dataset.isRequired&&element.value.length===0){$(element).closest('div.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(element).closest('div.form-group').append('<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>');wrong_input=true;}
else if($(element).closest('div.form-group').hasClass('o_has_error')){wrong_input=true;$(element).closest('div.form-group').append('<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>');}});if(wrong_input){return;}
this.disableButton(button);var verify_validity=this.$el.find('input[name="verify_validity"]');if(verify_validity.length>0){form_data.verify_validity=verify_validity[0].value==="1";}
return ajax.jsonRpc(ds.dataset.createRoute,'call',form_data).then(function(data){if(data.result){if(data['3d_secure']!==false){$("body").html(data['3d_secure']);}
else{checked_radio.value=data.id;form.submit();return $.Deferred();}}
else{if(data.error){self.displayError('',data.error);}else{self.displayError(_t('Server Error'),_t('e.g. Your credit card details are wrong. Please verify.'));}}
self.enableButton(button);}).fail(function(error,event){self.enableButton(button);self.displayError(_t('Server Error'),_t("We are not able to add your payment method at the moment.")+
error.data.message);});}
else if(this.isFormPaymentRadio(checked_radio)){var $tx_url=this.$el.find('input[name="prepare_tx_url"]');if($tx_url.length===1){var form_save_token=acquirer_form.find('input[name="o_payment_form_save_token"]').prop('checked');return ajax.jsonRpc($tx_url[0].value,'call',{'acquirer_id':parseInt(acquirer_id),'save_token':form_save_token,'access_token':self.options.accessToken,'success_url':self.options.successUrl,'error_url':self.options.errorUrl,'callback_method':self.options.callbackMethod,'order_id':self.options.orderId,}).then(function(result){if(result){var newForm=document.createElement('form');newForm.setAttribute("method","post");newForm.setAttribute("provider",checked_radio.dataset.provider);newForm.hidden=true;newForm.innerHTML=result;var action_url=$(newForm).find('input[name="data_set"]').data('actionUrl');newForm.setAttribute("action",action_url);$(document.getElementsByTagName('body')[0]).append(newForm);$(newForm).find('input[data-remove-me]').remove();if(action_url){newForm.submit();return $.Deferred();}}
else{self.displayError(_t('Server Error'),_t("We are not able to redirect you to the payment form."));}}).fail(function(error,event){self.displayError(_t('Server Error'),_t("We are not able to redirect you to the payment form. ")+
error.data.message);});}
else{this.displayError(_t("Cannot set-up the payment"),_t("We're unable to process your payment."));}}
else{this.disableButton(button);form.submit();return $.Deferred();}}
else{this.displayError(_t('No payment method selected'),_t('Please select a payment method.'));}},addPmEvent:function(ev){ev.stopPropagation();ev.preventDefault();var checked_radio=this.$('input[type="radio"]:checked');var self=this;var button=ev.target;if(checked_radio.length===1&&this.isNewPaymentRadio(checked_radio[0])){checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);var acquirer_form=this.$('#o_payment_add_token_acq_'+acquirer_id);var inputs_form=$('input',acquirer_form);var form_data=this.getFormData(inputs_form);var ds=$('input[name="data_set"]',acquirer_form)[0];var wrong_input=false;inputs_form.toArray().forEach(function(element){if($(element).attr('type')=='hidden'){return true;}
$(element).closest('div.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(element).siblings(".o_invalid_field").remove();$(element).trigger("focusout");if(element.dataset.isRequired&&element.value.length===0){$(element).closest('div.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');var message='<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>';$(element).closest('div.form-group').append(message);wrong_input=true;}
else if($(element).closest('div.form-group').hasClass('o_has_error')){wrong_input=true;var message='<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>';$(element).closest('div.form-group').append(message);}});if(wrong_input){return;}
$(button).attr('disabled',true);$(button).children('.fa-plus-circle').removeClass('fa-plus-circle')
$(button).prepend('<span class="o_loader"><i class="fa fa-refresh fa-spin"></i>&nbsp;</span>');form_data.verify_validity=true;ajax.jsonRpc(ds.dataset.createRoute,'call',form_data).then(function(data){if(data.result){if(data['3d_secure']!==false){$("body").html(data['3d_secure']);}
else{if(form_data.return_url){window.location=form_data.return_url;}
else{window.location.reload();}}}
else{if(data.error){self.displayError('',data.error);}else{self.displayError(_t('Server Error'),_t('e.g. Your credit card details are wrong. Please verify.'));}}
$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-plus-circle')
$(button).find('span.o_loader').remove();}).fail(function(error,event){$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-plus-circle')
$(button).find('span.o_loader').remove();self.displayError(_t('Server error'),_t("We are not able to add your payment method at the moment.</p>")+
error.data.message);});}
else{this.displayError(_t('No payment method selected'),_t('Please select the option to add a new payment method.'));}},deletePmEvent:function(ev){ev.stopPropagation();ev.preventDefault();var self=this;var pm_id=parseInt(ev.target.value);var tokenDelete=function(){rpc.query({model:'payment.token',method:'unlink',args:[pm_id],}).then(function(result){if(result===true){ev.target.closest('div').remove();}},function(){self.displayError(_t('Server Error'),_t("We are not able to delete your payment method at the moment."));});};rpc.query({model:'payment.token',method:'get_linked_records',args:[pm_id],}).then(function(result){if(result[pm_id].length>0){var content='';result[pm_id].forEach(function(sub){content+='<p><a href="'+sub.url+'" title="'+sub.description+'">'+sub.name+'</a><p/>';});content=$('<div>').html(_t('<p>This card is currently linked to the following records:<p/>')+content);new Dialog(self,{title:_t('Warning!'),size:'medium',$content:content,buttons:[{text:_t('Confirm Deletion'),classes:'btn-primary',close:true,click:tokenDelete},{text:_t('Cancel'),close:true}]}).open();}
else{tokenDelete();}},function(err,event){self.displayError(_t('Server Error'),_t("We are not able to delete your payment method at the moment.")+err.data.message);});},onClickMorePaymentIcon:function(ev){ev.preventDefault();var $listItems=$(ev.currentTarget).parents('ul').children('li');var $moreItem=$(ev.currentTarget).parents('li');$listItems.removeClass('d-none');$moreItem.addClass('d-none');},radioClickEvent:function(ev){this.updateNewPaymentDisplayStatus();},updateNewPaymentDisplayStatus:function()
{var checked_radio=this.$('input[type="radio"]:checked');this.$('[id*="o_payment_add_token_acq_"]').addClass('d-none');this.$('[id*="o_payment_form_acq_"]').addClass('d-none');if(checked_radio.length!==1){return;}
checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);if(this.isNewPaymentRadio(checked_radio)){this.$('#o_payment_add_token_acq_'+acquirer_id).removeClass('d-none');}
else if(this.isFormPaymentRadio(checked_radio)){this.$('#o_payment_form_acq_'+acquirer_id).removeClass('d-none');}},isNewPaymentRadio:function(element){return $(element).data('s2s-payment')==='True';},isFormPaymentRadio:function(element){return $(element).data('form-payment')==='True';},getAcquirerIdFromRadio:function(element){return $(element).data('acquirer-id');},displayError:function(title,message){var $checkedRadio=this.$('input[type="radio"]:checked'),acquirerID=this.getAcquirerIdFromRadio($checkedRadio[0]);var $acquirerForm;if(this.isNewPaymentRadio($checkedRadio[0])){$acquirerForm=this.$('#o_payment_add_token_acq_'+acquirerID);}
else if(this.isFormPaymentRadio($checkedRadio[0])){$acquirerForm=this.$('#o_payment_form_acq_'+acquirerID);}
if($checkedRadio.length===0){return new Dialog(null,{title:_t('Error: ')+_.str.escapeHTML(title),size:'medium',$content:"<p>"+(_.str.escapeHTML(message)||"")+"</p>",buttons:[{text:_t('Ok'),close:true}]}).open();}else{this.$('#payment_error').remove();var messageResult='<div class="alert alert-danger mb4" id="payment_error">';if(title!=''){messageResult=messageResult+'<b>'+_.str.escapeHTML(title)+':</b></br>';}
messageResult=messageResult+_.str.escapeHTML(message)+'</div>';$acquirerForm.append(messageResult);}},getFormData:function($form){var unindexed_array=$form.serializeArray();var indexed_array={};$.map(unindexed_array,function(n,i){indexed_array[n.name]=n.value;});return indexed_array;},});$(function(){if(!$('.o_payment_form').length){console.log("DOM doesn't contain '.o_payment_form'");return;}
$('.o_payment_form').each(function(){var $elem=$(this);var form=new PaymentForm(null,$elem.data());form.attachTo($elem);});});return PaymentForm;});;

/* /payment/static/src/js/payment_processing.js defined in bundle 'web.assets_frontend' */
odoo.define('payment.processing',function(require){'use strict';var Widget=require('web.Widget');var Ajax=require('web.ajax');var Core=require('web.core');var Qweb=Core.qweb;var _t=Core._t;$.blockUI.defaults.css.border='0';$.blockUI.defaults.css["background-color"]='';$.blockUI.defaults.overlayCSS["opacity"]='0.9';return Widget.extend({_payment_tx_ids:null,_pollCount:0,events:{},xmlDependencies:['/payment/static/src/xml/payment_processing.xml'],init:function(parent,payment_tx_ids){this._super.apply(this,arguments);this._payment_tx_ids=payment_tx_ids;},start:function(){this.displayLoading();this.poll();return this._super.apply(this,arguments);},startPolling:function(){var timeout=3000;if(this._pollCount>=10&&this._pollCount<20){timeout=10000;}
else if(this._pollCount>=20){timeout=30000;}
setTimeout(this.poll.bind(this),timeout);this._pollCount++;},poll:function(){var self=this;Ajax.jsonRpc('/payment/process/poll','call',{}).then(function(data){if(data.success===true){self.processPolledData(data.transactions);}
else{switch(data.error){case"tx_process_retry":break;case"no_tx_found":self.displayContent("payment.no_tx_found",{});break;default:self.displayContent("payment.exception",{exception_msg:data.error});break;}}
self.startPolling();}).fail(function(e){self.displayContent("payment.rpc_error",{});self.startPolling();});},processPolledData:function(transactions){var render_values={'tx_draft':[],'tx_pending':[],'tx_authorized':[],'tx_done':[],'tx_cancel':[],'tx_error':[],};if(transactions.length>0&&transactions[0].acquirer_provider=='transfer'){window.location=transactions[0].return_url;return;}
transactions.forEach(function(tx){var key='tx_'+tx.state;if(key in render_values){render_values[key].push(tx);}});function countTxInState(states){var nbTx=0;for(var prop in render_values){if(states.indexOf(prop)>-1&&render_values.hasOwnProperty(prop)){nbTx+=render_values[prop].length;}}
return nbTx;}
if(countTxInState(['tx_done','tx_error','tx_pending'])===1){var tx=render_values['tx_done'][0]||render_values['tx_error'][0];if(tx){window.location=tx.return_url;return;}}
this.displayContent("payment.display_tx_list",render_values);},displayContent:function(xmlid,render_values){var html=Qweb.render(xmlid,render_values);$.unblockUI();this.$el.find('.o_payment_processing_content').html(html);},displayLoading:function(){var msg=_t("We are processing your payments, please wait ...");$.blockUI({'message':'<h2 class="text-white"><img src="/web/static/src/img/spin.png" class="fa-pulse"/>'+'    <br />'+msg+'</h2>'});},});});;

/* /sale/static/src/js/sale_portal_sidebar.js defined in bundle 'web.assets_frontend' */
odoo.define('sale.SalePortalSidebar.instance',function(require){"use strict";require('web.dom_ready');var SalePortalSidebar=require('sale.SalePortalSidebar');if(!$('.o_portal_sale_sidebar').length){return $.Deferred().reject("DOM doesn't contain '.o_portal_sale_sidebar'");}
var $spyWatch=$('body[data-target=".navspy"]'),sale_portal_sidebar=new SalePortalSidebar($spyWatch);return sale_portal_sidebar.attachTo($('.o_portal_sale_sidebar')).then(function(){return sale_portal_sidebar;});});odoo.define('sale.SalePortalSidebar',function(require){"use strict";var PortalSidebar=require('portal.PortalSidebar');var SalePortalSidebar=PortalSidebar.extend({init:function($watched_selector){this._super.apply(this,arguments);this.authorizedTextTag=['em','b','i','u'];this.spyWatched=$watched_selector;},start:function(){this._super.apply(this,arguments);var $spyWatcheElement=this.$el.find('[data-id="portal_sidebar"]');this._setElementId($spyWatcheElement);this._generateMenu();},_setElementId:function(prefix,$el){var id=_.uniqueId(prefix);this.spyWatched.find($el).attr('id',id);return id;},_generateMenu:function(){var self=this,lastLI=false,lastUL=null,$bsSidenav=this.$el.find('.bs-sidenav');$("#quote_content [id^=quote_header_], #quote_content [id^=quote_]",this.spyWatched).attr("id","");_.each(this.spyWatched.find("#quote_content h2, #quote_content h3"),function(el){var id,text;switch(el.tagName.toLowerCase()){case"h2":id=self._setElementId('quote_header_',el);text=self._extractText($(el));if(!text){break;}
lastLI=$("<li class='nav-item'>").append($('<a class="nav-link" style="max-width: 200px;" href="#'+id+'"/>').text(text)).appendTo($bsSidenav);lastUL=false;break;case"h3":id=self._setElementId('quote_',el);text=self._extractText($(el));if(!text){break;}
if(lastLI){if(!lastUL){lastUL=$("<ul class='nav flex-column'>").appendTo(lastLI);}
$("<li class='nav-item'>").append($('<a class="nav-link" style="max-width: 200px;" href="#'+id+'"/>').text(text)).appendTo(lastUL);}
break;}});},_extractText:function($node){var self=this;var rawText=[];_.each($node.contents(),function(el){var current=$(el);if($.trim(current.text())){var tagName=current.prop("tagName");if(_.isUndefined(tagName)||(!_.isUndefined(tagName)&&_.contains(self.authorizedTextTag,tagName.toLowerCase()))){rawText.push($.trim(current.text()));}}});return rawText.join(' ');},});return SalePortalSidebar;});;

/* /sale_management/static/src/js/sale_management.js defined in bundle 'web.assets_frontend' */
odoo.define('sale_management.sale_management',function(require){'use strict';require('web.dom_ready');var ajax=require('web.ajax');var Widget=require('web.Widget');if(!$('.o_portal_sale_sidebar').length){return $.Deferred().reject("DOM doesn't contain '.o_portal_sale_sidebar'");}
var UpdateLineButton=Widget.extend({events:{'click':'onClick',},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.elems=self._getUpdatableElements();self.elems.$lineQuantity.change(function(ev){var quantity=parseInt(this.value);self._onChangeQuantity(quantity);});});},_onChangeQuantity:function(quantity){var href=this.$el.attr("href");var order_id=href.match(/my\/orders\/([0-9]+)/);var line_id=href.match(/update_line\/([0-9]+)/);var params={'line_id':parseInt(line_id[1]),'remove':this.$el.is('[href*="remove"]'),'unlink':this.$el.is('[href*="unlink"]'),'input_quantity':quantity>=0?quantity:false,};var token=href.match(/token=([\w\d-]*)/)[1];if(token){params.access_token=token;}
order_id=parseInt(order_id[1])
this._callUpdateLineRoute(order_id,params).then(this._updateOrderValues.bind(this));return false;},onClick:function(ev){ev.preventDefault();return this._onChangeQuantity();},_callUpdateLineRoute:function(order_id,params){var def=new $.Deferred();var url="/my/orders/"+order_id+"/update_line_dict";ajax.jsonRpc(url,'call',params).then(def.resolve.bind(def)).fail(function(){delete params.input_quantity;ajax.jsonRpc("/my/orders/"+order_id+"/update_line",'call',params).fail(def.reject.bind(def)).then(function(data){var actualData=data;if(data){actualData={order_amount_total:data[1],order_line_product_uom_qty:data[0],};}
def.resolve(actualData);});});return def;},_updateOrderValues:function(data){if(!data){window.location.reload();}
var orderAmountTotal=data.order_amount_total;var orderAmountUntaxed=data.order_amount_untaxed;var orderAmountTax=data.order_amount_tax;var orderAmountUndiscounted=data.order_amount_undiscounted;var orderTotalsTable=$(data.order_totals_table);var lineProductUomQty=data.order_line_product_uom_qty;var linePriceTotal=data.order_line_price_total;var linePriceSubTotal=data.order_line_price_subtotal;this.elems.$lineQuantity.val(lineProductUomQty)
if(this.elems.$linePriceTotal.length&&linePriceTotal!==undefined){this.elems.$linePriceTotal.text(linePriceTotal);}
if(this.elems.$linePriceSubTotal.length&&linePriceSubTotal!==undefined){this.elems.$linePriceSubTotal.text(linePriceSubTotal);}
if(orderAmountUntaxed!==undefined){this.elems.$orderAmountUntaxed.text(orderAmountUntaxed);}
if(orderAmountTotal!==undefined){this.elems.$orderAmountTotal.text(orderAmountTotal);}
if(orderAmountUndiscounted!==undefined){this.elems.$orderAmountUndiscounted.text(orderAmountUndiscounted);}
if(orderTotalsTable){this.elems.$orderTotalsTable.find('table').replaceWith(orderTotalsTable);}},_getUpdatableElements:function(){var $parentTr=this.$el.parents('tr:first');var $linePriceTotal=$parentTr.find('.oe_order_line_price_total .oe_currency_value');var $linePriceSubTotal=$parentTr.find('.oe_order_line_price_subtotal .oe_currency_value');if(!$linePriceTotal.length&&!$linePriceSubTotal.length){$linePriceTotal=$linePriceSubTotal=$parentTr.find('.oe_currency_value').last();}
var $orderAmountUntaxed=$('[data-id="total_untaxed"]').find('span, b');var $orderAmountTotal=$('[data-id="total_amount"]').find('span, b');var $orderAmountUndiscounted=$('[data-id="amount_undiscounted"]').find('span, b');if(!$orderAmountUntaxed.length){$orderAmountUntaxed=$orderAmountTotal.eq(1);$orderAmountTotal=$orderAmountTotal.eq(0).add($orderAmountTotal.eq(2));}
return{$lineQuantity:this.$el.parents('.input-group:first').find('.js_quantity'),$linePriceSubTotal:$linePriceSubTotal,$linePriceTotal:$linePriceTotal,$orderAmountUntaxed:$orderAmountUntaxed,$orderAmountTotal:$orderAmountTotal,$orderTotalsTable:$('#total'),$orderAmountUndiscounted:$orderAmountUndiscounted,}}});var update_button_list=[];$('a.js_update_line_json').each(function(index){var button=new UpdateLineButton();button.setElement($(this)).start();update_button_list.push(button);});});;

/* /website/static/src/js/utils.js defined in bundle 'web.assets_frontend' */
odoo.define('website.utils',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var qweb=core.qweb;function autocompleteWithPages(self,$input){$input.autocomplete({source:function(request,response){return self._rpc({model:'website',method:'search_pages',args:[null,request.term],kwargs:{limit:15,},}).then(function(exists){var rs=_.map(exists,function(r){return r.loc;});response(rs);});},});}
function prompt(options,_qweb){if(typeof options==='string'){options={text:options};}
var xmlDef;if(_.isUndefined(_qweb)){_qweb='website.prompt';xmlDef=ajax.loadXML('/website/static/src/xml/website.xml',core.qweb);}
options=_.extend({window_title:'',field_name:'','default':'',init:function(){},},options||{});var type=_.intersection(Object.keys(options),['input','textarea','select']);type=type.length?type[0]:'input';options.field_type=type;options.field_name=options.field_name||options[type];var def=$.Deferred();$.when(xmlDef).then(function(){var dialog=$(qweb.render(_qweb,options)).appendTo('body');options.$dialog=dialog;var field=dialog.find(options.field_type).first();field.val(options['default']);field.fillWith=function(data){if(field.is('select')){var select=field[0];data.forEach(function(item){select.options[select.options.length]=new window.Option(item[1],item[0]);});}else{field.val(data);}};var init=options.init(field,dialog);$.when(init).then(function(fill){if(fill){field.fillWith(fill);}
dialog.modal('show');field.focus();dialog.on('click','.btn-primary',function(){var backdrop=$('.modal-backdrop');def.resolve(field.val(),field,dialog);dialog.modal('hide').remove();backdrop.remove();});});dialog.on('hidden.bs.modal',function(){var backdrop=$('.modal-backdrop');def.reject();dialog.remove();backdrop.remove();});if(field.is('input[type="text"], select')){field.keypress(function(e){if(e.which===13){e.preventDefault();dialog.find('.btn-primary').trigger('click');}});}});return def;}
return{autocompleteWithPages:autocompleteWithPages,prompt:prompt,};});;

/* /website/static/src/js/website.js defined in bundle 'web.assets_frontend' */
odoo.define('website.website',function(require){'use strict';var weContext=require('web_editor.context');var weGetContext=weContext.get;weContext.get=function(context){var html=document.documentElement;return _.extend({website_id:html.getAttribute('data-website-id')|0,},weGetContext(context),context);};});odoo.define('website.website_modal',function(require){'use strict';require('web.dom_ready');$('body').on('shown.bs.modal',function(e){$(e.target).addClass('modal_shown');});});;

/* /website/static/src/js/content/compatibility.js defined in bundle 'web.assets_frontend' */
odoo.define('website.content.compatibility',function(require){'use strict';require('web.dom_ready');var browser=_.findKey($.browser,function(v){return v===true;});if($.browser.mozilla&&+$.browser.version.replace(/^([0-9]+\.[0-9]+).*/,'\$1')<20){browser='msie';}
browser+=(','+$.browser.version);var mobileRegex=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;if(mobileRegex.test(window.navigator.userAgent.toLowerCase())){browser+=',mobile';}
document.documentElement.setAttribute('data-browser',browser);var htmlStyle=document.documentElement.style;var isFlexSupported=(('flexWrap'in htmlStyle)||('WebkitFlexWrap'in htmlStyle)||('msFlexWrap'in htmlStyle));if(!isFlexSupported){document.documentElement.setAttribute('data-no-flex','');}
return{browser:browser,isFlexSupported:isFlexSupported,};});;

/* /website/static/src/js/content/lazy_template_call.js defined in bundle 'web.assets_frontend' */
odoo.define('website.content.lazy_template_call',function(require){'use strict';var Widget=require('web.Widget');var websiteRootData=require('website.WebsiteRoot');var LazyTemplateRenderer=Widget.extend({start:function(){var $oeCalls=this.$('[data-oe-call]');var oeCalls=_.uniq($oeCalls.map(function(){return $(this).data('oe-call');}).get());if(!oeCalls.length){return $.when(this._super.apply(this,arguments));}
var def=this._rpc({route:'/website/multi_render',params:{ids_or_xml_ids:oeCalls,},}).then(function(data){_.each(data,function(d,k){var $data=$(d).addClass('o_block_'+k);$oeCalls.filter('[data-oe-call="'+k+'"]').each(function(){$(this).replaceWith($data.clone());});});});return $.when(this._super.apply(this,arguments),def);},});websiteRootData.websiteRootRegistry.add(LazyTemplateRenderer,'#wrapwrap');return LazyTemplateRenderer;});;

/* /website/static/src/js/content/menu.js defined in bundle 'web.assets_frontend' */
odoo.define('website.content.menu',function(require){'use strict';var dom=require('web.dom');var sAnimation=require('website.content.snippets.animation');sAnimation.registry.affixMenu=sAnimation.Class.extend({selector:'header.o_affix_enabled',start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
var self=this;this.$headerClone=this.$target.clone().addClass('o_header_affix affix').removeClass('o_affix_enabled');this.$headerClone.insertAfter(this.$target);this.$headers=this.$target.add(this.$headerClone);this.$dropdowns=this.$headers.find('.dropdown');this.$dropdownMenus=this.$headers.find('.dropdown-menu');this.$navbarCollapses=this.$headers.find('.navbar-collapse');_.each(this.$headerClone.find('[data-toggle="collapse"]'),function(el){var $source=$(el);var targetIDSelector=$source.attr('data-target');var $target=self.$headerClone.find(targetIDSelector);$source.attr('data-target',targetIDSelector+'_clone');$target.attr('id',targetIDSelector.substr(1)+'_clone');});$(window).on('resize.affixMenu scroll.affixMenu',_.throttle(this._onWindowUpdate.bind(this),200));setTimeout(this._onWindowUpdate.bind(this),0);return def;},destroy:function(){if(this.$headerClone){this.$headerClone.remove();$(window).off('.affixMenu');}
this._super.apply(this,arguments);},_onWindowUpdate:function(){if(this.$navbarCollapses.hasClass('show')){return;}
var wOffset=$(window).scrollTop();var hOffset=this.$target.scrollTop();this.$headerClone.toggleClass('affixed',wOffset>(hOffset+300));this.$dropdowns.add(this.$dropdownMenus).removeClass('show');this.$navbarCollapses.removeClass('show').attr('aria-expanded',false);},});sAnimation.registry.autohideMenu=sAnimation.Class.extend({selector:'header #top_menu',start:function(){var self=this;var defs=[this._super.apply(this,arguments)];this.noAutohide=this.$el.closest('.o_no_autohide_menu').length;if(!this.noAutohide){var $navbar=this.$el.closest('.navbar');_.each($navbar.find('img'),function(img){if(img.complete){return;}
var def=$.Deferred();defs.push(def);$(img).one('load',function(){def.resolve();});});var $window=$(window);$window.on('load.autohideMenu',function(){$window.trigger('resize');});}
return $.when.apply($,defs).then(function(){if(!self.noAutohide){dom.initAutoMoreMenu(self.$el,{unfoldable:'.divider, .divider ~ li'});}
self.$el.removeClass('o_menu_loading');});},destroy:function(){this._super.apply(this,arguments);if(!this.noAutohide){$(window).off('.autohideMenu');dom.destroyAutoMoreMenu(this.$el);}},});sAnimation.registry.menuDirection=sAnimation.Class.extend({selector:'header .navbar .nav',events:{'show.bs.dropdown':'_onDropdownShow',},start:function(){this.defaultAlignment=this.$el.is('.ml-auto, .ml-auto ~ *')?'right':'left';return this._super.apply(this,arguments);},_checkOpening:function(alignment,liOffset,liWidth,menuWidth,windowWidth){if(alignment==='left'){return(liOffset+menuWidth<=windowWidth);}else{return(liOffset+liWidth-menuWidth>=0);}},_onDropdownShow:function(ev){var $li=$(ev.target);var $menu=$li.children('.dropdown-menu');var liOffset=$li.offset().left;var liWidth=$li.outerWidth();var menuWidth=$menu.outerWidth();var windowWidth=$(window).outerWidth();$menu.removeClass('dropdown-menu-left dropdown-menu-right');var alignment=this.defaultAlignment;if($li.nextAll(':visible').length===0){alignment='right';}
for(var i=0;i<2;i++){if(!this._checkOpening(alignment,liOffset,liWidth,menuWidth,windowWidth)){alignment=(alignment==='left'?'right':'left');}}
$menu.addClass('dropdown-menu-'+alignment);},});});;

/* /website/static/src/js/content/snippets.animation.js defined in bundle 'web.assets_frontend' */
odoo.define('website.content.snippets.animation',function(require){'use strict';var Class=require('web.Class');var core=require('web.core');var dom=require('web.dom');var mixins=require('web.mixins');var utils=require('web.utils');var Widget=require('web.Widget');var qweb=core.qweb;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){setTimeout(callback,10);};window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(id){clearTimeout(id);};if(!window.performance||!window.performance.now){window.performance={now:function(){return Date.now();}};}
var AnimationEffect=Class.extend(mixins.ParentedMixin,{init:function(parent,updateCallback,startEvents,$startTarget,options){mixins.ParentedMixin.init.call(this);this.setParent(parent);options=options||{};this._minFrameTime=1000/(options.maxFPS||100);this._updateCallback=updateCallback;this.startEvents=startEvents||'scroll';this.$startTarget=$($startTarget||window);this._getStateCallback=options.getStateCallback||((this.startEvents==='scroll'&&this.$startTarget[0]===window)?function(){return window.pageYOffset;}:false)||((this.startEvents==='resize'&&this.$startTarget[0]===window)?function(){return{width:window.innerWidth,height:window.innerHeight};}:false)||function(){return undefined;};this.endEvents=options.endEvents||false;this.$endTarget=options.$endTarget?$(options.$endTarget):this.$startTarget;this._updateCallback=this._updateCallback.bind(parent);this._getStateCallback=this._getStateCallback.bind(parent);this._uid='_animationEffect'+_.uniqueId();this.startEvents=_processEvents(this.startEvents,this._uid);if(this.endEvents){this.endEvents=_processEvents(this.endEvents,this._uid);}
function _processEvents(events,namespace){events=events.split(' ');return _.each(events,function(e,index){events[index]+=('.'+namespace);}).join(' ');}},destroy:function(){mixins.ParentedMixin.destroy.call(this);this.stop();},start:function(){this._paused=false;this._rafID=window.requestAnimationFrame((function(t){this._update(t);this._paused=true;}).bind(this));if(this.endEvents){this.$startTarget.on(this.startEvents,(function(e){if(this._paused){_.defer(this.play.bind(this,e));}}).bind(this));this.$endTarget.on(this.endEvents,(function(){if(!this._paused){_.defer(this.pause.bind(this));}}).bind(this));}else{var pauseTimer=null;this.$startTarget.on(this.startEvents,_.throttle((function(e){this.play(e);clearTimeout(pauseTimer);pauseTimer=_.delay((function(){this.pause();pauseTimer=null;}).bind(this),2000);}).bind(this),250,{trailing:false}));}},stop:function(){this.$startTarget.off(this.startEvents);if(this.endEvents){this.$endTarget.off(this.endEvents);}
this.pause();},play:function(e){this._newEvent=e;if(!this._paused)return;this._paused=false;this._rafID=window.requestAnimationFrame(this._update.bind(this));this._lastUpdateTimestamp=undefined;},pause:function(){if(this._paused)return;this._paused=true;window.cancelAnimationFrame(this._rafID);this._lastUpdateTimestamp=undefined;},_update:function(timestamp){if(this._paused)return;this._rafID=window.requestAnimationFrame(this._update.bind(this));var elapsedTime=0;if(this._lastUpdateTimestamp){elapsedTime=timestamp-this._lastUpdateTimestamp;if(elapsedTime<this._minFrameTime)return;}
var animationState=this._getStateCallback(elapsedTime,this._newEvent);if(!this._newEvent&&animationState!==undefined&&_.isEqual(animationState,this._animationLastState)){return;}
this._animationLastState=animationState;this._updateCallback(this._animationLastState,elapsedTime,this._newEvent);this._lastUpdateTimestamp=timestamp;this._newEvent=undefined;},});var Animation=Widget.extend({selector:false,events:{},edit_events:{},read_events:{},maxFPS:100,effects:[],init:function(parent,editableMode){this._super.apply(this,arguments);this.editableMode=editableMode;if(editableMode){this.events=_.extend({},this.events||{},this.edit_events||{});}else{this.events=_.extend({},this.events||{},this.read_events||{});}},start:function(){this._prepareEffects();_.each(this._animationEffects,function(effect){effect.start();});return this._super.apply(this,arguments);},destroy:function(){var $oldel=this.$el;this.setElement(null);this._super.apply(this,arguments);this.$el=$oldel;this.el=$oldel[0];this.$target=this.$el;this.target=this.el;},setElement:function(){this._super.apply(this,arguments);this.$target=this.$el;this.target=this.el;},_delegateEvents:function(){var self=this;var originalEvents=this.events;var events={};_.each(this.events,function(method,event){if(typeof method!=='string'){events[event]=method;return;}
var methodOptions=method.split(' ');if(methodOptions.length<=1){events[event]=method;return;}
var isAsync=_.contains(methodOptions,'async');if(!isAsync){events[event]=method;return;}
method=self.proxy(methodOptions[methodOptions.length-1]);if(_.str.startsWith(event,'click')){method=dom.makeButtonHandler(method);}else{method=dom.makeAsyncHandler(method);}
events[event]=method;});this.events=events;this._super.apply(this,arguments);this.events=originalEvents;},_prepareEffects:function(){this._animationEffects=[];var self=this;_.each(this.effects,function(desc){self._addEffect(self[desc.update],desc.startEvents,_findTarget(desc.startTarget),{getStateCallback:desc.getState&&self[desc.getState],endEvents:desc.endEvents||undefined,$endTarget:_findTarget(desc.endTarget),maxFPS:self.maxFPS,});function _findTarget(selector){if(selector){if(selector==='selector'){return self.$target;}
return self.$(selector);}
return undefined;}});},_addEffect:function(updateCallback,startEvents,$startTarget,options){this._animationEffects.push(new AnimationEffect(this,updateCallback,startEvents,$startTarget,options));},});var registry={};registry.slider=Animation.extend({selector:'.carousel',edit_events:{'slid.bs.carousel':'_onEditionSlide',},start:function(){if(!this.editableMode){this.$('img').on('load.slider',this._onImageLoaded.bind(this));this._computeHeights();}
this.$target.carousel();return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);this.$('img').off('.slider');this.$target.carousel('pause');this.$target.removeData('bs.carousel');_.each(this.$('.carousel-item'),function(el){$(el).css('min-height','');});},_computeHeights:function(){var maxHeight=0;var $items=this.$('.carousel-item');_.each($items,function(el){var $item=$(el);var isActive=$item.hasClass('active');$item.addClass('active');var height=$item.outerHeight();if(height>maxHeight){maxHeight=height;}
$item.toggleClass('active',isActive);});_.each($items,function(el){$(el).css('min-height',maxHeight);});},_onEditionSlide:function(){this._computeHeights();},_onImageLoaded:function(){this._computeHeights();},});registry.parallax=Animation.extend({selector:'.parallax',effects:[{startEvents:'scroll',update:'_onWindowScroll',}],start:function(){this._rebuild();$(window).on('resize.animation_parallax',_.debounce(this._rebuild.bind(this),500));return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);$(window).off('.animation_parallax');},_rebuild:function(){if(!this.$bg||!this.$bg.length){this.$bg=this.$('> .s_parallax_bg');if(!this.$bg.length){this.$bg=$('<span/>',{class:'s_parallax_bg'+(this.$target.hasClass('oe_custom_bg')?' oe_custom_bg':''),}).prependTo(this.$target);}}
var urlTarget=this.$target.css('background-image');if(urlTarget!=='none'){this.$bg.css('background-image',urlTarget);}
this.$target.css('background-image','none');this.speed=parseFloat(this.$target.attr('data-scroll-background-ratio')||0);this.$target.toggleClass('s_parallax_is_fixed',this.speed===1);if(this.speed===0||this.speed===1){this.$bg.css({transform:'',top:'',bottom:''});return;}
this.viewport=document.body.clientHeight-$('#wrapwrap').position().top;this.visible_area=[this.$target.offset().top];this.visible_area.push(this.visible_area[0]+this.$target.innerHeight()+this.viewport);this.ratio=this.speed*(this.viewport/10);this.$bg.css({top:-this.ratio,bottom:-this.ratio,});},_onWindowScroll:function(scrollOffset){if(this.speed===0||this.speed===1){return;}
var vpEndOffset=scrollOffset+this.viewport;if(vpEndOffset>=this.visible_area[0]&&vpEndOffset<=this.visible_area[1]){this.$bg.css('transform','translateY('+_getNormalizedPosition.call(this,vpEndOffset)+'px)');}
function _getNormalizedPosition(pos){var r=(pos-this.visible_area[1])/(this.visible_area[0]-this.visible_area[1]);return Math.round(this.ratio*(2*r-1));}},});registry.share=Animation.extend({selector:'.s_share, .oe_share',start:function(){var url_regex=/(\?(?:|.*&)(?:u|url|body)=)(.*?)(&|#|$)/;var title_regex=/(\?(?:|.*&)(?:title|text|subject)=)(.*?)(&|#|$)/;var url=encodeURIComponent(window.location.href);var title=encodeURIComponent($('title').text());this.$('a').each(function(){var $a=$(this);$a.attr('href',function(i,href){return href.replace(url_regex,function(match,a,b,c){return a+url+c;}).replace(title_regex,function(match,a,b,c){return a+title+c;});});if($a.attr('target')&&$a.attr('target').match(/_blank/i)&&!$a.closest('.o_editable').length){$a.on('click',function(){window.open(this.href,'','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=550,width=600');return false;});}});return this._super.apply(this,arguments);},});registry.mediaVideo=Animation.extend({selector:'.media_iframe_video',start:function(){var def=this._super.apply(this,arguments);if(this.$target.children('iframe').length){return def;}
this.$target.empty();this.$target.append('<div class="css_editable_mode_display">&nbsp;</div>'+'<div class="media_iframe_video_size">&nbsp;</div>');this.$target.append($('<iframe/>',{src:_.escape(this.$target.data('oe-expression')||this.$target.data('src')),frameborder:'0',allowfullscreen:'allowfullscreen',sandbox:'allow-scripts allow-same-origin',}));return def;},});registry.ul=Animation.extend({selector:'ul.o_ul_folded, ol.o_ul_folded',events:{'click .o_ul_toggle_next':'_onToggleNextClick','click .o_ul_toggle_self':'_onToggleSelfClick',},_onToggleNextClick:function(ev){ev.preventDefault();var $target=$(ev.currentTarget);$target.toggleClass('o_open');$target.closest('li').next().toggleClass('o_close');},_onToggleSelfClick:function(ev){ev.preventDefault();var $target=$(ev.currentTarget);$target.toggleClass('o_open');$target.closest('li').find('ul,ol').toggleClass('o_close');},});registry.gallery=Animation.extend({selector:'.o_gallery:not(.o_slideshow)',xmlDependencies:['/website/static/src/xml/website.gallery.xml'],read_events:{'click img':'_onClickImg',},_onClickImg:function(ev){var self=this;var $cur=$(ev.currentTarget);var urls=[];var idx=undefined;var milliseconds=undefined;var params=undefined;var $images=$cur.closest('.o_gallery').find('img');var size=0.8;var dimensions={min_width:Math.round(window.innerWidth*size*0.9),min_height:Math.round(window.innerHeight*size),max_width:Math.round(window.innerWidth*size*0.9),max_height:Math.round(window.innerHeight*size),width:Math.round(window.innerWidth*size*0.9),height:Math.round(window.innerHeight*size)};$images.each(function(){urls.push($(this).attr('src'));});var $img=($cur.is('img')===true)?$cur:$cur.closest('img');idx=urls.indexOf($img.attr('src'));milliseconds=$cur.closest('.o_gallery').data('interval')||false;params={srcs:urls,index:idx,dim:dimensions,interval:milliseconds,id:_.uniqueId('slideshow_')};var $modal=$(qweb.render('website.gallery.slideshow.lightbox',params));$modal.modal({keyboard:true,backdrop:true,});$modal.on('hidden.bs.modal',function(){$(this).hide();$(this).siblings().filter('.modal-backdrop').remove();$(this).remove();});$modal.find('.modal-content, .modal-body.o_slideshow').css('height','100%');$modal.appendTo(document.body);$modal.one('shown.bs.modal',function(){self.trigger_up('animation_start_demand',{editableMode:false,$target:$modal.find('.modal-body.o_slideshow'),});});},});registry.gallerySlider=Animation.extend({selector:'.o_slideshow',xmlDependencies:['/website/static/src/xml/website.gallery.xml'],start:function(){var self=this;this.$carousel=this.$target.is('.carousel')?this.$target:this.$target.find('.carousel');this.$indicator=this.$carousel.find('.carousel-indicators');this.$prev=this.$indicator.find('li.o_indicators_left').css('visibility','');this.$next=this.$indicator.find('li.o_indicators_right').css('visibility','');var $lis=this.$indicator.find('li[data-slide-to]');var nbPerPage=Math.floor(this.$indicator.width()/$lis.first().outerWidth(true))-3;var realNbPerPage=nbPerPage||1;var nbPages=Math.ceil($lis.length/realNbPerPage);var index;var page;update();function hide(){$lis.each(function(i){$(this).toggleClass('d-none',!(i>=page*nbPerPage&&i<(page+1)*nbPerPage));});if(self.editableMode){return;}
if(page<=0){self.$prev.detach();}else{self.$prev.prependTo(self.$indicator);}
if(page>=nbPages-1){self.$next.detach();}else{self.$next.appendTo(self.$indicator);}}
function update(){index=$lis.index($lis.filter('.active'))||0;page=Math.floor(index/realNbPerPage);hide();}
this.$carousel.on('slide.bs.carousel.gallery_slider',function(){setTimeout(function(){var $item=self.$carousel.find('.carousel-inner .carousel-item-prev, .carousel-inner .carousel-item-next');var index=$item.index();$lis.removeClass('active').filter('[data-slide-to="'+index+'"]').addClass('active');},0);});this.$indicator.on('click.gallery_slider','> li:not([data-slide-to])',function(){page+=($(this).hasClass('o_indicators_left')?-1:1);page=Math.max(0,Math.min(nbPages-1,page));self.$carousel.carousel(page*realNbPerPage);hide();});this.$carousel.on('slid.bs.carousel.gallery_slider',update);return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);if(!this.$indicator){return;}
this.$prev.prependTo(this.$indicator);this.$next.appendTo(this.$indicator);this.$carousel.off('.gallery_slider');this.$indicator.off('.gallery_slider');},});registry.socialShare=Animation.extend({selector:'.oe_social_share',xmlDependencies:['/website/static/src/xml/website.share.xml'],read_events:{'mouseenter':'_onMouseEnter',},_bindSocialEvent:function(){this.$('.oe_social_facebook').click($.proxy(this._renderSocial,this,'facebook'));this.$('.oe_social_twitter').click($.proxy(this._renderSocial,this,'twitter'));this.$('.oe_social_linkedin').click($.proxy(this._renderSocial,this,'linkedin'));this.$('.oe_social_google-plus').click($.proxy(this._renderSocial,this,'google-plus'));},_render:function(){this.$target.popover({content:qweb.render('website.social_hover',{medias:this.socialList}),placement:'bottom',container:this.$target,html:true,trigger:'manual',animation:false,}).popover("show");this.$target.off('mouseleave.socialShare').on('mouseleave.socialShare',function(){var self=this;setTimeout(function(){if(!$(".popover:hover").length){$(self).popover('dispose');}},200);});},_renderSocial:function(social){var url=encodeURIComponent(document.URL.split(/[?#]/)[0]);var title=document.title.split(" | ")[0];var hashtags=' #'+document.title.split(" | ")[1].replace(' ','')+' '+this.hashtags;var social_network={'facebook':'https://www.facebook.com/sharer/sharer.php?u='+url,'twitter':'https://twitter.com/intent/tweet?original_referer='+url+'&text='+encodeURIComponent(title+hashtags+' - ')+url,'linkedin':'https://www.linkedin.com/shareArticle?mini=true&url='+url+'&title='+encodeURIComponent(title),'google-plus':'https://plus.google.com/share?url='+url,};if(!_.contains(_.keys(social_network),social)){return;}
var wHeight=500;var wWidth=500;window.open(social_network[social],'','menubar=no, toolbar=no, resizable=yes, scrollbar=yes, height='+wHeight+',width='+wWidth);},_onMouseEnter:function(){var social=this.$target.data('social');this.socialList=social?social.split(','):['facebook','twitter','linkedin','google-plus'];this.hashtags=this.$target.data('hashtags')||'';this._render();this._bindSocialEvent();},});registry.facebookPage=Animation.extend({selector:'.o_facebook_page',start:function(){var def=this._super.apply(this,arguments);var params=_.pick(this.$el.data(),'href','height','tabs','small_header','hide_cover','show_facepile');if(!params.href){return def;}
params.width=utils.confine(Math.floor(this.$el.width()),180,500);var src=$.param.querystring('https://www.facebook.com/plugins/page.php',params);this.$iframe=$('<iframe/>',{src:src,width:params.width,height:params.height,css:{border:'none',overflow:'hidden',},scrolling:'no',frameborder:'0',allowTransparency:'true',});this.$el.append(this.$iframe);return def;},destroy:function(){this._super.apply(this,arguments);if(this.$iframe){this.$iframe.remove();}},});registry._fixAppleCollapse=Animation.extend({selector:'.s_faq_collapse [data-toggle="collapse"]',events:{'click':function(){},},});return{Class:Animation,registry:registry,};});;

/* /website/static/src/js/content/zoomodoo.js defined in bundle 'web.assets_frontend' */
odoo.define('website.content.zoomodoo',function(require){'use strict';var dw,dh,rw,rh,lx,ly;var defaults={linkTag:'a',linkAttribute:'data-zoom-image',event:'click',preventClicks:true,disabledOnMobile:true,beforeShow:$.noop,beforeHide:$.noop,onShow:$.noop,onHide:$.noop,onMove:$.noop};function ZoomOdoo(target,options){this.$target=$(target);this.opts=$.extend({},defaults,options,this.$target.data());if(this.isOpen===undefined){this._init();}}
ZoomOdoo.prototype._init=function(){if(window.outerWidth>467||!this.opts.disabledOnMobile){this.$link=this.$target.find(this.opts.linkTag).length&&this.$target.find(this.opts.linkTag)||this.$target;this.$image=this.$target.find('img').length&&this.$target.find('img')||this.$target;this.$flyout=$('<div class="zoomodoo-flyout" />');var $attach=this.$target;if(this.opts.attach!==undefined&&this.$target.parents(this.opts.attach).length){$attach=this.$target.parents(this.opts.attach);}
$attach.parent().on('mousemove.zoomodoo touchmove.zoomodoo',$.proxy(this._onMove,this));$attach.parent().on('mouseleave.zoomodoo touchend.zoomodoo',$.proxy(this._onLeave,this));this.$target.on(this.opts.event+'.zoomodoo touchstart.zoomodoo',$.proxy(this._onEnter,this));if(this.opts.preventClicks){this.$target.on('click.zoomodoo',function(e){e.preventDefault();});}}};ZoomOdoo.prototype.show=function(e,testMouseOver){var w1,h1,w2,h2;var self=this;if(this.opts.beforeShow.call(this)===false)return;if(!this.isReady){return this._loadImage(this.$link.attr(this.opts.linkAttribute),function(){if(self.isMouseOver||!testMouseOver){self.show(e);}});}
var $attach=this.$target;if(this.opts.attach!==undefined&&this.$target.parents(this.opts.attach).length){$attach=this.$target.parents(this.opts.attach);}
$attach.parent().append(this.$flyout);w1=this.$target.width();h1=this.$target.height();w2=this.$flyout.width();h2=this.$flyout.height();dw=this.$zoom.width()-w2;dh=this.$zoom.height()-h2;if(dw<0)dw=0;if(dh<0)dh=0;rw=dw/w1;rh=dh/h1;this.isOpen=true;this.opts.onShow.call(this);if(e){this._move(e);}};ZoomOdoo.prototype._onEnter=function(e){var touches=e.originalEvent.touches;this.isMouseOver=true;if(!touches||touches.length===1){e.preventDefault();this.show(e,true);}};ZoomOdoo.prototype._onMove=function(e){if(!this.isOpen)return;e.preventDefault();this._move(e);};ZoomOdoo.prototype._onLeave=function(){this.isMouseOver=false;if(this.isOpen){this.hide();}};ZoomOdoo.prototype._onLoad=function(e){if(!e.currentTarget.width)return;this.isReady=true;this.$flyout.html(this.$zoom);if(e.data.call){e.data();}};ZoomOdoo.prototype._loadImage=function(href,callback){var zoom=new Image();this.$zoom=$(zoom).on('load',callback,$.proxy(this._onLoad,this));zoom.style.position='absolute';zoom.src=href;};ZoomOdoo.prototype._move=function(e){if(e.type.indexOf('touch')===0){var touchlist=e.touches||e.originalEvent.touches;lx=touchlist[0].pageX;ly=touchlist[0].pageY;}else{lx=e.pageX||lx;ly=e.pageY||ly;}
var offset=this.$target.offset();var pt=ly-offset.top;var pl=lx-offset.left;var xt=Math.ceil(pt*rh);var xl=Math.ceil(pl*rw);if(xl<0||xt<0||xl>dw||xt>dh){this.hide();}else{var top=xt*-1;var left=xl*-1;this.$zoom.css({top:top,left:left});this.opts.onMove.call(this,top,left);}};ZoomOdoo.prototype.hide=function(){if(!this.isOpen)return;if(this.opts.beforeHide.call(this)===false)return;this.$flyout.detach();this.isOpen=false;this.opts.onHide.call(this);};$.fn.zoomOdoo=function(options){return this.each(function(){var api=$.data(this,'zoomOdoo');if(!api){$.data(this,'zoomOdoo',new ZoomOdoo(this,options));}else if(api.isOpen===undefined){api._init();}});};});;

/* /website/static/src/js/menu/navbar.js defined in bundle 'web.assets_frontend' */
odoo.define('website.navbar',function(require){'use strict';var rootWidget=require('web_editor.root_widget');var concurrency=require('web.concurrency');var Widget=require('web.Widget');var websiteRootData=require('website.WebsiteRoot');var websiteNavbarRegistry=new rootWidget.RootWidgetRegistry();var WebsiteNavbar=rootWidget.RootWidget.extend({events:_.extend({},rootWidget.RootWidget.prototype.events||{},{'click [data-action]':'_onActionMenuClick','mouseover > ul > li.dropdown:not(.show)':'_onMenuHovered','click .o_mobile_menu_toggle':'_onMobileMenuToggleClick',}),custom_events:_.extend({},rootWidget.RootWidget.prototype.custom_events||{},{action_demand:'_onActionDemand',edit_mode:'_onEditMode',ready_to_save:'_onSave',}),init:function(){this._super.apply(this,arguments);this._widgetDefs=[$.Deferred()];},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self._widgetDefs[0].resolve();});},_attachComponent:function(){var def=this._super.apply(this,arguments);this._widgetDefs.push(def);return def;},_getRegistry:function(){return websiteNavbarRegistry;},_handleAction:function(actionName,params,_i){var self=this;return this._whenReadyForActions().then(function(){var defs=[];_.each(self._widgets,function(w){if(!w.handleAction){return;}
var def=w.handleAction(actionName,params);if(def!==null){defs.push(def);}});if(!defs.length){if(_i>50){console.warn(_.str.sprintf("Action '%s' was not able to be handled.",actionName));return $.Deferred().reject();}
return concurrency.delay(100).then(function(){return self._handleAction(actionName,params,(_i||0)+1);});}
return $.when.apply($,defs);});},_whenReadyForActions:function(){return $.when.apply($,this._widgetDefs);},_onActionMenuClick:function(ev){var $button=$(ev.currentTarget);$button.prop('disabled',true);this._handleAction($button.data('action')).always(function(){$button.prop('disabled',false);});},_onActionDemand:function(ev){var def=this._handleAction(ev.data.actionName,ev.data.params);if(ev.data.onSuccess){def.done(ev.data.onSuccess);}
if(ev.data.onFailure){def.fail(ev.data.onFailure);}},_onEditMode:function(){var self=this;this.$el.addClass('editing_mode');_.delay(function(){self.do_hide();},800);},_onMenuHovered:function(ev){var $opened=this.$('> ul > li.dropdown.show');if($opened.length){$opened.find('.dropdown-toggle').dropdown('toggle');$(ev.currentTarget).find('.dropdown-toggle').dropdown('toggle');}},_onMobileMenuToggleClick:function(){this.$el.parent().toggleClass('o_mobile_menu_opened');},_onSave:function(ev){ev.data.defs.push(this._handleAction('on_save'));},});var WebsiteNavbarActionWidget=Widget.extend({actions:{},handleAction:function(actionName,params){var action=this[this.actions[actionName]];if(action){return $.when(action.apply(this,params||[]));}
return null;},});websiteRootData.websiteRootRegistry.add(WebsiteNavbar,'#oe_main_menu_navbar');return{WebsiteNavbar:WebsiteNavbar,websiteNavbarRegistry:websiteNavbarRegistry,WebsiteNavbarActionWidget:WebsiteNavbarActionWidget,};});;

/* /website/static/src/js/html_editor.test.js defined in bundle 'web.assets_frontend' */
odoo.define('website.test.html_editor',function(require){'use strict';var tour=require('web_tour.tour');var base=require('web_editor.base');tour.register('html_editor_multiple_templates',{test:true,url:'/aboutus',wait_for:base.ready(),},[{content:"enter edit mode",trigger:'a[data-action=edit]',},{content:"drop a snippet",trigger:'#oe_snippets .oe_snippet:has(.s_cover) .oe_snippet_thumbnail',run:"drag_and_drop #oe_structure_test_ui",},{content:"save the page",extra_trigger:'#wrapwrap .s_cover',trigger:"#web_editor-top-edit button[data-action=save]",},{content:"open customize menu",extra_trigger:"body:not(.editor_enable)",trigger:'#customize-menu > a',},{content:"open html editor",trigger:'#html_editor',},{content:"add something in the aboutus view",trigger:'div.ace_line .ace_xml:contains("aboutus")',run:function(){ace.edit('ace-view-editor').getSession().insert({row:3,column:1},'<p>somenewcontent</p>\n');},},{content:"select oe_structure specific view",trigger:'div.ace_line .ace_xml:contains("somenewcontent")',run:function(){var viewId=$('#ace-view-list option:contains("oe_structure")').val();$('#ace-view-list').val(viewId).trigger('change');},},{content:"add something in the oe_structure specific view",extra_trigger:'#ace-view-id:contains("website.aboutus_oe_structure_test_ui")',trigger:'div.ace_line .ace_xml:contains("s_cover")',run:function(){ace.edit('ace-view-editor').getSession().insert({row:2,column:1},'<p>anothernewcontent</p>\n');},},{content:"save the html editor",extra_trigger:'div.ace_line .ace_xml:contains("anothernewcontent")',trigger:".o_ace_view_editor button[data-action=save]",},{content:"check that the page has both modification",extra_trigger:'#wrapwrap:contains("anothernewcontent")',trigger:'#wrapwrap:contains("somenewcontent")',run:function(){},},]);tour.register('test_html_editor_scss',{test:true,url:'/aboutus',wait_for:base.ready(),},[{content:"open customize menu",extra_trigger:'#wrap:visible',trigger:'#customize-menu > a',},{content:"open html editor",trigger:'#html_editor',},{content:"open type switcher",trigger:'.o_ace_type_switcher button',},{content:"select scss files",trigger:'.o_ace_type_switcher_choice[data-type="scss"]',},{content:"select 'website.ui.scss'",trigger:'#ace-scss-list',run:function(){var scssId=$('#ace-scss-list option:contains("website.ui")').val();$('#ace-scss-list').val(scssId).trigger('change');},},{content:"add some scss content in the file",trigger:'div.ace_line .ace_variable:contains("body.o_connected_user")',run:function(){ace.edit('ace-view-editor').getSession().insert({row:2,column:0},'#wrap {display: none;}\n');},},{content:"save the html editor",extra_trigger:'div.ace_line:contains("#wrap {display: none;}")',trigger:".o_ace_view_editor button[data-action=save]",},{content:"check that the scss modification got applied",trigger:'body:has(#wrap:hidden)',run:function(){},},{content:"reset view (after reload, html editor should have been reopened where it was)",trigger:'#ace-view-id button[data-action="reset"]',},{content:"confirm reset warning",trigger:'.modal-footer .btn-primary',},{content:"check that the scss file was reset correctly, wrap content should now be visible again",trigger:'#wrap:visible',run:function(){},},]);});;

/* /website_enterprise/static/src/js/website_enterprise.js defined in bundle 'web.assets_frontend' */
odoo.define('website.home_menu',function(require){'use strict';var session=require('web.session');var websiteNavbarData=require('website.navbar');websiteNavbarData.WebsiteNavbar.include({events:_.extend({},websiteNavbarData.WebsiteNavbar.prototype.events||{},{'click .o_menu_toggle':'_onMenuToggleClick',}),_onMenuToggleClick:function(ev){ev.preventDefault();var $button=$(ev.currentTarget);if(!$button.hasClass('fa')){return;}
$button.removeClass('fa fa-th').append($('<span/>',{'class':'fa fa-spin fa-spinner'}));var url='/web#home';window.location.href=session.debug?$.param.querystring(url,{debug:session.debug}):url;},});});;

/* /website_mail/static/src/js/follow.js defined in bundle 'web.assets_frontend' */
odoo.define('website_mail.follow',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.follow=sAnimation.Class.extend({selector:'.js_follow',start:function(){var self=this;this.is_user=false;this._rpc({route:'/website_mail/is_follower',params:{model:this.$target.data('object'),res_id:this.$target.data('id'),},}).always(function(data){self.is_user=data.is_user;self.email=data.email;self.toggle_subscription(data.is_follower,data.email);self.$target.removeClass('d-none');});if(!this.editableMode){$('.js_follow > .input-group-append.d-none').removeClass('d-none');this.$target.find('.js_follow_btn, .js_unfollow_btn').on('click',function(event){event.preventDefault();self._onClick();});}
return this._super.apply(this,arguments);},_onClick:function(){var self=this;var $email=this.$target.find(".js_follow_email");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');var email=$email.length?$email.val():false;if(email||this.is_user){this._rpc({route:'/website_mail/follow',params:{'id':+this.$target.data('id'),'object':this.$target.data('object'),'message_is_follower':this.$target.attr("data-follow")||"off",'email':email,},}).then(function(follow){self.toggle_subscription(follow,email);});}},toggle_subscription:function(follow,email){follow=follow||(!email&&this.$target.attr('data-unsubscribe'));if(follow){this.$target.find(".js_follow_btn").addClass('d-none');this.$target.find(".js_unfollow_btn").removeClass('d-none');}
else{this.$target.find(".js_follow_btn").removeClass('d-none');this.$target.find(".js_unfollow_btn").addClass('d-none');}
this.$target.find('input.js_follow_email').val(email||"").attr("disabled",email&&(follow||this.is_user)?"disabled":false);this.$target.attr("data-follow",follow?'on':'off');},});});;

/* /website_mail/static/src/js/website_mail.js defined in bundle 'web.assets_frontend' */
odoo.define('website_mail.thread',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var qweb=core.qweb;var PortalChatter=require('portal.chatter').PortalChatter;PortalChatter.include({_loadTemplates:function(){return $.when(this._super(),ajax.loadXML('/website_mail/static/src/xml/website_mail.xml',qweb));},});});;

/* /website_form/static/src/js/website_form.js defined in bundle 'web.assets_frontend' */
odoo.define('website_form.animation',function(require){'use strict';var core=require('web.core');var time=require('web.time');var ajax=require('web.ajax');var sAnimation=require('website.content.snippets.animation');var _t=core._t;var qweb=core.qweb;sAnimation.registry.form_builder_send=sAnimation.Class.extend({selector:'.s_website_form',willStart:function(){var def;if(!$.fn.datetimepicker){def=ajax.loadJS("/web/static/lib/tempusdominus/tempusdominus.js");}
return $.when(this._super.apply(this,arguments),def);},start:function(editable_mode){if(editable_mode){this.stop();return;}
var self=this;this.templates_loaded=ajax.loadXML('/website_form/static/src/xml/website_form.xml',qweb);this.$target.find('.o_website_form_send').on('click',function(e){self.send(e);});var l10n=_t.database.parameters;var datepickers_options={minDate:moment({y:1900}),maxDate:moment().add(200,"y"),calendarWeeks:true,icons:{time:'fa fa-clock-o',date:'fa fa-calendar',next:'fa fa-chevron-right',previous:'fa fa-chevron-left',up:'fa fa-chevron-up',down:'fa fa-chevron-down',},locale:moment.locale(),format:time.getLangDatetimeFormat(),};this.$target.find('.o_website_form_datetime').datetimepicker(datepickers_options);datepickers_options.format=time.getLangDateFormat();this.$target.find('.o_website_form_date').datetimepicker(datepickers_options);return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);this.$target.find('button').off('click');},send:function(e){e.preventDefault();this.$target.find('.o_website_form_send').off().addClass('disabled');var self=this;self.$target.find('#o_website_form_result').empty();if(!self.check_error_fields({})){self.update_status('invalid');return false;}
this.form_fields=this.$target.serializeArray();_.each(this.$target.find('input[type=file]'),function(input){$.each($(input).prop('files'),function(index,file){self.form_fields.push({name:input.name+'['+index+']',value:file});});});var form_values={};_.each(this.form_fields,function(input){if(input.name in form_values){if(Array.isArray(form_values[input.name])){form_values[input.name].push(input.value);}else{form_values[input.name]=[form_values[input.name],input.value];}}else{if(input.value!==''){form_values[input.name]=input.value;}}});for(var key in this.$target.data()){if(_.str.startsWith(key,'form_field_')){form_values[key.replace('form_field_','')]=this.$target.data(key);}}
ajax.post(this.$target.attr('action')+(this.$target.data('force_action')||this.$target.data('model_name')),form_values).then(function(result_data){result_data=$.parseJSON(result_data);if(!result_data.id){self.update_status('error');if(result_data.error_fields){self.check_error_fields(result_data.error_fields);}}else{var success_page=self.$target.attr('data-success_page');if(success_page){$(window.location).attr('href',success_page);}
else{self.update_status('success');}
self.$target[0].reset();}}).fail(function(result_data){self.update_status('error');});},check_error_fields:function(error_fields){var self=this;var form_valid=true;this.$target.find('.form-field').each(function(k,field){var $field=$(field);var field_name=$field.find('.col-form-label').attr('for');var inputs=$field.find('.o_website_form_input:not(#editable_select)');var invalid_inputs=inputs.toArray().filter(function(input,k,inputs){if(input.required&&input.type==='checkbox'){var checkboxes=_.filter(inputs,function(input){return input.required&&input.type==='checkbox';});return!_.any(checkboxes,function(checkbox){return checkbox.checked;});}else if($(input).hasClass('o_website_form_date')){if(!self.is_datetime_valid(input.value,'date')){return true;}}else if($(input).hasClass('o_website_form_datetime')){if(!self.is_datetime_valid(input.value,'datetime')){return true;}}
return!input.checkValidity();});$field.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');if(invalid_inputs.length||error_fields[field_name]){$field.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid')
if(_.isString(error_fields[field_name])){$field.popover({content:error_fields[field_name],trigger:'hover',container:'body',placement:'top'});$field.data("bs.popover").options.content=error_fields[field_name];$field.popover('show');}
form_valid=false;}});return form_valid;},is_datetime_valid:function(value,type_of_date){if(value===""){return true;}else{try{this.parse_date(value,type_of_date);return true;}catch(e){return false;}}},parse_date:function(value,type_of_date,value_if_empty){var date_pattern=time.getLangDateFormat(),time_pattern=time.getLangTimeFormat();var date_pattern_wo_zero=date_pattern.replace('MM','M').replace('DD','D'),time_pattern_wo_zero=time_pattern.replace('HH','H').replace('mm','m').replace('ss','s');switch(type_of_date){case'datetime':var datetime=moment(value,[date_pattern+' '+time_pattern,date_pattern_wo_zero+' '+time_pattern_wo_zero],true);if(datetime.isValid())
return time.datetime_to_str(datetime.toDate());throw new Error(_.str.sprintf(_t("'%s' is not a correct datetime"),value));case'date':var date=moment(value,[date_pattern,date_pattern_wo_zero],true);if(date.isValid())
return time.date_to_str(date.toDate());throw new Error(_.str.sprintf(_t("'%s' is not a correct date"),value));}
return value;},update_status:function(status){var self=this;if(status!=='success'){this.$target.find('.o_website_form_send').on('click',function(e){self.send(e);}).removeClass('disabled');}
var $result=this.$('#o_website_form_result');this.templates_loaded.done(function(){$result.replaceWith(qweb.render("website_form.status_"+status));});},});});;

/* /website_links/static/src/js/website_links.js defined in bundle 'web.assets_frontend' */
odoo.define('website_links.website_links',function(require){'use strict';require('web.dom_ready');var ajax=require('web.ajax');var core=require('web.core');var rpc=require('web.rpc');var Widget=require('web.Widget');var base=require('web_editor.base');var weContext=require('web_editor.context');var qweb=core.qweb;var _t=core._t;var exports={};if(!$('.o_website_links_create_tracked_url').length){return $.Deferred().reject("DOM doesn't contain '.o_website_links_create_tracked_url'");}
var SelectBox=Widget.extend({init:function(obj){this.obj=obj;},start:function(element,placeholder){var self=this;this.element=element;this.placeholder=placeholder;this.fetch_objects().then(function(results){self.objects=results;element.select2({placeholder:self.placeholder,allowClear:true,createSearchChoice:function(term){if(self.object_exists(term)){return null;}
return{id:term,text:_.str.sprintf("Create '%s'",term)};},createSearchChoicePosition:'bottom',multiple:false,data:self.objects,});element.on('change',function(e){self.on_change(e);});});},fetch_objects:function(){return rpc.query({model:this.obj,method:'search_read',context:weContext.get(),}).then(function(result){return _.map(result,function(val){return{id:val.id,text:val.name};});});},object_exists:function(query){return _.find(this.objects,function(val){return val.text.toLowerCase()===query.toLowerCase();})!==undefined;},on_change:function(e){if(e.added&&_.isString(e.added.id)){this.create_object(e.added.id);}},create_object:function(name){var self=this;return rpc.query({model:this.obj,method:'create',args:[{name:name}],context:weContext.get(),}).then(function(record){self.element.attr('value',record);self.objects.push({'id':record,'text':name});});},});var RecentLinkBox=Widget.extend({template:'website_links.RecentLink',events:{'click .btn_shorten_url_clipboard':'toggle_copy_button','click .o_website_links_edit_code':'edit_code','click .o_website_links_ok_edit':function(e){e.preventDefault();this.submit_code();},'click .o_website_links_cancel_edit':function(e){e.preventDefault();this.cancel_edit();},'submit #o_website_links_edit_code_form':function(e){e.preventDefault();this.submit_code();},},init:function(parent,link_obj){this._super(parent);this.link_obj=link_obj;this.animating_copy=false;},start:function(){new ClipboardJS(this.$('.btn_shorten_url_clipboard').get(0));return this._super.apply(this,arguments);},toggle_copy_button:function(){var self=this;if(!this.animating_copy){this.animating_copy=true;var top=this.$('.o_website_links_short_url').position().top;this.$('.o_website_links_short_url').clone().css('position','absolute').css('left',15).css('top',top-2).css('z-index',2).removeClass('o_website_links_short_url').addClass('animated-link').insertAfter(this.$('.o_website_links_short_url')).animate({opacity:0,top:"-=20",},500,function(){self.$('.animated-link').remove();self.animating_copy=false;});}},remove:function(){this.getParent().remove_link(this);},notification:function(message){this.$('.notification').append('<strong>'+message+'</strong>');},edit_code:function(){var init_code=this.$('#o_website_links_code').html();this.$('#o_website_links_code').html("<form style='display:inline;' id='o_website_links_edit_code_form'><input type='hidden' id='init_code' value='"+init_code+"'/><input type='text' id='new_code' value='"+init_code+"'/></form>");this.$('.o_website_links_edit_code').hide();this.$('.copy-to-clipboard').hide();this.$('.o_website_links_edit_tools').show();},cancel_edit:function(){this.$('.o_website_links_edit_code').show();this.$('.copy-to-clipboard').show();this.$('.o_website_links_edit_tools').hide();this.$('.o_website_links_code_error').hide();var old_code=this.$('#o_website_links_edit_code_form #init_code').val();this.$('#o_website_links_code').html(old_code);this.$('#code-error').remove();this.$('#o_website_links_code form').remove();},submit_code:function(){var self=this;var init_code=this.$('#o_website_links_edit_code_form #init_code').val();var new_code=this.$('#o_website_links_edit_code_form #new_code').val();if(new_code===''){self.$('.o_website_links_code_error').html("The code cannot be left empty");self.$('.o_website_links_code_error').show();return;}
function show_new_code(new_code){self.$('.o_website_links_code_error').html('');self.$('.o_website_links_code_error').hide();self.$('#o_website_links_code form').remove();var host=self.$('#o_website_links_host').html();self.$('#o_website_links_code').html(new_code);self.$('.btn_shorten_url_clipboard').attr('data-clipboard-text',host+new_code);self.$('.o_website_links_edit_code').show();self.$('.copy-to-clipboard').show();self.$('.o_website_links_edit_tools').hide();}
if(init_code===new_code){show_new_code(new_code);}
else{ajax.jsonRpc('/website_links/add_code','call',{'init_code':init_code,'new_code':new_code}).then(function(result){show_new_code(result[0].code);}).fail(function(){self.$('.o_website_links_code_error').show();self.$('.o_website_links_code_error').html("This code is already taken");});}},});var RecentLinks=Widget.extend({init:function(){this._super();},get_recent_links:function(filter){var self=this;ajax.jsonRpc('/website_links/recent_links','call',{'filter':filter,'limit':20}).then(function(result){_.each(result.reverse(),function(link){self.add_link(link);});self.update_notification();}).fail(function(){var message=_t("Unable to get recent links");self.$el.append("<div class='alert alert-danger'>"+message+"</div>");});},add_link:function(link){var nb_links=this.getChildren().length;var recent_link_box=new RecentLinkBox(this,link);recent_link_box.prependTo(this.$el);$('.link-tooltip').tooltip();if(nb_links===0){this.update_notification();}},remove_links:function(){_.invoke(this.getChildren(),'remove');},remove_link:function(link){link.destroy();},update_notification:function(){if(this.getChildren().length===0){var message=_t("You don't have any recent links.");$('.o_website_links_recent_links_notification').html("<div class='alert alert-info'>"+message+"</div>");}
else{$('.o_website_links_recent_links_notification').empty();}},});ajax.loadXML('/website_links/static/src/xml/recent_link.xml',qweb);base.ready().done(function(){var campaign_select=new SelectBox('utm.campaign');campaign_select.start($("#campaign-select"),_t('e.g. Promotion of June, Winter Newsletter, ..'));var medium_select=new SelectBox('utm.medium');medium_select.start($("#channel-select"),_t('e.g. Newsletter, Social Network, ..'));var source_select=new SelectBox('utm.source');source_select.start($("#source-select"),_t('e.g. Search Engine, Website page, ..'));var recent_links=new RecentLinks();recent_links.appendTo($("#o_website_links_recent_links"));recent_links.get_recent_links('newest');$('#filter-newest-links').click(function(){recent_links.remove_links();recent_links.get_recent_links('newest');});$('#filter-most-clicked-links').click(function(){recent_links.remove_links();recent_links.get_recent_links('most-clicked');});$('#filter-recently-used-links').click(function(){recent_links.remove_links();recent_links.get_recent_links('recently-used');});new ClipboardJS($("#btn_shorten_url").get(0));$("#generated_tracked_link a").click(function(){$("#generated_tracked_link a").text("Copied").removeClass("btn-primary").addClass("btn-success");setTimeout(function(){$("#generated_tracked_link a").text("Copy").removeClass("btn-success").addClass("btn-primary");},'5000');});$('#url').on('keyup',function(e){if($('#btn_shorten_url').hasClass('btn-copy')&&e.which!==13){$('#btn_shorten_url').removeClass('btn-success btn-copy').addClass('btn-primary').html('Get tracked link');$('#generated_tracked_link').css('display','none');$('.o_website_links_utm_forms').show();}});var url_copy_animating=false;$('#btn_shorten_url').click(function(){if($('#btn_shorten_url').hasClass('btn-copy')){if(!url_copy_animating){url_copy_animating=true;$('#generated_tracked_link').clone().css('position','absolute').css('left','78px').css('bottom','8px').css('z-index',2).removeClass('#generated_tracked_link').addClass('url-animated-link').appendTo($('#generated_tracked_link')).animate({opacity:0,bottom:"+=20",},500,function(){$('.url-animated-link').remove();url_copy_animating=false;});}}});$("#o_website_links_link_tracker_form").submit(function(event){if($('#btn_shorten_url').hasClass('btn-copy')){event.preventDefault();return;}
event.preventDefault();event.stopPropagation();var campaign_id=$('#campaign-select').attr('value');var medium_id=$('#channel-select').attr('value');var source_id=$('#source-select').attr('value');var params={};params.url=$("#url").val();if(campaign_id!==''){params.campaign_id=parseInt(campaign_id);}
if(medium_id!==''){params.medium_id=parseInt(medium_id);}
if(source_id!==''){params.source_id=parseInt(source_id);}
$('#btn_shorten_url').text(_t('Generating link...'));ajax.jsonRpc("/website_links/new",'call',params).then(function(result){if('error'in result){if(result.error==='empty_url'){$('.notification').html("<div class='alert alert-danger'>The URL is empty.</div>");}
else if(result.error==='url_not_found'){$('.notification').html("<div class='alert alert-danger'>URL not found (404)</div>");}
else{$('.notification').html("<div class='alert alert-danger'>An error occur while trying to generate your link. Try again later.</div>");}}
else{var link=result[0];$('#btn_shorten_url').removeClass('btn-primary').addClass('btn-success btn-copy').html('Copy');$('#btn_shorten_url').attr('data-clipboard-text',link.short_url);$('.notification').html('');$('#generated_tracked_link').html(link.short_url);$('#generated_tracked_link').css('display','inline');recent_links.add_link(link);$('#campaign-select').select2('val','');$('#channel-select').select2('val','');$('#source-select').select2('val','');$('.o_website_links_utm_forms').hide();}});});$(function(){$('[data-toggle="tooltip"]').tooltip();});});exports.SelectBox=SelectBox;exports.RecentLinkBox=RecentLinkBox;exports.RecentLinks=RecentLinks;return exports;});;

/* /website_links/static/src/js/website_links_code_editor.js defined in bundle 'web.assets_frontend' */
odoo.define('website_links.code_editor',function(require){'use strict';require('web.dom_ready');var ajax=require('web.ajax');if(!$('.o_website_links_edit_code').length){return $.Deferred().reject("DOM doesn't contain '.o_website_links_edit_code'");}
$('.o_website_links_edit_code').on('click',function(e){e.preventDefault();var init_code=$('#o_website_links_code').html();$('#o_website_links_code').html("<form style='display:inline;' id='edit-code-form'><input type='hidden' id='init_code' value='"+init_code+"'/><input type='text' id='new_code' value='"+init_code+"'/></form>");$('.o_website_links_edit_code').hide();$('.copy-to-clipboard').hide();$('.o_website_links_edit_tools').show();$('.o_website_links_cancel_edit').on('click',function(e){e.preventDefault();$('.o_website_links_edit_code').show();$('.copy-to-clipboard').show();$('.o_website_links_edit_tools').hide();$('.o_website_links_code_error').hide();var old_code=$('#edit-code-form #init_code').val();$('#o_website_links_code').html(old_code);$('#code-error').remove();$('#o_website_links_code form').remove();});function submit_code(){var init_code=$('#edit-code-form #init_code').val();var new_code=$('#edit-code-form #new_code').val();if(new_code===''){self.$('.o_website_links_code_error').html("The code cannot be left empty");self.$('.o_website_links_code_error').show();return;}
function show_new_code(new_code){$('.o_website_links_code_error').html('');$('.o_website_links_code_error').hide();$('#o_website_links_code form').remove();var host=$('#short-url-host').html();$('#o_website_links_code').html(new_code);$('.copy-to-clipboard').attr('data-clipboard-text',host+new_code);$('.o_website_links_edit_code').show();$('.copy-to-clipboard').show();$('.o_website_links_edit_tools').hide();}
if(init_code===new_code){show_new_code(new_code);}
else{ajax.jsonRpc('/website_links/add_code','call',{'init_code':init_code,'new_code':new_code}).then(function(result){show_new_code(result[0].code);}).fail(function(){$('.o_website_links_code_error').show();$('.o_website_links_code_error').html("This code is already taken");});}}
$('#edit-code-form').submit(function(e){e.preventDefault();submit_code();});$('.o_website_links_ok_edit').click(function(e){e.preventDefault();submit_code();});});});;

/* /website_links/static/src/js/website_links_charts.js defined in bundle 'web.assets_frontend' */
odoo.define('website_links.charts',function(require){'use strict';require('web.dom_ready');var rpc=require('web.rpc');var Widget=require('web.Widget');var base=require('web_editor.base');var weContext=require('web_editor.context');var core=require('web.core');var _t=core._t;var exports={};if(!$('.o_website_links_chart').length){return $.Deferred().reject("DOM doesn't contain '.o_website_links_chart'");}
var BarChart=Widget.extend({init:function($element,begin_date,end_date,dates){this.$element=$element;this.begin_date=begin_date;this.end_date=end_date;this.number_of_days=this.end_date.diff(this.begin_date,'days')+2;this.dates=dates;},start:function(){var self=this;function getDate(d){return new Date(d[0]);}
function getNbClicks(d){return d[1];}
function getPrunedTickValues(ticks,nb_desired_ticks){var nb_values=ticks.length;var keep_one_of=Math.max(1,Math.floor(nb_values/nb_desired_ticks));return _.filter(ticks,function(d,i){return i%keep_one_of===0;});}
var clicks_array=[];var begin_date_copy=this.begin_date;for(var i=0;i<this.number_of_days;i++){var date_key=begin_date_copy.format('YYYY-MM-DD');clicks_array.push([date_key,(date_key in this.dates)?this.dates[date_key]:0]);begin_date_copy.add(1,'days');}
var nb_clicks=_.reduce(clicks_array,function(total,val){return total+val[1];},0);$(this.$element+' .title').html(nb_clicks+_t(' clicks'));var chart_data=[{}];chart_data[0]['key']=_t('# of clicks');chart_data[0]['values']=clicks_array;nv.addGraph(function(){var chart=nv.models.lineChart().x(function(d){return getDate(d);}).y(function(d){return getNbClicks(d);}).margin({top:10,right:60,bottom:60,left:60}).showYAxis(true).showXAxis(true);var tick_values=getPrunedTickValues(chart_data[0]['values'],10);chart.xAxis.tickFormat(function(d){return d3.time.format("%d/%m/%y")(new Date(d));}).tickValues(_.map(tick_values,function(d){return getDate(d).getTime();})).rotateLabels(55);chart.yAxis.tickFormat(d3.format("d")).ticks(Math.min(chart_data[0]['values'].length-1,10));d3.select(self.$element+' svg').datum(chart_data).call(chart);return self.chart=chart;});},});var PieChart=Widget.extend({init:function($element,data){this.data=data;this.$element=$element;},start:function(){var self=this;var processed_data=[];for(var i=0;i<this.data.length;i++){var country_name=this.data[i]['country_id']?this.data[i]['country_id'][1]:_t('Undefined');processed_data.push({'label':country_name+' ('+this.data[i]['country_id_count']+')','value':this.data[i]['country_id_count']});}
$(this.$element+' .title').html(this.data.length+_t(' countries'));nv.addGraph(function(){var chart=nv.models.pieChart().x(function(d){return d.label;}).y(function(d){return d.value;}).showLabels(false);d3.select(self.$element+' svg').datum(processed_data).transition().duration(1200).call(chart);return self.chart=chart;});},});base.ready().done(function(){var charts={};$(".graph-tabs li a").click(function(e){e.preventDefault();$(this).tab('show');_.chain(charts).pluck('chart').invoke('update');});var link_id=$('#link_id').val();var links_domain=['link_id','=',parseInt(link_id)];var total_clicks=function(){return rpc.query({model:'link.tracker.click',method:'search_count',args:[[links_domain]],context:weContext.get(),});};var clicks_by_day=function(){return rpc.query({model:'link.tracker.click',method:'read_group',args:[[links_domain],['create_date']],kwargs:{groupby:'create_date:day'},context:weContext.get(),});};var clicks_by_country=function(){return rpc.query({model:'link.tracker.click',method:'read_group',args:[[links_domain],['country_id']],kwargs:{groupby:'country_id'},context:weContext.get(),});};var last_week_clicks_by_country=function(){var interval=moment().subtract(7,'days').format("YYYY-MM-DD");return rpc.query({model:'link.tracker.click',method:'read_group',args:[[links_domain,['create_date','>',interval]],['country_id']],kwargs:{groupby:'country_id'},context:weContext.get(),});};var last_month_clicks_by_country=function(){var interval=moment().subtract(30,'days').format("YYYY-MM-DD");return rpc.query({model:'link.tracker.click',method:'read_group',args:[[links_domain,['create_date','>',interval]],['country_id']],kwargs:{groupby:'country_id'},context:weContext.get(),});};$.when(total_clicks(),clicks_by_day(),clicks_by_country(),last_week_clicks_by_country(),last_month_clicks_by_country()).done(function(total_clicks,clicks_by_day,clicks_by_country,last_week_clicks_by_country,last_month_clicks_by_country){if(total_clicks){var formatted_clicks_by_day={};var begin_date,end_date;for(var i=0;i<clicks_by_day.length;i++){var date=moment(clicks_by_day[i]['create_date:day'],"DD MMMM YYYY");if(i===0){begin_date=date;}
if(i===clicks_by_day.length-1){end_date=date;}
formatted_clicks_by_day[date.format("YYYY-MM-DD")]=clicks_by_day[i]['create_date_count'];}
var now=moment();charts.all_time_bar=new BarChart('#all_time_clicks_chart',begin_date,now,formatted_clicks_by_day);begin_date=moment().subtract(30,'days');charts.last_month_bar=new BarChart('#last_month_clicks_chart',begin_date,now,formatted_clicks_by_day);begin_date=moment().subtract(7,'days');charts.last_week_bar=new BarChart('#last_week_clicks_chart',begin_date,now,formatted_clicks_by_day);charts.all_time_pie=new PieChart('#all_time_countries_charts',clicks_by_country);charts.last_month_pie=new PieChart('#last_month_countries_charts',last_month_clicks_by_country);charts.last_week_pie=new PieChart('#last_week_countries_charts',last_week_clicks_by_country);var row_width=$('#all_time_countries_charts').parent().width();var charts_svg=$('#all_time_countries_charts,last_month_countries_charts,last_week_countries_charts').find('svg');charts_svg.css('height',Math.max(clicks_by_country.length*(row_width>750?1:2),20)+'em');_.invoke(charts,'start');nv.utils.windowResize(function(){_.chain(charts).pluck('chart').invoke('update');});}
else{$('#all_time_charts').prepend(_t('There is no data to show'));$('#last_month_charts').prepend(_t('There is no data to show'));$('#last_week_charts').prepend(_t('There is no data to show'));}});new ClipboardJS($('.copy-to-clipboard')[0]);var animating_copy=false;$('.copy-to-clipboard').on('click',function(e){e.preventDefault();if(!animating_copy){animating_copy=true;$('.o_website_links_short_url').clone().css('position','absolute').css('left','15px').css('bottom','10px').css('z-index',2).removeClass('.o_website_links_short_url').addClass('animated-link').appendTo($('.o_website_links_short_url')).animate({opacity:0,bottom:"+=20",},500,function(){$('.animated-link').remove();animating_copy=false;});}});});exports.BarChart=BarChart;exports.PieChart=PieChart;return exports;});;

/* /website_mass_mailing/static/src/js/website_mass_mailing.js defined in bundle 'web.assets_frontend' */
odoo.define('mass_mailing.website_integration',function(require){"use strict";var utils=require('web.utils');var sAnimation=require('website.content.snippets.animation');sAnimation.registry.subscribe=sAnimation.Class.extend({selector:".js_subscribe",start:function(){var self=this;self.$target.find("input").removeClass('d-none');this._rpc({route:'/website_mass_mailing/is_subscriber',params:{list_id:this.$target.data('list-id'),},}).always(function(data){self.$target.find('input.js_subscribe_email').val(data.email?data.email:"").attr("disabled",data.is_subscriber&&data.email.length?"disabled":false);self.$target.attr("data-subscribe",data.is_subscriber?'on':'off');self.$target.find('a.js_subscribe_btn').attr("disabled",data.is_subscriber&&data.email.length?"disabled":false);self.$target.removeClass('d-none');self.$target.find('.js_subscribe_btn').toggleClass('d-none',!!data.is_subscriber);self.$target.find('.js_subscribed_btn').toggleClass('d-none',!data.is_subscriber);});if(!this.editableMode){$('.js_subscribe > .alert').addClass('d-none');$('.js_subscribe > .input-group-append.d-none').removeClass('d-none');this.$target.find('.js_subscribe_btn').on('click',function(event){event.preventDefault();self._onClick();});}},_onClick:function(){var self=this;var $email=this.$target.find(".js_subscribe_email:visible");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');this._rpc({route:'/website_mass_mailing/subscribe',params:{'list_id':this.$target.data('list-id'),'email':$email.length?$email.val():false,},}).then(function(subscribe){self.$target.find(".js_subscribe_email, .input-group-append").addClass('d-none');self.$target.find(".alert").removeClass('d-none');self.$target.find('input.js_subscribe_email').attr("disabled",subscribe?"disabled":false);self.$target.attr("data-subscribe",subscribe?'on':'off');});},});sAnimation.registry.newsletter_popup=sAnimation.Class.extend({selector:".o_newsletter_popup",start:function(){var self=this;var $modal=this.$('.modal');if($modal.is('.modal-dialog')){$modal.removeClass('modal-md modal-dialog');var $modalContent=$modal.find('.modal-content');$modalContent.wrapAll($('<div/>',{class:'modal-dialog'}));}
var popupcontent=self.$target.find(".o_popup_content_dev").empty();if(!self.$target.data('list-id')){return;}
this._rpc({route:'/website_mass_mailing/get_content',params:{newsletter_id:self.$target.data('list-id'),},}).then(function(data){if(data.content){$('<div></div>').append(data.content).appendTo(popupcontent);}
self.$target.find('input.popup_subscribe_email').val(data.email||"");self.redirect_url=data.redirect_url;if(!self.editableMode&&!data.is_subscriber){$(document).on('mouseleave',_.bind(self.show_banner,self));self.$target.find('.popup_subscribe_btn').on('click',function(event){event.preventDefault();self._onClickSubscribe();});}else{$(document).off('mouseleave');}});},_onClickSubscribe:function(){var self=this;var $email=self.$target.find(".popup_subscribe_email:visible");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');this._rpc({route:'/website_mass_mailing/subscribe',params:{'list_id':self.$target.data('list-id'),'email':$email.length?$email.val():false,},}).then(function(subscribe){self.$target.find('#o_newsletter_popup').modal('hide');$(document).off('mouseleave');if(self.redirect_url){if(_.contains(self.redirect_url.split('/'),window.location.host)||self.redirect_url.indexOf('/')===0){window.location.href=self.redirect_url;}else{window.open(self.redirect_url,'_blank');}}});},show_banner:function(){var self=this;if(!utils.get_cookie("newsletter-popup-"+self.$target.data('list-id'))&&self.$target){$('#o_newsletter_popup:first').modal('show').css({'margin-top':'70px','position':'fixed'});document.cookie="newsletter-popup-"+self.$target.data('list-id')+"="+true+";path=/";}}});});;

/* /website_rating/static/src/js/website_mail.js defined in bundle 'web.assets_frontend' */
odoo.define('website_rating.thread',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Widget=require('web.Widget');var qweb=core.qweb;var _t=core._t;var PortalChatter=require('portal.chatter').PortalChatter;PortalChatter.include({events:_.extend({},PortalChatter.prototype.events,{"mousemove .stars i":"_onMoveStar","mouseleave .stars i":"_onMoveOutStar","click .stars":"_onClickStar","mouseleave .stars":"_onMouseleaveStar","click .o_website_rating_select":"_onClickStarDomain","click .o_website_rating_select_text":"_onClickStarDomainReset",}),init:function(parent,options){this._super.apply(this,arguments);if(!_.contains(this.options,'display_rating')){this.options=_.defaults(this.options,{'display_rating':false,'rating_default_value':0.0,});}
this.set('rating_card_values',{});this.set('rating_value',false);this.on("change:rating_value",this,this._onChangeRatingDomain);this.labels={'0':"",'1':_t("I hate it"),'2':_t("I don't like it"),'3':_t("It's okay"),'4':_t("I like it"),'5':_t("I love it"),};this.user_click=false;this.set("star_value",this.options.rating_default_value);this.on("change:star_value",this,this._onChangeStarValue);},willStart:function(){var self=this;return this._super.apply(this,arguments).then(function(result){if(result['rating_stats']){var rating_data={'avg':self.round_to_half(result['rating_stats']['avg']),'percent':[],};_.each(_.keys(result['rating_stats']['percent']),function(rating){if(0<rating&&rating<=5){rating_data['percent'].push({'num':rating,'percent':result['rating_stats']['percent'][rating],});}});self.set('rating_card_values',rating_data);}});},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.$input=self.$('input[name="rating_value"]');self.$star_list=self.$('.stars').find('i');self.set("star_value",self.options.rating_default_value);});},preprocessMessages:function(messages){var self=this;var messages=this._super.apply(this,arguments);if(this.options['display_rating']){_.each(messages,function(m){m['rating_value']=self.round_to_half(m['rating_value']);});}
return messages;},round_to_half:function(value){var converted=parseFloat(value);var decimal=(converted-parseInt(converted,10));decimal=Math.round(decimal*10);if(decimal===5){return(parseInt(converted,10)+0.5);}
if((decimal<3)||(decimal>7)){return Math.round(converted);}else{return(parseInt(converted,10)+0.5);}},_loadTemplates:function(){return $.when(this._super(),ajax.loadXML('/website_rating/static/src/xml/website_mail.xml',qweb));},_messageFetchPrepareParams:function(){var params=this._super.apply(this,arguments);if(this.options['display_rating']){params['rating_include']=true;}
return params;},_onClickStar:function(e){this.user_click=true;this.$input.val(this.get("star_value"));},_onClickStarDomain:function(e){var $tr=this.$(e.currentTarget);var num=$tr.data('star');if($tr.css('opacity')==1){this.set('rating_value',num);this.$('.o_website_rating_select').css({'opacity':0.5,});this.$('.o_website_rating_select_text[data-star="'+num+'"]').css({'visibility':'visible','opacity':1,});this.$('.o_website_rating_select[data-star="'+num+'"]').css({'opacity':1,});}},_onClickStarDomainReset:function(e){e.stopPropagation();this.set('rating_value',false);this.$('.o_website_rating_select_text').css('visibility','hidden');this.$('.o_website_rating_select').css({'opacity':1,});},_onChangeRatingDomain:function(){var domain=[];if(this.get('rating_value')){domain=[['rating_value','=',this.get('rating_value')]];}
this._changeCurrentPage(1,domain);},_onChangeStarValue:function(){var val=this.get("star_value");var index=Math.floor(val);var decimal=val-index;this.$star_list.removeClass('fa-star fa-star-half-o').addClass('fa-star-o');this.$('.stars').find("i:lt("+index+")").removeClass('fa-star-o fa-star-half-o').addClass('fa-star');if(decimal){this.$('.stars').find("i:eq("+(index)+")").removeClass('fa-star-o fa-star fa-star-half-o').addClass('fa-star-half-o');}
this.$('.rate_text .label').text(this.labels[index]);},_onMouseleaveStar:function(e){this.$('.rate_text').hide();},_onMoveStar:function(e){var index=this.$('.stars i').index(e.currentTarget);this.$('.rate_text').show();this.set("star_value",index+1);},_onMoveOutStar:function(){if(!this.user_click){this.set("star_value",parseInt(this.$input.val()));}
this.user_click=false;},});});;

/* /sale/static/src/js/product_configurator_mixin.js defined in bundle 'web.assets_frontend' */
odoo.define('sale.ProductConfiguratorMixin',function(require){'use strict';var concurrency=require('web.concurrency');var core=require('web.core');var utils=require('web.utils');var ajax=require('web.ajax');var _t=core._t;var ProductConfiguratorMixin={events:{'change .css_attribute_color input':'_onChangeColorAttribute','change .main_product:not(.in_cart) input.js_quantity':'onChangeAddQuantity','change [data-attribute_exclusions]':'onChangeVariant'},isSelectedVariantAllowed:true,computePriceTotal:function(){},onChangeVariant:function(ev){var $parent=$(ev.target).closest('.js_product');if(!$parent.data('uniqueId')){$parent.data('uniqueId',_.uniqueId());}
this._throttledGetCombinationInfo($parent.data('uniqueId'))(ev);},_getCombinationInfo:function(ev){var self=this;var $component;if($(ev.currentTarget).closest('form').length>0){$component=$(ev.currentTarget).closest('form');}else if($(ev.currentTarget).closest('.oe_optional_products_modal').length>0){$component=$(ev.currentTarget).closest('.oe_optional_products_modal');}else if($(ev.currentTarget).closest('.o_product_configurator').length>0){$component=$(ev.currentTarget).closest('.o_product_configurator');}else{$component=$(ev.currentTarget);}
var qty=$component.find('input[name="add_qty"]').val();var $parent=$(ev.target).closest('.js_product');var combination=this.getSelectedVariantValues($parent);var parentCombination=$parent.find('ul[data-attribute_exclusions]').data('attribute_exclusions').parent_combination;var productTemplateId=parseInt($parent.find('.product_template_id').val());self._checkExclusions($parent,combination);return ajax.jsonRpc(this._getUri('/product_configurator/get_combination_info'),'call',{'product_template_id':productTemplateId,'product_id':this._getProductId($parent),'combination':combination,'add_qty':parseInt(qty),'pricelist_id':this.pricelistId||false,'parent_combination':parentCombination,}).then(function(combinationData){self._onChangeCombination(ev,$parent,combinationData);});},handleCustomValues:function($target){var $variantContainer;var $customInput=false;if($target.is('input[type=radio]')&&$target.is(':checked')){$variantContainer=$target.closest('ul').closest('li');$customInput=$target;}else if($target.is('select')){$variantContainer=$target.closest('li');$customInput=$target.find('option[value="'+$target.val()+'"]');}
if($variantContainer){if($customInput&&$customInput.data('is_custom')){var attributeValueId=$customInput.data('value_id');var attributeValueName=$customInput.data('value_name');if($variantContainer.find('.variant_custom_value').length===0||$variantContainer.find('.variant_custom_value').data('attribute_value_id')!==parseInt(attributeValueId)){$variantContainer.find('.variant_custom_value_label').remove();$variantContainer.find('.variant_custom_value').remove();var $input=$('<input>',{type:'text','data-attribute_value_id':attributeValueId,'data-attribute_value_name':attributeValueName,class:'variant_custom_value form-control'});var isRadioInput=$target.is('input[type=radio]')&&$target.closest('label.css_attribute_color').length===0;if(isRadioInput){$input.addClass('custom_value_radio');$target.closest('div').after($input);}else{var $label=$('<label>',{html:attributeValueName+': ',class:'variant_custom_value_label'});$variantContainer.append($label).append($input);}}}else{$variantContainer.find('.variant_custom_value_label').remove();$variantContainer.find('.variant_custom_value').remove();}}},onClickAddCartJSON:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);var $input=$link.closest('.input-group').find("input");var min=parseFloat($input.data("min")||0);var max=parseFloat($input.data("max")||Infinity);var previousQty=parseFloat($input.val()||0,10);var quantity=($link.has(".fa-minus").length?-1:1)+previousQty;var newQty=quantity>min?(quantity<max?quantity:max):min;if(newQty!==previousQty){$input.val(newQty).trigger('change');}
return false;},onChangeAddQuantity:function(ev){var $parent;if($(ev.currentTarget).closest('.oe_optional_products_modal').length>0){$parent=$(ev.currentTarget).closest('.oe_optional_products_modal');}else if($(ev.currentTarget).closest('form').length>0){$parent=$(ev.currentTarget).closest('form');}else{$parent=$(ev.currentTarget).closest('.o_product_configurator');}
this.triggerVariantChange($parent);},triggerVariantChange:function($container){var self=this;$container.find('ul[data-attribute_exclusions]').trigger('change',{$container:$container});$container.find('input.js_variant_change:checked, select.js_variant_change').each(function(){self.handleCustomValues($(this));});},getCustomVariantValues:function($container){var variantCustomValues=[];$container.find('.variant_custom_value').each(function(){var $variantCustomValueInput=$(this);if($variantCustomValueInput.length!==0){variantCustomValues.push({'attribute_value_id':$variantCustomValueInput.data('attribute_value_id'),'attribute_value_name':$variantCustomValueInput.data('attribute_value_name'),'custom_value':$variantCustomValueInput.val(),});}});return variantCustomValues;},getNoVariantAttributeValues:function($container){var noVariantAttributeValues=[];var variantsValuesSelectors=['input.no_variant.js_variant_change:checked','select.no_variant.js_variant_change'];$container.find(variantsValuesSelectors.join(',')).each(function(){var $variantValueInput=$(this);if($variantValueInput.is('select')){$variantValueInput=$variantValueInput.find('option[value='+$variantValueInput.val()+']');}
if($variantValueInput.length!==0){noVariantAttributeValues.push({'attribute_value_id':$variantValueInput.data('value_id'),'attribute_value_name':$variantValueInput.data('value_name'),'value':$variantValueInput.val(),'attribute_name':$variantValueInput.data('attribute_name'),'is_custom':$variantValueInput.data('is_custom')});}});return noVariantAttributeValues;},getSelectedVariantValues:function($container){var values=[];var unchangedValues=$container.find('div.oe_unchanged_value_ids').data('unchanged_value_ids')||[];var variantsValuesSelectors=['input.js_variant_change:checked','select.js_variant_change'];_.each($container.find(variantsValuesSelectors.join(', ')),function(el){values.push(+$(el).val());});return values.concat(unchangedValues);},selectOrCreateProduct:function($container,productId,productTemplateId,useAjax){var self=this;productId=parseInt(productId);productTemplateId=parseInt(productTemplateId);var productReady=$.Deferred();if(productId){productReady.resolve(productId);}else{var params={product_template_id:productTemplateId,product_template_attribute_value_ids:JSON.stringify(self.getSelectedVariantValues($container)),};var route='/product_configurator/create_product_variant';if(useAjax){productReady=ajax.jsonRpc(route,'call',params);}else{productReady=this._rpc({route:route,params:params});}}
return productReady;},_checkExclusions:function($parent,combination){var self=this;var combinationData=$parent.find('ul[data-attribute_exclusions]').data('attribute_exclusions');$parent.find('option, input, label').removeClass('css_not_available');if(combinationData.exclusions){_.each(combination,function(current_ptav){if(combinationData.exclusions.hasOwnProperty(current_ptav)){_.each(combinationData.exclusions[current_ptav],function(excluded_ptav){self._disableInput($parent,excluded_ptav);});}});}
_.each(combinationData.parent_exclusions,function(ptav){self._disableInput($parent,ptav);});},_getProductId:function($parent){return parseInt($parent.find('.product_id').val());},_disableInput:function($parent,attributeValueId){var $input=$parent.find('option[value='+attributeValueId+'], input[value='+attributeValueId+']');$input.addClass('css_not_available');$input.closest('label').addClass('css_not_available');},_onChangeCombination:function(ev,$parent,combination){var self=this;var $price=$parent.find(".oe_price:first .oe_currency_value");var $default_price=$parent.find(".oe_default_price:first .oe_currency_value");var $optional_price=$parent.find(".oe_optional:first .oe_currency_value");var isCombinationPossible=this.isSelectedVariantAllowed;if(combination.is_combination_possible!==undefined){isCombinationPossible=combination.is_combination_possible;}
this._toggleDisable($parent,isCombinationPossible);$price.html(self._priceToStr(combination.price));$default_price.html(self._priceToStr(combination.list_price));var compatibility_check=combination.list_price-combination.price>=0.01;if(combination.has_discounted_price!==undefined?combination.has_discounted_price:compatibility_check){$default_price.closest('.oe_website_sale').addClass("discount");$optional_price.closest('.oe_optional').removeClass('d-none').css('text-decoration','line-through');$default_price.parent().removeClass('d-none');}else{$default_price.closest('.oe_website_sale').removeClass("discount");$optional_price.closest('.oe_optional').addClass('d-none');$default_price.parent().addClass('d-none');}
var rootComponentSelectors=['tr.js_product','.oe_website_sale','.o_product_configurator'];if(combination.product_id!==this.last_product_id){this.last_product_id=combination.product_id;self._updateProductImage($parent.closest(rootComponentSelectors.join(', ')),combination.product_id,combination.product_template_id,combination.carousel,isCombinationPossible);}
$parent.find('.product_id').first().val(combination.product_id||0).trigger('change');$parent.find('.product_display_name').first().val(combination.display_name);$parent.find('.js_raw_price').first().html(combination.price);this.handleCustomValues($(ev.target));},_priceToStr:function(price){var l10n=_t.database.parameters;var precision=2;if($('.decimal_precision').length){precision=parseInt($('.decimal_precision').last().data('precision'));}
var formatted=_.str.sprintf('%.'+precision+'f',price).split('.');formatted[0]=utils.insert_thousand_seps(formatted[0]);return formatted.join(l10n.decimal_point);},_throttledGetCombinationInfo:_.memoize(function(uniqueId){var dropMisordered=new concurrency.DropMisordered();var _getCombinationInfo=_.throttle(this._getCombinationInfo.bind(this),500);return function(ev){return dropMisordered.add(_getCombinationInfo(ev));};}),_toggleDisable:function($parent,isCombinationPossible){$parent.toggleClass('css_not_available',!isCombinationPossible);},_updateProductImage:function($productContainer,productId,productTemplateId){var model=productId?'product.product':'product.template';var modelId=productId||productTemplateId;var imageUrl='/web/image/{0}/{1}/'+(this._productImageField?this._productImageField:'image');var imageSrc=imageUrl.replace("{0}",model).replace("{1}",modelId);var imagesSelectors=['span[data-oe-model^="product."][data-oe-type="image"] img:first','img.product_detail_img','span.variant_image img','img.variant_image',];var $img=$productContainer.find(imagesSelectors.join(', '));$img.attr('src',imageSrc);},_onChangeColorAttribute:function(ev){var $parent=$(ev.target).closest('.js_product');$parent.find('.css_attribute_color').removeClass("active").filter(':has(input:checked)').addClass("active");},_getUri:function(uri){if(this.isWebsite){return uri+'_website';}else{return uri;}}};return ProductConfiguratorMixin;});;

/* /sale/static/src/js/product_configurator_modal.js defined in bundle 'web.assets_frontend' */
odoo.define('sale.OptionalProductsModal',function(require){"use strict";var ajax=require('web.ajax');var Dialog=require('web.Dialog');var ServicesMixin=require('web.ServicesMixin');var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');var weContext=require('web_editor.context');var productNameMap={};var optionalProductsMap={};var OptionalProductsModal=Dialog.extend(ServicesMixin,ProductConfiguratorMixin,{events:_.extend({},Dialog.prototype.events,ProductConfiguratorMixin.events,{'click a.js_add, a.js_remove':'_onAddOrRemoveOption','click button.js_add_cart_json':'onClickAddCartJSON','change .in_cart.main_product input.js_quantity':'_onChangeQuantity',}),init:function(parent,params){var self=this;var options=_.extend({size:'large',buttons:[{text:params.okButtonText,click:this._onConfirmButtonClick,classes:'btn-primary'},{text:params.cancelButtonText,click:this._onCancelButtonClick}],technical:!params.isWebsite,},params||{});this._super(parent,options);this.rootProduct=params.rootProduct;this.container=parent;this.pricelistId=params.pricelistId;this.isWebsite=params.isWebsite;this.dialogClass='oe_optional_products_modal'+(params.isWebsite?' oe_website_sale':'');this._productImageField='image_medium';},willStart:function(){var self=this;var uri=this._getUri("/product_configurator/show_optional_products");var getModalContent=ajax.jsonRpc(uri,'call',{product_id:self.rootProduct.product_id,variant_values:self.rootProduct.variant_values,pricelist_id:self.pricelistId||false,add_qty:self.rootProduct.quantity,kwargs:{context:_.extend({'quantity':self.rootProduct.quantity},weContext.get()),}}).then(function(modalContent){if(modalContent){var $modalContent=$(modalContent);$modalContent=self._postProcessContent($modalContent);self.$content=$modalContent;}else{self.trigger('options_empty');self.preventOpening=true;}});var parentInit=self._super.apply(self,arguments);return $.when(getModalContent,parentInit);},open:function(options){$('.tooltip').remove();var self=this;this.appendTo($('<div/>')).then(function(){if(!self.preventOpening){self.$modal.find(".modal-body").replaceWith(self.$el);self.$modal.attr('open',true);self.$modal.removeAttr("aria-hidden");self.$modal.modal().appendTo(self.container);self.$modal.focus();self._opened.resolve();}});if(options&&options.shouldFocusButtons){self._onFocusControlButton();}
return self;},start:function(){var def=this._super.apply(this,arguments);var self=this;this.$el.find('input[name="add_qty"]').val(this.rootProduct.quantity);return def.then(function(){self._opened.then(function(){self.triggerVariantChange(self.$el);});});},computePriceTotal:function(){if($('.js_price_total').length){var price=0;$('.js_product.in_cart').each(function(){var quantity=parseInt($('input[name="add_qty"]').first().val());price+=parseFloat($(this).find('.js_raw_price').html())*quantity;});$('.js_price_total .oe_currency_value').html(this._priceToStr(parseFloat(price)));}
ProductConfiguratorMixin.computePriceTotal.apply(this,arguments);},getSelectedProducts:function(){var self=this;var products=[this.rootProduct];this.$modal.find('.js_product.in_cart:not(.main_product)').each(function(){var quantity=0;var $item=$(this);if($item.find('input[name="add_qty"]').length){quantity=$item.find('input[name="add_qty"]').val();}else{quantity=parseInt($item.find('.optional_product_quantity span.add_qty').html().trim());}
var productCustomVariantValues=self.getCustomVariantValues($(this));var noVariantAttributeValues=self.getNoVariantAttributeValues($(this));products.push({product_id:parseInt($item.find('input.product_id').val()),quantity:quantity,product_custom_attribute_values:productCustomVariantValues,no_variant_attribute_values:noVariantAttributeValues});});return products;},_postProcessContent:function($modalContent){var productId=this.rootProduct.product_id;$modalContent.find('img:first').attr("src","/web/image/product.product/"+productId+"/image_medium");if(this.rootProduct&&(this.rootProduct.product_custom_attribute_values||this.rootProduct.no_variant_attribute_values)){var $productDescription=$modalContent.find('.main_product').find('td.td-product_name div.text-muted.small');var description=$productDescription.html();$.each(this.rootProduct.product_custom_attribute_values,function(){description+='<br/>'+this.attribute_value_name+': '+this.custom_value;});$.each(this.rootProduct.no_variant_attribute_values,function(){if(this.is_custom!=='True'){description+='<br/>'+this.attribute_name+': '+this.attribute_value_name;}});$productDescription.html(description);}
return $modalContent;},_onConfirmButtonClick:function(){this.trigger('confirm');this.close();},_onCancelButtonClick:function(){this.trigger('back');this.close();},_onAddOrRemoveOption:function(ev){ev.preventDefault();var self=this;var $target=$(ev.currentTarget);var $modal=$target.parents('.oe_optional_products_modal');var $parent=$target.parents('.js_product:first');$parent.find("a.js_add, span.js_remove").toggleClass('d-none');$parent.find("input.js_optional_same_quantity").val($target.hasClass("js_add")?1:0);$parent.find(".js_remove");var productTemplateId=$parent.find(".product_template_id").val();if($target.hasClass('js_add')){self._onAddOption($modal,$parent,productTemplateId);}else{self._onRemoveOption($modal,$parent,productTemplateId);}
self.computePriceTotal();},_onAddOption:function($modal,$parent,productTemplateId){var self=this;var $main_product=$modal.find('.js_product:first');var $selectOptionsText=$modal.find('.o_select_options');$parent.addClass('in_cart');$parent.find('.td-qty').addClass('text-center');$parent.find('.td-qty').append($parent.find('.optional_product_quantity'));productNameMap[productTemplateId]=$parent.find(".product-name").html();$parent.find(".product-name").html($parent.find(".product_display_name").val());var productCustomVariantValues=self.getCustomVariantValues($parent);var noVariantAttributeValues=self.getNoVariantAttributeValues($parent);if(productCustomVariantValues||noVariantAttributeValues){var $productDescription=$parent.find('td.td-product_name div.float-left');var description='';$.each(productCustomVariantValues,function(){description+='<br/>'+this.attribute_value_name+': '+this.custom_value;});$.each(noVariantAttributeValues,function(){if(this.is_custom!=='True'){description+='<br/>'+this.attribute_name+': '+this.attribute_value_name;}});var $customAttributeValuesDescription=$('<div>',{class:'custom_attribute_values_description text-muted small',html:description});$productDescription.append($customAttributeValuesDescription);}
var parentProductId=null;for(var productIdKey in optionalProductsMap){if(optionalProductsMap[productIdKey].indexOf(productTemplateId)!==-1){parentProductId=productIdKey;break;}
$('tr:last').after($parent);}
if(parentProductId){$modal.find('.product_template_id').filter(function(){return parentProductId===$(this).val();}).parents('.js_product:first').after($parent);}else{$main_product.after($parent);}
var productReady=this.selectOrCreateProduct($parent,$parent.find('.product_id').val(),productTemplateId,true);productReady.done(function(productId){$parent.find('.product_id').val(productId);ajax.jsonRpc(self._getUri("/product_configurator/optional_product_items"),'call',{'product_id':productId,'pricelist_id':self.pricelistId||false,}).then(function(addedItem){var $addedItem=$(addedItem);$modal.find('tr:last').after($addedItem);self.$el.find('input[name="add_qty"]').trigger('change');self.triggerVariantChange($addedItem);if($addedItem.find(".product_template_id").length>0){optionalProductsMap[productTemplateId]=$addedItem.find(".product_template_id").map(function(){return $(this).val();}).get();}
if($selectOptionsText.nextAll('.js_product').length===0){$selectOptionsText.hide();}});});},_onRemoveOption:function($modal,$parent,productTemplateId){$parent.removeClass('in_cart');$parent.find('.td-qty').removeClass('text-center');$parent.find('.js_remove.d-none').prepend($parent.find('.optional_product_quantity'));$parent.find('.custom_attribute_values_description').remove();var $select_options_text=$modal.find('.o_select_options');$select_options_text.show();$parent.find(".product-name").html(productNameMap[productTemplateId]);delete productNameMap[productTemplateId];this._removeOptionOption($modal,productTemplateId);$modal.find('tr:last').after($parent);},_removeOptionOption:function($modal,optionId){var self=this;if(optionalProductsMap[optionId]){optionalProductsMap[optionId].forEach(function(productId){$modal.find('.product_template_id').filter(function(){return productId===$(this).val();}).parents('.js_product:first').remove();self._removeOptionOption($modal,productId);});delete optionalProductsMap[optionId];}},_onChangeCombination:function(ev,$parent,combination){$parent.find('.td-product_name .product-name').first().text(combination.display_name);ProductConfiguratorMixin._onChangeCombination.apply(this,arguments);this.computePriceTotal();},_onChangeQuantity:function(ev){var $quantity=$(ev.currentTarget);var qty=parseFloat($quantity.val());var $modal=$quantity.parents('.oe_optional_products_modal');if(qty===1){$modal.find(".js_items").addClass('d-none').removeClass('add_qty');$modal.find(".js_item").removeClass('d-none').addClass('add_qty');}else{$modal.find(".js_items").removeClass('d-none').addClass('add_qty').text(qty);$modal.find(".js_item").addClass('d-none').removeClass('add_qty');}
this.rootProduct.quantity=qty;if(!this.isWebsite){this.onChangeAddQuantity(ev);}
this.trigger('update_quantity',qty);}});return OptionalProductsModal;});;

/* /website_sale/static/src/js/website_sale.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.cart',function(require){'use strict';var sAnimations=require('website.content.snippets.animation');var core=require('web.core');var _t=core._t;var timeout;sAnimations.registry.websiteSaleCartLink=sAnimations.Class.extend({selector:'#top_menu a[href$="/shop/cart"]',read_events:{'mouseenter':'_onMouseEnter','mouseleave':'_onMouseLeave',},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
this.$el.popover({trigger:'manual',animation:true,html:true,title:function(){return _t("My Cart");},container:'body',placement:'auto',template:'<div class="popover mycart-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'});return def;},_onMouseEnter:function(ev){var self=this;clearTimeout(timeout);$(this.selector).not(ev.currentTarget).popover('hide');timeout=setTimeout(function(){if(!self.$el.is(':hover')||$('.mycart-popover:visible').length){return;}
$.get("/shop/cart",{type:'popover',}).then(function(data){self.$el.data("bs.popover").config.content=data;self.$el.popover("show");$('.popover').on('mouseleave',function(){self.$el.trigger('mouseleave');});});},100);},_onMouseLeave:function(ev){var self=this;setTimeout(function(){if($('.popover:hover').length){return;}
if(!self.$el.is(':hover')){self.$el.popover('hide');}},1000);},});});odoo.define('website_sale.website_sale_category',function(require){'use strict';var sAnimations=require('website.content.snippets.animation');sAnimations.registry.websiteSaleCategory=sAnimations.Class.extend({selector:'#o_shop_collapse_category',read_events:{'click .fa-chevron-right':'_onOpenClick','click .fa-chevron-down':'_onCloseClick',},_onOpenClick:function(ev){var $fa=$(ev.currentTarget);$fa.parent().siblings().find('.fa-chevron-down:first').click();$fa.parents('li').find('ul:first').show('normal');$fa.toggleClass('fa-chevron-down fa-chevron-right');},_onCloseClick:function(ev){var $fa=$(ev.currentTarget);$fa.parent().find('ul:first').hide('normal');$fa.toggleClass('fa-chevron-down fa-chevron-right');},});});odoo.define('website_sale.website_sale',function(require){'use strict';var utils=require('web.utils');var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');var core=require('web.core');var config=require('web.config');var sAnimations=require('website.content.snippets.animation');require("website.content.zoomodoo");var _t=core._t;sAnimations.registry.WebsiteSale=sAnimations.Class.extend(ProductConfiguratorMixin,{selector:'.oe_website_sale',read_events:{'change form .js_product:first input[name="add_qty"]':'_onChangeAddQuantity','mouseup .js_publish':'_onMouseupPublish','touchend .js_publish':'_onMouseupPublish','change .oe_cart input.js_quantity[data-product-id]':'_onChangeCartQuantity','click .oe_cart a.js_add_suggested_products':'_onClickSuggestedProduct','click a.js_add_cart_json':'_onClickAddCartJSON','click .a-submit':'_onClickSubmit','change form.js_attributes input, form.js_attributes select':'_onChangeAttribute','mouseup form.js_add_cart_json label':'_onMouseupAddCartLabel','touchend form.js_add_cart_json label':'_onMouseupAddCartLabel','click .show_coupon':'_onClickShowCoupon','submit .o_website_sale_search':'_onSubmitSaleSearch','change select[name="country_id"]':'_onChangeCountry','change #shipping_use_same':'_onChangeShippingUseSame','click .toggle_summary':'_onToggleSummary','click input.js_product_change':'onChangeVariant','change .js_main_product [data-attribute_exclusions]':'onChangeVariant',},init:function(){this._super.apply(this,arguments);this._changeCartQuantity=_.debounce(this._changeCartQuantity.bind(this),500);this._changeCountry=_.debounce(this._changeCountry.bind(this),500);this.isWebsite=true;delete this.events['change .main_product:not(.in_cart) input.js_quantity'];delete this.events['change [data-attribute_exclusions]'];},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
_.each(this.$('div.js_product'),function(product){$('input.js_product_change',product).first().trigger('change');});this.triggerVariantChange(this.$el);this.$('select[name="country_id"]').change();this.$('#checkbox_cgv').trigger('change');core.bus.on('resize',this,function(){if(config.device.size_class===config.device.SIZES.XL){$('.toggle_summary_div').addClass('d-none d-xl-block');}});this._startZoom();return def;},getSelectedVariantValues:function($container){var combination=$container.find('input.js_product_change:checked').data('combination');if(combination){return JSON.parse(combination);}
return ProductConfiguratorMixin.getSelectedVariantValues.apply(this,arguments);},_changeCartQuantity:function($input,value,$dom_optional,line_id,productIDs){_.each($dom_optional,function(elem){$(elem).find('.js_quantity').text(value);productIDs.push($(elem).find('span[data-product-id]').data('product-id'));});$input.data('update_change',true);this._rpc({route:"/shop/cart/update_json",params:{line_id:line_id,product_id:parseInt($input.data('product-id'),10),set_qty:value},}).then(function(data){$input.data('update_change',false);var check_value=parseInt($input.val()||0,10);if(isNaN(check_value)){check_value=1;}
if(value!==check_value){$input.trigger('change');return;}
var $q=$(".my_cart_quantity");if(data.cart_quantity){$q.parents('li:first').removeClass('d-none');}
else{window.location='/shop/cart';}
$q.html(data.cart_quantity).hide().fadeIn(600);$input.val(data.quantity);$('.js_quantity[data-line-id='+line_id+']').val(data.quantity).html(data.quantity);$(".js_cart_lines").first().before(data['website_sale.cart_lines']).end().remove();$(".js_cart_summary").first().before(data['website_sale.short_cart_summary']).end().remove();if(data.warning){var cart_alert=$('.oe_cart').parent().find('#data_warning');if(cart_alert.length===0){$('.oe_cart').prepend('<div class="alert alert-danger alert-dismissable" role="alert" id="data_warning">'+'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> '+data.warning+'</div>');}
else{cart_alert.html('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> '+data.warning);}
$input.val(data.quantity);}});},_changeCountry:function(){if(!$("#country_id").val()){return;}
this._rpc({route:"/shop/country_infos/"+$("#country_id").val(),params:{mode:'shipping',},}).then(function(data){var selectStates=$("select[name='state_id']");if(selectStates.data('init')===0||selectStates.find('option').length===1){if(data.states.length){selectStates.html('');_.each(data.states,function(x){var opt=$('<option>').text(x[1]).attr('value',x[0]).attr('data-code',x[2]);selectStates.append(opt);});selectStates.parent('div').show();}else{selectStates.val('').parent('div').hide();}
selectStates.data('init',0);}else{selectStates.data('init',0);}
if(data.fields){if($.inArray('zip',data.fields)>$.inArray('city',data.fields)){$(".div_zip").before($(".div_city"));}else{$(".div_zip").after($(".div_city"));}
var all_fields=["street","zip","city","country_name"];_.each(all_fields,function(field){$(".checkout_autoformat .div_"+field.split('_')[0]).toggle($.inArray(field,data.fields)>=0);});}});},_getProductId:function($parent){if($parent.find('input.js_product_change').length!==0){return parseInt($parent.find('input.js_product_change:checked').val());}
else{return ProductConfiguratorMixin._getProductId.apply(this,arguments);}},_startZoom:function(){if(!config.device.isMobile){var autoZoom=$('.ecom-zoomable').data('ecom-zoom-auto')||false,factorZoom=parseFloat($('.ecom-zoomable').data('ecom-zoom-factor'))||1.5,attach='#o-carousel-product';_.each($('.ecom-zoomable img[data-zoom]'),function(el){onImageLoaded(el,function(){var $img=$(el);if(!_.str.endsWith(el.src,el.dataset.zoomImage)||el.naturalWidth>=$(attach).width()*factorZoom||el.naturalHeight>=$(attach).height()*factorZoom){$img.zoomOdoo({event:autoZoom?'mouseenter':'click',attach:attach});$img.attr('data-zoom',1);}else{$img.removeAttr('data-zoom');$img.attr('data-zoom-image','');}});});}
function onImageLoaded(img,callback){$(img).on('load',function(){callback();});if(img.complete){callback();}}},_updateProductImage:function($productContainer,productId,productTemplateId,new_carousel,isCombinationPossible){var $img;var $carousel=$productContainer.find('#o-carousel-product');if(isCombinationPossible===undefined){isCombinationPossible=this.isSelectedVariantAllowed;}
if(new_carousel){if(window.location.search.indexOf('enable_editor')===-1){var $new_carousel=$(new_carousel);$carousel.after($new_carousel);$carousel.remove();$carousel=$new_carousel;$carousel.carousel(0);this._startZoom();this.trigger_up('animation_start_demand',{$target:$carousel});}}
else{var model=productId?'product.product':'product.template';var modelId=productId||productTemplateId;var imageSrc='/web/image/{0}/{1}/image'.replace("{0}",model).replace("{1}",modelId);$img=$productContainer.find('img.js_variant_img');$img.attr("src",imageSrc);$img.parent().attr('data-oe-model',model).attr('data-oe-id',modelId).data('oe-model',model).data('oe-id',modelId);var $thumbnail=$productContainer.find('img.js_variant_img_small');if($thumbnail.length!==0){$thumbnail.attr("src","/web/image/{0}/{1}/image/90x90".replace('{0}',model).replace('{1}',modelId));$('.carousel').carousel(0);}
$img.filter('[data-zoom-image]').attr('data-zoom-image',$img.attr('src'));if($img.data('zoomOdoo')!==undefined){$img.data('zoomOdoo').isReady=false;}}
$carousel.toggleClass('css_not_available',!isCombinationPossible);},_onClickAddCartJSON:function(ev){this.onClickAddCartJSON(ev);},_onChangeAddQuantity:function(ev){this.onChangeAddQuantity(ev);},_onMouseupPublish:function(ev){$(ev.currentTarget).parents('.thumbnail').toggleClass('disabled');},_onChangeCartQuantity:function(ev){var $input=$(ev.currentTarget);if($input.data('update_change')){return;}
var value=parseInt($input.val()||0,10);if(isNaN(value)){value=1;}
var $dom=$input.closest('tr');var $dom_optional=$dom.nextUntil(':not(.optional_product.info)');var line_id=parseInt($input.data('line-id'),10);var productIDs=[parseInt($input.data('product-id'),10)];this._changeCartQuantity($input,value,$dom_optional,line_id,productIDs);},_onClickSuggestedProduct:function(ev){$(ev.currentTarget).prev('input').val(1).trigger('change');},_onClickSubmit:function(ev,forceSubmit){if($(ev.currentTarget).is('#add_to_cart, #products_grid .a-submit')&&!forceSubmit){return;}
var $aSubmit=$(ev.currentTarget);if(!ev.isDefaultPrevented()&&!$aSubmit.is(".disabled")){ev.preventDefault();$aSubmit.closest('form').submit();}
if($aSubmit.hasClass('a-submit-disable')){$aSubmit.addClass("disabled");}
if($aSubmit.hasClass('a-submit-loading')){var loading='<span class="fa fa-cog fa-spin"/>';var fa_span=$aSubmit.find('span[class*="fa"]');if(fa_span.length){fa_span.replaceWith(loading);}else{$aSubmit.append(loading);}}},_onChangeAttribute:function(ev){if(!ev.isDefaultPrevented()){ev.preventDefault();$(ev.currentTarget).closest("form").submit();}},_onMouseupAddCartLabel:function(ev){var $label=$(ev.currentTarget);var $price=$label.parents("form:first").find(".oe_price .oe_currency_value");if(!$price.data("price")){$price.data("price",parseFloat($price.text()));}
var value=$price.data("price")+parseFloat($label.find(".badge span").text()||0);var dec=value%1;$price.html(value+(dec<0.01?".00":(dec<1?"0":"")));},_onClickShowCoupon:function(ev){$(ev.currentTarget).hide();$('.coupon_form').removeClass('d-none');},_onSubmitSaleSearch:function(ev){if(!this.$('.dropdown_sorty_by').length){return;}
var $this=$(ev.currentTarget);if(!ev.isDefaultPrevented()&&!$this.is(".disabled")){ev.preventDefault();var oldurl=$this.attr('action');oldurl+=(oldurl.indexOf("?")===-1)?"?":"";var search=$this.find('input.search-query');window.location=oldurl+'&'+search.attr('name')+'='+encodeURIComponent(search.val());}},_onChangeCountry:function(ev){if(!this.$('.checkout_autoformat').length){return;}
this._changeCountry();},_onChangeShippingUseSame:function(ev){$('.ship_to_other').toggle(!$(ev.currentTarget).prop('checked'));},_toggleDisable:function($parent,isCombinationPossible){ProductConfiguratorMixin._toggleDisable.apply(this,arguments);$parent.find("#add_to_cart").toggleClass('disabled',!isCombinationPossible);},_onToggleSummary:function(){$('.toggle_summary_div').toggleClass('d-none');$('.toggle_summary_div').removeClass('d-xl-block');},});sAnimations.registry.websiteSaleCart=sAnimations.Class.extend({selector:'.oe_website_sale .oe_cart',read_events:{'click .js_change_shipping':'_onClickChangeShipping','click .js_edit_address':'_onClickEditAddress','click .js_delete_product':'_onClickDeleteProduct',},_onClickChangeShipping:function(ev){var $old=$('.all_shipping').find('.card.border_primary');$old.find('.btn-ship').toggle();$old.addClass('js_change_shipping');$old.removeClass('border_primary');var $new=$(ev.currentTarget).parent('div.one_kanban').find('.card');$new.find('.btn-ship').toggle();$new.removeClass('js_change_shipping');$new.addClass('border_primary');var $form=$(ev.currentTarget).parent('div.one_kanban').find('form.d-none');$.post($form.attr('action'),$form.serialize()+'&xhr=1');},_onClickEditAddress:function(ev){ev.preventDefault();$(ev.currentTarget).closest('div.one_kanban').find('form.d-none').attr('action','/shop/address').submit();},_onClickDeleteProduct:function(ev){ev.preventDefault();$(ev.currentTarget).closest('tr').find('.js_quantity').val(0).trigger('change');},});});;

/* /website_sale/static/src/js/website_sale_utils.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.utils',function(require){'use strict';function animateClone($cart,$elem,offsetTop,offsetLeft){$cart.find('.o_animate_blink').addClass('o_red_highlight o_shadow_animation').delay(500).queue(function(){$(this).removeClass("o_shadow_animation").dequeue();}).delay(2000).queue(function(){$(this).removeClass("o_red_highlight").dequeue();});var $imgtodrag=$elem.find('img').eq(0);if($imgtodrag.length){var $imgclone=$imgtodrag.clone().offset({top:$imgtodrag.offset().top,left:$imgtodrag.offset().left}).addClass('o_website_sale_animate').appendTo(document.body).animate({top:$cart.offset().top+offsetTop,left:$cart.offset().left+offsetLeft,width:75,height:75,},1000,'easeInOutExpo');$imgclone.animate({width:0,height:0,},function(){$(this).detach();});}}
return{animateClone:animateClone,};});;

/* /website_sale/static/src/js/website_sale_payment.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.payment',function(require){'use strict';require('web.dom_ready');var $checkbox=$("#checkbox_cgv");if(!$checkbox.length){return;}
var $pay_button=$('button#o_payment_form_pay');$checkbox.on('change',function(ev){$pay_button.data('disabled_reasons',$pay_button.data('disabled_reasons')||{});$pay_button.data('disabled_reasons').cgv=!ev.target.checked;$pay_button.prop('disabled',_.contains($pay_button.data('disabled_reasons'),true));});$checkbox.change();});;

/* /website_sale/static/src/js/website_sale_validate.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.validate',function(require){'use strict';var sAnimations=require('website.content.snippets.animation');sAnimations.registry.websiteSaleValidate=sAnimations.Class.extend({selector:'div.oe_website_sale_tx_status[data-order-id]',start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
this._poll_nbr=0;this._paymentTransationPollStatus();return def;},_paymentTransationPollStatus:function(){var self=this;this._rpc({route:'/shop/payment/get_status/'+parseInt(this.$el.data('order-id')),}).then(function(result){self._poll_nbr+=1;if(result.recall){if(self._poll_nbr<20){setTimeout(function(){self._paymentTransationPollStatus();},Math.ceil(self._poll_nbr/3)*1000);}else{var $message=$(result.message);$message.find('span:first').prepend($("<i title='We are waiting the confirmation of the bank or payment provider' class='fa fa-warning' style='margin-right:10px;'>"));result.message=$message.html();}}
self.$el.html(result.message);});},});});;

/* /website_sale/static/src/js/website_sale_tour_buy.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour',function(require){'use strict';var tour=require("web_tour.tour");var base=require("web_editor.base");tour.register('shop_buy_product',{test:true,url:'/shop',wait_for:base.ready()},[{content:"search conference chair",trigger:'form input[name="search"]',run:"text conference chair",},{content:"search conference chair",trigger:'form:has(input[name="search"]) .oe_search_button',},{content:"select conference chair",trigger:'.oe_product_cart:first a:contains("Conference Chair")',},{content:"select Conference Chair Aluminium",extra_trigger:'#product_detail',trigger:'label:contains(Aluminium) input',},{content:"select Conference Chair Steel",extra_trigger:'#product_detail',trigger:'label:contains(Steel) input',},{content:"click on add to cart",extra_trigger:'label:contains(Steel) input:propChecked',trigger:'#product_detail form[action^="/shop/cart/update"] .btn-primary',},{content:"click in modal on 'Proceed to checkout' button",trigger:'button:contains("Proceed to Checkout")',},{content:"add suggested",extra_trigger:'#wrap:not(:has(#cart_products:contains("Storage Box")))',trigger:'.oe_cart:has(tr:contains("Storage Box")) a:contains("Add to Cart")',},{content:"add one more",extra_trigger:'#cart_products tr:contains("Storage Box")',trigger:'#cart_products tr:contains("Steel") a.js_add_cart_json:eq(1)',},{content:"remove Storage Box",extra_trigger:'#cart_products tr:contains("Steel") input.js_quantity:propValue(2)',trigger:'#cart_products tr:contains("Storage Box") a.js_add_cart_json:first',},{content:"set one",extra_trigger:'#wrap:not(:has(#cart_products tr:contains("Storage Box")))',trigger:'#cart_products input.js_quantity',run:'text 1',},{content:"go to checkout",extra_trigger:'#cart_products input.js_quantity:propValue(1)',trigger:'a[href*="/shop/checkout"]',},{content:"select payment",trigger:'#payment_method label:contains("Wire Transfer")',},{content:"Pay Now",extra_trigger:'#payment_method label:contains("Wire Transfer") input:checked,#payment_method:not(:has("input:radio:visible"))',trigger:'button[id="o_payment_form_pay"]:visible:not(:disabled)',},{content:"finish",trigger:'.oe_website_sale:contains("Pending... The order will be validated after the payment.")',timeout:30000,}]);});;

/* /website_sale/static/src/js/website_sale_tracking.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tracking',function(require){var sAnimations=require('website.content.snippets.animation');sAnimations.registry.websiteSaleTracking=sAnimations.Class.extend({selector:'.oe_website_sale',read_events:{'click form[action="/shop/cart/update"] a.a-submit':'_onAddProductIntoCart','click a[href="/shop/checkout"]':'_onCheckoutStart','click div.oe_cart a[href^="/web?redirect"][href$="/shop/checkout"]':'_onCustomerSignin','click form[action="/shop/confirm_order"] a.a-submit':'_onOrder','click form[target="_self"] button[type=submit]':'_onOrderPayment',},start:function(){var self=this;var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
if(this.$el.is('#product_detail')){var productID=this.$('input[name="product_id"]').attr('value');this._vpv('/stats/ecom/product_view/'+productID);}
if(this.$('div.oe_website_sale_tx_status').length){this._trackGA('require','ecommerce');var orderID=this.$('div.oe_website_sale_tx_status').data('order-id');this._vpv('/stats/ecom/order_confirmed/'+orderID);this._rpc({route:'/shop/tracking_last_order/',}).then(function(o){self._trackGA('ecommerce:clear');if(o.transaction&&o.lines){self._trackGA('ecommerce:addTransaction',o.transaction);_.forEach(o.lines,function(line){self._trackGA('ecommerce:addItem',line);});}
self._trackGA('ecommerce:send');});}
return def;},_trackGA:function(){websiteGA=window.ga||function(){};websiteGA.apply(this,arguments);},_vpv:function(page){this._trackGA('send','pageview',{'page':page,'title':document.title,});},_onAddProductIntoCart:function(){var productID=this.$('input[name="product_id"]').attr('value');this._vpv('/stats/ecom/product_add_to_cart/'+productID);},_onCheckoutStart:function(){this._vpv('/stats/ecom/customer_checkout');},_onCustomerSignin:function(){this._vpv('/stats/ecom/customer_signin');},_onOrder:function(){if($('#top_menu [href="/web/login"]').length){this._vpv('/stats/ecom/customer_signup');}
this._vpv('/stats/ecom/order_checkout');},_onOrderPayment:function(){var method=$('#payment_method input[name=acquirer]:checked').nextAll('span:first').text();this._vpv('/stats/ecom/order_payment/'+method);},});});;

/* /website_sale/static/src/js/website_sale_tour_shop_customize.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_customize',function(require){'use strict';var tour=require("web_tour.tour");var base=require("web_editor.base");tour.register('shop_customize',{test:true,url:'/shop',wait_for:base.ready()},[{content:"open customize menu",trigger:'#customize-menu > a',},{content:"click on 'Product Attribute's Filters'",trigger:"#customize-menu a:contains(Product Attribute's Filters)",},{content:"select product attribute Steel",extra_trigger:'body:not(:has(#customize-menu:visible .dropdown-menu:visible))',trigger:'form.js_attributes label:contains(Steel) input:not(:checked)',},{content:"check the selection",trigger:'form.js_attributes label:contains(Steel) input:checked',run:function(){},},{content:"select product",extra_trigger:'body:not(:has(.oe_website_sale .oe_product_cart:eq(3)))',trigger:'.oe_product_cart a:contains("Test Product")',},{content:"open customize menu",trigger:'#customize-menu',extra_trigger:"#product_detail",run:function(){$('body').addClass('notReady');var ajax=odoo.__DEBUG__.services['web.ajax'];var get_group_payload={model:'ir.model.data',method:'xmlid_to_res_id',args:['product.group_product_variant',false],kwargs:{}};ajax.jsonpRpc('/web/dataset/call_kw','call',get_group_payload).then(function(group_id){ajax.jsonpRpc('/web/dataset/call_kw','call',{model:'res.groups',method:'write',args:[group_id,{'users':[[4,1]]}],kwargs:{}}).then(function(){location.reload(true);});});},},{content:"open customize menu",trigger:'#customize-menu > a',extra_trigger:'body:not(.notReady)',},{content:"check page loaded after enable  variant group",trigger:'#customize-menu a:contains(List View of Variants)',run:function(){},},{content:"check list view of variants is disabled initially",trigger:'body:not(:has(.js_product_change))',run:function(){},},{content:"click on 'List View of Variants'",trigger:"#customize-menu a:contains(List View of Variants)",},{content:"check page loaded after list of variant customization enabled",trigger:'.js_product_change',run:function(){},},{context:"check variant price",trigger:'.custom-radio:contains("Aluminium") .badge:contains("+") .oe_currency_value:contains("50.4")',run:function(){},},{content:"check price is 750",trigger:".product_price .oe_price .oe_currency_value:containsExact(750.00)",run:function(){},},{content:"switch to another variant",trigger:".js_product label:contains('Aluminium')",},{content:"verify that price has changed when changing variant",trigger:".product_price .oe_price .oe_currency_value:containsExact(800.40)",run:function(){},},{content:"open customize menu",trigger:'#customize-menu > a',},{content:"remove 'List View of Variants'",trigger:"#customize-menu a:contains(List View of Variants):has(input:checked)",},{content:"check page loaded after list of variant customization disabled",trigger:".js_product:not(:has(.js_product_change))",run:function(){},},{content:"check price is 750",trigger:".product_price .oe_price .oe_currency_value:containsExact(750.00)",run:function(){},},{content:"switch to Aluminium variant",trigger:'.js_product input[data-value_name="Aluminium"]',},{content:"verify that price has changed when changing variant",trigger:".product_price .oe_price .oe_currency_value:containsExact(800.40)",run:function(){},},{content:"switch back to Steel variant",trigger:".js_product label:contains('Steel')",},{content:"check price is 750",trigger:".product_price .oe_price .oe_currency_value:containsExact(750.00)",run:function(){},},{content:"click on 'Add to Cart' button",trigger:"a:contains(Add to Cart)",},{content:"check quantity",trigger:'.my_cart_quantity:containsExact(1),.o_extra_menu_items .fa-plus',run:function(){},},{content:"click on shop",trigger:"a:contains(Continue Shopping)",extra_trigger:'body:not(:has(#products_grid_before .js_attributes))',},{content:"open customize menu bis",extra_trigger:'#products_grid_before .js_attributes',trigger:'#customize-menu > a',},{content:"remove 'Product Attribute's Filters'",trigger:"#customize-menu a:contains(Product Attribute's Filters):has(input:checked)",},{content:"finish",extra_trigger:'body:not(:has(#products_grid_before .js_attributes))',trigger:'#wrap:not(:has(li:has(.my_cart_quantity):visible))',run:function(){},},]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_custom_attribute_value.js defined in bundle 'web.assets_frontend' */
odoo.define("website_sale.tour_shop_custom_attribute_value",function(require){"use strict";var tour=require("web_tour.tour");var base=require("web_editor.base");var optionVariantImage;tour.register("shop_custom_attribute_value",{url:"/shop?search=Customizable Desk",test:true,wait_for:base.ready()},[{content:"click on Customizable Desk",trigger:'.oe_product_cart a:contains("Customizable Desk")',},{trigger:'li.js_attribute_value span:contains(Custom)',extra_trigger:'li.js_attribute_value',run:'click',},{trigger:'input.variant_custom_value',run:'text Wood',},{trigger:'a:contains(Add to Cart)',run:'click',},{trigger:'div:contains(Custom: Wood)',extra_trigger:'.js_product.in_cart.main_product',run:function(){}},{trigger:'button.js_add_cart_json:has(i.fa-plus)',run:'click',},{trigger:'div.oe_striked_price span:contains(750)',run:function(){},},{trigger:'span.oe_price span:contains(600)',run:function(){},},{trigger:'.oe_optional_products_modal .js_product:eq(1) div:contains("Conference Chair (Steel)")',run:function(){optionVariantImage=$('.oe_optional_products_modal .js_product:eq(1) img.variant_image').attr('src');}},{trigger:'.oe_optional_products_modal .js_product:eq(1) input[data-value_name="Aluminium"]',},{trigger:'.oe_optional_products_modal .js_product:eq(1) div:contains("Conference Chair (Aluminium)")',run:function(){var newVariantImage=$('.oe_optional_products_modal .js_product:eq(1) img.variant_image').attr('src');if(newVariantImage!==optionVariantImage){$('<p>').text('image variant option src changed').insertAfter('.oe_optional_products_modal .js_product:eq(1) .product-name');}}},{extra_trigger:'.oe_optional_products_modal .js_product:eq(1) div:contains("image variant option src changed")',trigger:'.oe_optional_products_modal .js_product:eq(1) input[data-value_name="Steel"]',},{trigger:'li.js_attribute_value span:contains(Aluminium)',extra_trigger:'.oe_optional_products_modal',run:'click'},{trigger:'.oe_price span:contains(22.90)',run:function(){},},{trigger:'.oe_optional_products_modal .js_product:has(strong:contains(Conference Chair)) .js_add',extra_trigger:'.oe_optional_products_modal .js_product:has(strong:contains(Conference Chair))',run:'click'},{trigger:'.oe_optional_products_modal .js_product:has(strong:contains(Chair floor protection)) .js_add',extra_trigger:'.oe_optional_products_modal .js_product:has(strong:contains(Chair floor protection))',run:'click'},{trigger:'span:contains(1,269.80)',run:function(){},},{trigger:'button:has(span:contains(Proceed to Checkout))',run:'click',},{trigger:'span:contains(Custom: Wood)',extra_trigger:'#cart_products',run:function(){},}]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_zoom.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_zoom',function(require){'use strict';var tour=require('web_tour.tour');var base=require('web_editor.base');var imageSelector='#o-carousel-product .carousel-item.active img';var imageName="A Colorful Image";var nameGreen="Forest Green";tour.register('shop_zoom',{test:true,url:'/shop?search='+imageName,wait_for:base.ready(),},[{content:"select "+imageName,trigger:'.oe_product_cart a:containsExact("'+imageName+'")',},{content:"click on the image",trigger:imageSelector,run:'clicknoleave',},{content:"check there is no zoom on that small image",trigger:'body:not(:has(.zoomodoo-flyout img))',},{content:"change variant",trigger:'input[data-attribute_name="Beautiful Color"][data-value_name="'+nameGreen+'"]',run:'click',},{content:"wait for variant to be loaded",trigger:'.oe_currency_value:contains("21.00")'},{content:"click on the image",trigger:imageSelector,run:'clicknoleave',},{content:"check there is a zoom on that big image",trigger:'.zoomodoo-flyout img',},]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_dynamic_variants.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_dynamic_variants',function(require){'use strict';var tour=require('web_tour.tour');var base=require('web_editor.base');tour.register('tour_shop_dynamic_variants',{test:true,url:'/shop?search=Dynamic Product',wait_for:base.ready(),},[{content:"select Dynamic Product",trigger:'.oe_product_cart a:containsExact("Dynamic Product")',},{content:"click on the second variant",trigger:'input[data-attribute_name="Dynamic Attribute"][data-value_name="Dynamic Value 2"]',},{content:"wait for variant to be loaded",trigger:'.oe_price .oe_currency_value:contains("0.00")',run:function(){},},{content:"click add to cart",extra_trigger:'body:has(input[type="hidden"][name="product_id"][value=0])',trigger:'#add_to_cart',},{content:"check the variant is in the cart",trigger:'td.td-product_name:contains(Dynamic Product (Dynamic Value 2))',},]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_deleted_archived_variants.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_deleted_archived_variants',function(require){'use strict';var tour=require('web_tour.tour');var base=require('web_editor.base');tour.register('tour_shop_deleted_archived_variants',{test:true,url:'/shop?search=Test Product 2',wait_for:base.ready(),},[{content:"check price on /shop (template price)",trigger:'.oe_product_cart .oe_currency_value:contains("1.00")',},{content:"select Test Product 2",trigger:'.oe_product_cart a:containsExact("Test Product 2")',},{content:"check price (3rd variant)",trigger:'.oe_currency_value:contains("31.00")'},{content:"click on the second variant",trigger:'input[data-attribute_name="My Attribute"][data-value_name="My Value 2"]',},{content:"check combination is not possible",trigger:'.js_main_product.css_not_available .css_not_available_msg:contains("This combination does not exist.")'},{content:"click on the 3rd variant to reset the warning",trigger:'input[data-attribute_name="My Attribute"][data-value_name="My Value 3"]',},{content:"check price (3rd variant)",trigger:'.oe_currency_value:contains("31.00")'},{content:"click on the first variant",trigger:'input[data-attribute_name="My Attribute"][data-value_name="My Value 1"]',},{content:"check combination is not possible",trigger:'.js_main_product.css_not_available .css_not_available_msg:contains("This combination does not exist.")'},{content:"check add to cart not possible",trigger:'#add_to_cart.disabled',run:function(){},}]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_list_view_b2c.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_list_view_b2c',function(require){'use strict';var base=require('web_editor.base');var rpc=require('web.rpc');var tour=require('web_tour.tour');tour.register('shop_list_view_b2c',{test:true,url:'/shop?search=Test Product',wait_for:base.ready()},[{content:"activate b2c",trigger:'body',run:function(){return rpc.query({model:'res.config.settings',method:'create',args:[{'auth_signup_uninvited':'b2c','show_line_subtotals_tax_selection':'tax_included','group_show_line_subtotals_tax_excluded':false,'group_show_line_subtotals_tax_included':true,}],}).then(function(resId){return rpc.query({model:'res.config.settings',method:'execute',args:[[resId]],}).then(function(){window.location.reload();});});},},{content:"check price on /shop",trigger:'.oe_product_cart .oe_currency_value:contains("825.00")',run:function(){},},{content:"select product",trigger:'.oe_product_cart a:contains("Test Product")',},{content:"check list view of variants is disabled initially (when on /product page)",trigger:'body:not(:has(.js_product_change))',extra_trigger:'#product_details',run:function(){},},{content:"open customize menu",trigger:'#customize-menu > a',extra_trigger:'body:not(.notReady)',},{content:"click on 'List View of Variants'",trigger:'#customize-menu a:contains(List View of Variants)',},{content:"check page loaded after list of variant customization enabled",trigger:'.js_product_change',run:function(){},},{context:"check variant price",trigger:'.custom-radio:contains("Aluminium") .badge:contains("+") .oe_currency_value:contains("55.44")',run:function(){},},{content:"check price is 825",trigger:'.product_price .oe_price .oe_currency_value:containsExact("825.00")',run:function(){},},{content:"switch to another variant",trigger:'.js_product label:contains("Aluminium")',},{content:"verify that price has changed when changing variant",trigger:'.product_price .oe_price .oe_currency_value:containsExact("880.44")',run:function(){},},{content:"click on 'Add to Cart' button",trigger:'a:contains(Add to Cart)',},{content:"check price on /cart",trigger:'#cart_products .oe_currency_value:containsExact("880.44")',run:function(){},},]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_no_variant_attribute.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_no_variant_attribute',function(require){'use strict';var tour=require('web_tour.tour');var base=require('web_editor.base');tour.register('tour_shop_no_variant_attribute',{test:true,url:'/shop?search=Test Product 3',wait_for:base.ready(),},[{content:"select Test Product 3",trigger:'.oe_product_cart a:containsExact("Test Product 3")',},{content:"check price",trigger:'.oe_currency_value:contains("1.00")',run:function(){},},{content:"add to cart",trigger:'a:contains(Add to Cart)',},{content:"check no_variant value is present",trigger:'.td-product_name:contains(No Variant Attribute: No Variant Value)',extra_trigger:'#cart_products',run:function(){},},{content:"check price is correct",trigger:'.td-price:contains(11.0)',run:function(){},},]);});;

/* /website_sale/static/src/js/website_sale_options.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_options.website_sale',function(require){'use strict';var core=require('web.core');var _t=core._t;var OptionalProductsModal=require('sale.OptionalProductsModal');var weContext=require('web_editor.context');var sAnimations=require('website.content.snippets.animation');var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');require('website_sale.website_sale');sAnimations.registry.WebsiteSaleOptions=sAnimations.Class.extend(ProductConfiguratorMixin,{selector:'.oe_website_sale',read_events:{'click #add_to_cart, #products_grid .product_price .a-submit':'async _onClickAdd',},init:function(){this._super.apply(this,arguments);this.isWebsite=true;delete this.events['change .css_attribute_color input'];delete this.events['change .main_product:not(.in_cart) input.js_quantity'];delete this.events['change [data-attribute_exclusions]'];},_onClickAdd:function(ev){ev.preventDefault();return this._handleAdd($(ev.currentTarget).closest('form'));},_handleAdd:function($form){var self=this;this.$form=$form;this.isWebsite=true;var productSelector=['input[type="hidden"][name="product_id"]','input[type="radio"][name="product_id"]:checked'];var productReady=this.selectOrCreateProduct($form,parseInt($form.find(productSelector.join(', ')).first().val(),10),$form.find('.product_template_id').val(),false);return productReady.done(function(productId){$form.find(productSelector.join(', ')).val(productId);self.rootProduct={product_id:productId,quantity:parseFloat($form.find('input[name="add_qty"]').val()||1),product_custom_attribute_values:self.getCustomVariantValues($form.find('.js_product')),variant_values:self.getSelectedVariantValues($form.find('.js_product')),no_variant_attribute_values:self.getNoVariantAttributeValues($form.find('.js_product'))};self.optionalProductsModal=new OptionalProductsModal($form,{rootProduct:self.rootProduct,isWebsite:true,okButtonText:_t('Proceed to Checkout'),cancelButtonText:_t('Continue Shopping'),title:_t('Add to cart')}).open();self.optionalProductsModal.on('options_empty',null,self._onModalOptionsEmpty.bind(self));self.optionalProductsModal.on('update_quantity',null,self._onOptionsUpdateQuantity.bind(self));self.optionalProductsModal.on('confirm',null,self._onModalConfirm.bind(self));self.optionalProductsModal.on('back',null,self._onModalBack.bind(self));return self.optionalProductsModal.opened();});},_onModalOptionsEmpty:function(){var $productCustomVariantValues=$('<input>',{name:'product_custom_attribute_values',type:"hidden",value:JSON.stringify(this.rootProduct.product_custom_attribute_values)});this.$form.append($productCustomVariantValues);var $productNoVariantAttributeValues=$('<input>',{name:'no_variant_attribute_values',type:"hidden",value:JSON.stringify(this.rootProduct.no_variant_attribute_values)});this.$form.append($productNoVariantAttributeValues);this.$form.trigger('submit',[true]);},_onOptionsUpdateQuantity:function(quantity){var $qtyInput=this.$form.find('.js_main_product input[name="add_qty"]').first();if($qtyInput.length){$qtyInput.val(quantity).trigger('change');}else{this.optionalProductsModal.triggerVariantChange(this.optionalProductsModal.$el);}},_onModalBack:function(){this._onModalSubmit(false);},_onModalConfirm:function(){this._onModalSubmit(true);},_onModalSubmit:function(goToShop){var customValues=JSON.stringify(this.optionalProductsModal.getSelectedProducts());this.$form.ajaxSubmit({url:'/shop/cart/update_option',data:{lang:weContext.get().lang,custom_values:customValues},success:function(quantity){if(goToShop){var path=window.location.pathname.replace(/shop([\/?].*)?$/,"shop/cart");window.location.pathname=path;}
var $quantity=$(".my_cart_quantity");$quantity.parent().parent().removeClass("d-none",!quantity);$quantity.html(quantity).hide().fadeIn(600);}});},});return sAnimations.registry.WebsiteSaleOptions;});;

/* /product_tiered_pricing/static/src/js/pricelist.js defined in bundle 'web.assets_frontend' */
odoo.define('product_tiered_pricing.pricelist_js',function(require){"use strict";require('web.dom_ready');var base=require("web_editor.base");var ajax=require('web.ajax');var utils=require('web.utils');var core=require('web.core');var config=require('web.config');require("website.content.zoomodoo");var _t=core._t;function CusgetSelectedVariantValues($container){var values=[];var unchangedValues=$container.find('div.oe_unchanged_value_ids').data('unchanged_value_ids')||[];var variantsValuesSelectors=['input.js_variant_change:checked','select.js_variant_change'];_.each($container.find(variantsValuesSelectors.join(', ')),function(el){values.push(+$(el).val());});return values.concat(unchangedValues);}
if(!$('.oe_website_sale').length){return $.Deferred().reject("DOM doesn't contain '.oe_website_sale'");}
$(document).ready(function(){var product=$('.product_id').attr('value');if(product){var attribute=ajax.jsonRpc("/shop/product_pricelist",'call',{'product':product,}).then(function(res){$('.product_pricelist').html(res);return true;});return true;}});setTimeout(function(){$('.oe_website_sale').on('change','ul[data-attribute_exclusions]',function(ev){var self=this
setTimeout(function(){var $parent=$(ev.target).closest('.js_product');var combination=CusgetSelectedVariantValues($parent);console.log('combinationcombinationcombination---',combination)
var product_id=$('input.product_id').val();if(product_id){var attributes=ajax.jsonRpc("/shop/product_pricelist",'call',{'product':product_id,'combination':combination,}).then(function(res){$('.product_pricelist').html(res);return true;});return true;}},500)});},500)});;

/* /website_sale_stock/static/src/js/product_configurator_mixin.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_stock.ProductConfiguratorMixin',function(require){'use strict';var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');var sAnimations=require('website.content.snippets.animation');var ajax=require('web.ajax');var core=require('web.core');var QWeb=core.qweb;var xml_load=ajax.loadXML('/website_sale_stock/static/src/xml/website_sale_stock_product_availability.xml',QWeb);ProductConfiguratorMixin._onChangeCombinationStock=function(ev,$parent,combination){var product_id=0;if($parent.find('input.product_id:checked').length){product_id=$parent.find('input.product_id:checked').val();}else{product_id=$parent.find('.product_id').val();}
var isMainProduct=combination.product_id&&($parent.is('.js_main_product')||$parent.is('.main_product'))&&combination.product_id===parseInt(product_id);if(!this.isWebsite||!isMainProduct){return;}
var qty=$parent.find('input[name="add_qty"]').val();$parent.find('#add_to_cart').removeClass('out_of_stock');if(combination.product_type==='product'&&_.contains(['always','threshold'],combination.inventory_availability)){combination.virtual_available-=parseInt(combination.cart_qty);if(combination.virtual_available<0){combination.virtual_available=0;}
if(qty>combination.virtual_available){var $input_add_qty=$parent.find('input[name="add_qty"]');qty=combination.virtual_available||1;$input_add_qty.val(qty);}
if(qty>combination.virtual_available||combination.virtual_available<1||qty<1){$parent.find('#add_to_cart').addClass('disabled out_of_stock');}}
xml_load.then(function(){$('.oe_website_sale').find('.availability_message_'+combination.product_template).remove();var $message=$(QWeb.render('website_sale_stock.product_availability',combination));$('div.availability_messages').html($message);});};sAnimations.registry.WebsiteSale.include({_onChangeCombination:function(){this._super.apply(this,arguments);ProductConfiguratorMixin._onChangeCombinationStock.apply(this,arguments);}});return ProductConfiguratorMixin;});;

/* /website_sale_delivery/static/src/js/website_sale_delivery.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_delivery.checkout',function(require){'use strict';require('web.dom_ready');var ajax=require('web.ajax');var core=require('web.core');var _t=core._t;var concurrency=require('web.concurrency');var dp=new concurrency.DropPrevious();var $pay_button=$('#o_payment_form_pay');var _onCarrierUpdateAnswer=function(result){var $amount_delivery=$('#order_delivery span.oe_currency_value');var $amount_untaxed=$('#order_total_untaxed span.oe_currency_value');var $amount_tax=$('#order_total_taxes span.oe_currency_value');var $amount_total=$('#order_total span.oe_currency_value');var $carrier_badge=$('#delivery_carrier input[name="delivery_type"][value='+result.carrier_id+'] ~ .badge:not(.o_delivery_compute)');var $compute_badge=$('#delivery_carrier input[name="delivery_type"][value='+result.carrier_id+'] ~ .o_delivery_compute');var $discount=$('#order_discounted');if($discount&&result.new_amount_order_discounted){$discount.find('.oe_currency_value').text(result.new_amount_order_discounted);$('#delivery_carrier .badge').text(_t('Free'));}
if(result.status===true){$amount_delivery.text(result.new_amount_delivery);$amount_untaxed.text(result.new_amount_untaxed);$amount_tax.text(result.new_amount_tax);$amount_total.text(result.new_amount_total);$carrier_badge.children('span').text(result.new_amount_delivery);$carrier_badge.removeClass('d-none');$compute_badge.addClass('d-none');$pay_button.data('disabled_reasons').carrier_selection=false;$pay_button.prop('disabled',_.contains($pay_button.data('disabled_reasons'),true));}
else{console.error(result.error_message);$compute_badge.text(result.error_message);$amount_delivery.text(result.new_amount_delivery);$amount_untaxed.text(result.new_amount_untaxed);$amount_tax.text(result.new_amount_tax);$amount_total.text(result.new_amount_total);}};var _onCarrierClick=function(ev){$pay_button.data('disabled_reasons',$pay_button.data('disabled_reasons')||{});$pay_button.data('disabled_reasons').carrier_selection=true;$pay_button.prop('disabled',true);var carrier_id=$(ev.currentTarget).val();var values={'carrier_id':carrier_id};dp.add(ajax.jsonRpc('/shop/update_carrier','call',values)).then(_onCarrierUpdateAnswer);};var $carriers=$("#delivery_carrier input[name='delivery_type']");$carriers.click(_onCarrierClick);if($carriers.length>0){$carriers.filter(':checked').click();}
$(".oe_website_sale select[name='shipping_id']").on('change',function(){var value=$(this).val();var $provider_free=$("select[name='country_id']:not(.o_provider_restricted), select[name='state_id']:not(.o_provider_restricted)");var $provider_restricted=$("select[name='country_id'].o_provider_restricted, select[name='state_id'].o_provider_restricted");if(value===0){$provider_free.hide().attr('disabled',true);$provider_restricted.show().attr('disabled',false).change();}else{$provider_free.show().attr('disabled',false).change();$provider_restricted.hide().attr('disabled',true);}});});;

/* /website_sale_delivery/static/src/js/website_free_delivery_tour.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_delivery.tour',function(require){'use strict';var base=require('web_editor.base');var tour=require("web_tour.tour");tour.register('check_free_delivery',{test:true,url:'/shop?search=conference chair',wait_for:base.ready(),},[{content:"select conference chair",trigger:'.oe_product_cart:first a:contains("Conference Chair")',},{content:"click on add to cart",extra_trigger:'label:contains(Steel) input:propChecked',trigger:'#product_detail form[action^="/shop/cart/update"] .btn-primary',},{content:"click in modal on 'Proceed to checkout' button",trigger:'button:contains("Proceed to Checkout")',},{content:"go to checkout",extra_trigger:'#cart_products input.js_quantity:propValue(1)',trigger:'a[href*="/shop/checkout"]',},{content:"Check Free Delivery value to be zero",trigger:"#delivery_carrier span:contains('0.0')"},]);});;

/* /website_animate/static/src/js/o_animate.frontend.js defined in bundle 'web.assets_frontend' */
odoo.define('website_animate.o_animate_frontend',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');var base=require('web_editor.base');var WebsiteAnimate={win:{},items:{},offsetRatio:0.3,offsetMin:10,start:function(){var self=this;self.items=$(".o_animate");self.items.each(function(){var $el=$(this);self.reset_animation($el);});setTimeout(function(){self.attach_handlers();});},attach_handlers:function(){var self=this;var lastScroll=0;$(window).on("resize.o_animate",function(){self.win.h=$(window).height();$(window).trigger("scroll");}).trigger("resize").on("scroll.o_animate, slid.bs.carousel",(_.throttle(function(){var windowTop=$(window).scrollTop();var windowBottom=windowTop+self.win.h;var direction=(windowTop<lastScroll)?-1:1;lastScroll=windowTop;self.items.each(function(){var $el=$(this);var elHeight=$el.height();var elOffset=direction*Math.max((elHeight*self.offsetRatio),self.offsetMin);var state=$el.css("animation-play-state");var transformMatrix=$el.css('transform').replace(/[^0-9\-.,]/g,'').split(',');var transformOffset=transformMatrix[13]||transformMatrix[5];var elTop=$el.offset().top-transformOffset;var visible=windowBottom>(elTop+elOffset)&&windowTop<(elTop+elHeight-elOffset);if(visible&&(state==="paused")){$el.addClass("o_visible");self.start_animation($el);}else if(!(visible)&&$el.hasClass("o_animate_both_scroll")&&(state==="running")){$el.removeClass("o_visible");self.reset_animation($el);}});},100))).trigger("scroll");},reset_animation:function($el){var anim_name=$el.css("animation-name");$el.css({"animation-name":"dummy-none","animation-play-state":""}).removeClass("o_animated o_animating");setTimeout(function(){$el.css({"animation-name":anim_name,"animation-play-state":"paused"});},0);},start_animation:function($el){if($.browser.safari){$el.toggleClass('d-none').toggleClass('d-none',1);}
setTimeout(function(){$el.css({"animation-play-state":"running"}).addClass("o_animating").one('webkitAnimationEnd oanimationend msAnimationEnd animationend',function(e){$el.addClass("o_animated").removeClass("o_animating");$(window).trigger("resize");});});},};base.ready().then(function(){WebsiteAnimate.start();$(".o_animate").css("visibility","visible");});sAnimation.registry.o_animate=sAnimation.Class.extend({selector:'.o_animation',destroy:function(){this._super.apply(this,arguments);var old_animation_classes="o_animation o_displayed o_displayed_top o_displayed_middle o_displayed_bottom o_visible o_visible_top o_visible_middle o_visible_bottom";$(".o_fade_in").addClass("o_animate o_anim_fade_in").removeClass("o_fade_in");$(".o_fade_in_down").addClass("o_animate o_anim_fade_in_down").removeClass("o_fade_in_down");$(".o_fade_in_left").addClass("o_animate o_anim_fade_in_left").removeClass("o_fade_in_left");$(".o_fade_in_right").addClass("o_animate o_anim_fade_in_right").removeClass("o_fade_in_right");$(".o_fade_in_up").addClass("o_animate o_anim_fade_in_up").removeClass("o_fade_in_up");this.$target.removeClass(old_animation_classes);},});return WebsiteAnimate;});;

/* /website_crm_partner_assign/static/src/js/crm_partner_assign.js defined in bundle 'web.assets_frontend' */
odoo.define('crm.partner_assign',function(require){'use strict';var rpc=require('web.rpc');var weContext=require('web_editor.context');require('web.dom_ready');var interested_form=$('.interested_partner_assign_form');var desinterested_form=$('.desinterested_partner_assign_form');var opp_stage_buttons=$('.opp-stage-button');var new_opp_form=$('.new_opp_form');if(!interested_form.length&&!desinterested_form.length&&!opp_stage_buttons.length&&!new_opp_form.length){return $.Deferred().reject("DOM doesn't contain website_crm_partner_assign elements");}
$('.interested_partner_assign_confirm').on('click',function(e){var $btn=$(this);if($('.interested_partner_assign_form .comment_interested').val()&&$('.interested_partner_assign_form .contacted_interested').prop('checked')){$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:"partner_interested",args:[[parseInt($('.interested_partner_assign_form .assign_lead_id').val())],$('.interested_partner_assign_form .comment_interested').val()],context:weContext.get(),}).then(function(){window.location.href='/my/leads';}).always(function(){$btn.prop('disabled',false);});}else{$('.interested_partner_assign_form .error_partner_assign_interested').css('display','block');}
return false;});$('.desinterested_partner_assign_confirm').on('click',function(){var $btn=$(this);$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:'partner_desinterested',args:[[parseInt($('.desinterested_partner_assign_form .assign_lead_id').val())],$('.desinterested_partner_assign_form .comment_desinterested').val(),$('.desinterested_partner_assign_form .contacted_desinterested').prop('checked'),$('.desinterested_partner_assign_form .customer_mark_spam').prop('checked'),],context:weContext.get(),}).then(function(){window.location.href='/my/leads';}).always(function(){$btn.prop('disabled',false);});return false;});opp_stage_buttons.on('click',function(e){var $btn=$(this);$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:'write',args:[[parseInt(e.currentTarget.getAttribute('opp'))],{stage_id:parseInt(e.currentTarget.getAttribute('data')),},],context:_.extend({website_partner_assign:1},weContext.get()),}).fail(function(){$btn.prop('disabled',false);}).done(function(){window.location.reload();});});$('.edit_contact_form .country_id').on('change',function(){var country_id=$('.edit_contact_form .country_id').find(":selected").attr('value');$(".edit_contact_form .state[country!="+country_id+"]").css('display','none');$(".edit_contact_form .state[country="+country_id+"]").css('display','block');});$('.edit_contact_confirm').on('click',function(){var $btn=$(this);$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:"write",args:[[parseInt($('.edit_contact_form .opportunity_id').val())],{partner_name:$('.edit_contact_form .partner_name').val(),phone:$('.edit_contact_form .phone').val(),mobile:$('.edit_contact_form .mobile').val(),email_from:$('.edit_contact_form .email_from').val(),street:$('.edit_contact_form .street').val(),street2:$('.edit_contact_form .street2').val(),city:$('.edit_contact_form .city').val(),zip:$('.edit_contact_form .zip').val(),state_id:parseInt($('.edit_contact_form .state_id').find(":selected").attr('value')),country_id:parseInt($('.edit_contact_form .country_id').find(":selected").attr('value')),}],context:weContext.get(),}).fail(function(){$btn.prop('disabled',false);}).done(function(){window.location.reload();});return false;});$('.new_opp_confirm').on('click',function(e){var $btn=$(this);$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:'create_opp_portal',args:[{contact_name:$('.new_opp_form .contact_name').val(),title:$('.new_opp_form .title').val(),description:$('.new_opp_form .description').val(),}],context:weContext.get(),}).done(function(response){if(response.errors){$('#new-opp-dialog .alert').remove();$('#new-opp-dialog div:first').prepend("<div class='alert alert-danger'>"+response.errors+"</div>");$btn.prop('disabled',false);}
else{window.location='/my/opportunity/'+response.id;}}).fail(function(){$btn.prop('disabled',false);});return false;});$('.edit_opp_confirm').on('click',function(){var $btn=$(this);$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:'update_lead_portal',args:[[parseInt($('.edit_opp_form .opportunity_id').val())],{date_deadline:$('.edit_opp_form .date_deadline').val(),planned_revenue:parseFloat($('.edit_opp_form .planned_revenue').val()),probability:parseFloat($('.edit_opp_form .probability').val()),activity_type_id:parseInt($('.edit_opp_form .next_activity').find(":selected").attr('data')),activity_summary:$('.edit_opp_form .activity_summary').val(),activity_date_deadline:$('.edit_opp_form .activity_date_deadline').val(),priority:$('input[name="PriorityRadioOptions"]:checked').val(),}],context:weContext.get(),}).fail(function(){$btn.prop('disabled',false);}).done(function(){window.location.reload();});return false;});$('.edit_opp_form .next_activity').on('change',function(){var selected=$('.edit_opp_form .next_activity').find(":selected");if(selected.attr('activity_summary')){$('.edit_opp_form .activity_summary').val(selected.attr('activity_summary'));}
if(selected.attr('days')){var date_now=moment();var days=parseInt(selected.attr('days'));var date=date_now.add(days,'days');$('.edit_opp_form .activity_date_deadline').val(date.format('YYYY-MM-DD'));}});$("div.input-group span.fa-calendar").on('click',function(e){$(e.currentTarget).closest("div.date").datetimepicker({icons:{time:'fa fa-clock-o',date:'fa fa-calendar',up:'fa fa-chevron-up',down:'fa fa-chevron-down'},});});});;

/* /website_sale_wishlist/static/src/js/website_sale_wishlist.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_wishlist.wishlist',function(require){"use strict";var sAnimations=require('website.content.snippets.animation');var wSaleUtils=require('website_sale.utils');var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');sAnimations.registry.ProductWishlist=sAnimations.Class.extend(ProductConfiguratorMixin,{selector:'.oe_website_sale',read_events:{'click #my_wish':'_onClickMyWish','click .o_add_wishlist, .o_add_wishlist_dyn':'_onClickAddWish','change input.product_id':'_onChangeVariant','change input.js_product_change':'_onChangeProduct','click .wishlist-section .o_wish_rm':'_onClickWishRemove','click .wishlist-section .o_wish_add':'_onClickWishAdd',},events:sAnimations.Class.events,init:function(parent){this._super.apply(this,arguments);this.wishlistProductIDs=[];},willStart:function(){var self=this;var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
var wishDef=$.get('/shop/wishlist',{count:1,}).then(function(res){self.wishlistProductIDs=JSON.parse(res);});return $.when(def,wishDef);},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
this._updateWishlistView();if(this.$('input.js_product_change').length){this.$('input.js_product_change:checked').first().trigger('change');}else{this.$('input.product_id').first().trigger('change');}
return def;},_addNewProducts:function($el){var self=this;var productID=$el.data('product-product-id');if($el.hasClass('o_add_wishlist_dyn')){productID=$el.parent().find('.product_id').val();if(!productID){productID=$el.parent().find('input:checked').first().val();}
productID=parseInt(productID,10);}
var $form=$el.closest('form');var templateId=$form.find('.product_template_id').val();if(!templateId){templateId=$el.data('product-template-id');}
$el.prop("disabled",true).addClass('disabled');var productReady=this.selectOrCreateProduct($el.closest('form'),productID,templateId,false);productReady.done(function(productId){productId=parseInt(productId,10);if(productId&&!_.contains(self.wishlistProductIDs,productId)){return self._rpc({route:'/shop/wishlist/add',params:{product_id:productId,},}).then(function(){self.wishlistProductIDs.push(productId);self._updateWishlistView();wSaleUtils.animateClone($('#my_wish'),$el.closest('form'),25,40);}).fail(function(){$el.prop("disabled",false).removeClass('disabled');});}}).fail(function(){$el.prop("disabled",false).removeClass('disabled');});},_updateWishlistView:function(){if(this.wishlistProductIDs.length>0){$('#my_wish').show();$('.my_wish_quantity').text(this.wishlistProductIDs.length);}else{$('#my_wish').hide();}},_removeWish:function(e,deferred_redirect){var tr=$(e.currentTarget).parents('tr');var wish=tr.data('wish-id');var product=tr.data('product-id');var self=this;this._rpc({route:'/shop/wishlist/remove/'+wish,}).done(function(){$(tr).hide();});this.wishlistProductIDs=_.without(this.wishlistProductIDs,product);if(this.wishlistProductIDs.length===0){deferred_redirect=deferred_redirect?deferred_redirect:$.Deferred();deferred_redirect.then(function(){self._redirectNoWish();});}
this._updateWishlistView();},_addOrMoveWish:function(e){var tr=$(e.currentTarget).parents('tr');var product=tr.data('product-id');$('#my_cart').removeClass('d-none');wSaleUtils.animateClone($('#my_cart'),tr,25,40);if($('#b2b_wish').is(':checked')){return this._addToCart(product,tr.find('add_qty').val()||1);}else{var adding_deffered=this._addToCart(product,tr.find('add_qty').val()||1);this._removeWish(e,adding_deffered);return adding_deffered;}},_addToCart:function(productID,qty_id){return this._rpc({route:"/shop/cart/update_json",params:{product_id:parseInt(productID,10),add_qty:parseInt(qty_id,10),display:false,},}).then(function(resp){if(resp.warning){if(!$('#data_warning').length){$('.wishlist-section').prepend('<div class="mt16 alert alert-danger alert-dismissable" role="alert" id="data_warning"></div>');}
var cart_alert=$('.wishlist-section').parent().find('#data_warning');cart_alert.html('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> '+resp.warning);}
$('.my_cart_quantity').html(resp.cart_quantity||'<i class="fa fa-warning" /> ');});},_redirectNoWish:function(){window.location.href='/shop/cart';},_onClickMyWish:function(){if(this.wishlistProductIDs.length===0){this._updateWishlistView();this._redirectNoWish();return;}
window.location='/shop/wishlist';},_onClickAddWish:function(ev){this._addNewProducts($(ev.currentTarget));},_onChangeVariant:function(ev){var $input=$(ev.target);var $parent=$input.closest('.js_product');var $el=$parent.find("[data-action='o_wishlist']");if(!_.contains(this.wishlistProductIDs,parseInt($input.val(),10))){$el.prop("disabled",false).removeClass('disabled').removeAttr('disabled');}else{$el.prop("disabled",true).addClass('disabled').attr('disabled','disabled');}
$el.data('product-product-id',parseInt($input.val(),10));},_onChangeProduct:function(ev){var productID=ev.currentTarget.value;var $el=$(ev.target).closest('.js_add_cart_variants').find("[data-action='o_wishlist']");if(!_.contains(this.wishlistProductIDs,parseInt(productID,10))){$el.prop("disabled",false).removeClass('disabled').removeAttr('disabled');}else{$el.prop("disabled",true).addClass('disabled').attr('disabled','disabled');}
$el.data('product-product-id',productID);},_onClickWishRemove:function(ev){this._removeWish(ev,false);},_onClickWishAdd:function(ev){var self=this;this.$('.wishlist-section .o_wish_add').addClass('disabled');this._addOrMoveWish(ev).then(function(){self.$('.wishlist-section .o_wish_add').removeClass('disabled');});},});});;

/* /website_sale_wishlist/static/src/js/website_sale_tour_wishlist.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_wishlist.tour',function(require){'use strict';var rpc=require('web.rpc');var tour=require("web_tour.tour");var base=require("web_editor.base");tour.register('shop_wishlist',{test:true,url:'/shop',wait_for:base.ready(),},[{content:"click on add to wishlist",trigger:'.o_add_wishlist',},{content:"go to wishlist",extra_trigger:'a[href="/shop/wishlist"] .badge:contains(1)',trigger:'a[href="/shop/wishlist"]',},{content:"remove first item in whishlist",trigger:'.o_wish_rm:first',},{content:"go back to the store",trigger:"a[href='/shop']"},{content:"click on add to wishlist",trigger:'.o_add_wishlist',},{content:"check value of wishlist and go to login",extra_trigger:".my_wish_quantity:contains(1)",trigger:'a[href="/web/login"]',},{content:"submit login",trigger:".oe_login_form",run:function(){$('.oe_login_form input[name="login"]').val("admin");$('.oe_login_form input[name="password"]').val("admin");$('.oe_login_form input[name="redirect"]').val("/shop");$('.oe_login_form').submit();},},{content:"check that logged in",trigger:"li span:contains('Mitchell Admin')",run:function(){},},{content:"click on Customizable Desk",trigger:'.oe_product_cart a:contains("Customizable Desk")',},{content:"check the first variant is already in wishlist",trigger:'#product_detail .o_add_wishlist_dyn:disabled',run:function(){},},{content:"change variant",extra_trigger:'#product_detail label:contains(Aluminium) input',trigger:'label:contains(Aluminium) input',},{content:"wait button enable and click on add to wishlist",extra_trigger:'#product_detail .o_add_wishlist_dyn:not(:disabled)',trigger:'#product_detail .o_add_wishlist_dyn',},{content:"check that wishlist contains 2 items and go to wishlist",extra_trigger:'a[href="/shop/wishlist"] .badge:contains(2)',trigger:'a[href="/shop/wishlist"]',},{content:"remove Customizable Desk",trigger:'tr:contains("Customizable Desk") .o_wish_rm:first',},{content:"check that wishlist contains 1 item",trigger:".my_wish_quantity:contains(1)",run:function(){},},{content:"check B2B wishlist mode",trigger:"input#b2b_wish",},{content:"add item to cart",trigger:'.o_wish_add:eq(1)',},{content:"check that cart contains 1 item",trigger:".my_cart_quantity:contains(1)",run:function(){},},{content:"check that wishlist contains 1 item",trigger:".my_wish_quantity:contains(1)",run:function(){},},{content:"remove B2B wishlist mode",trigger:"input#b2b_wish",},{content:"add last item to cart",trigger:'.o_wish_add:eq(1)',},{content:"check that user is redirect - wishlist is empty",trigger:"#wrap #cart_products",run:function(){},},{content:"check that cart contains 2 items",trigger:".my_cart_quantity:contains(2)",run:function(){},},{content:"check that wishlist is empty and no more visible",trigger:":not(:has(.my_wish_quantity:visible))",run:function(){},},{content:"Create a product with dynamic attribute and its values.",trigger:'body',run:function(){rpc.query({model:'product.attribute',method:'create',args:[{'name':"color",'type':'color','create_variant':'dynamic'}],}).then(function(attributeId){return rpc.query({model:'product.template',method:'create',args:[{'name':"Bottle",'is_published':true,'attribute_line_ids':[[0,0,{'attribute_id':attributeId,'value_ids':[[0,0,{'name':"red",'attribute_id':attributeId,}],[0,0,{'name':"blue",'attribute_id':attributeId,}],[0,0,{'name':"black",'attribute_id':attributeId,}],]}]],}],});}).then(function(){window.location.href='/web/session/logout?redirect=/shop?search=Bottle';});},},{content:"Add Bottle to wishlist from /shop",extra_trigger:'.oe_product_cart:contains("Bottle")',trigger:'.oe_product_cart:contains("Bottle") .o_add_wishlist',},{content:"Check that wishlist contains 1 item",trigger:'.my_wish_quantity:contains(1)',run:function(){},},{content:"Click on product",extra_trigger:'.oe_product_cart:contains("Bottle") .o_add_wishlist.disabled',trigger:'.oe_product_cart a:contains("Bottle")',},{content:"Select Bottle with second variant from /product",trigger:'.js_variant_change[data-value_name="blue"]',},{content:"Add product in wishlist",extra_trigger:'#product_detail .o_add_wishlist_dyn:not(".disabled")',trigger:'#product_detail .o_add_wishlist_dyn',},{content:"Select Bottle with third variant from /product",trigger:'.js_variant_change[data-value_name="black"]',},{content:"Add product in wishlist",extra_trigger:'#product_detail .o_add_wishlist_dyn:not(".disabled")',trigger:'#product_detail .o_add_wishlist_dyn',},{content:"Check that wishlist contains 3 items and go to wishlist",trigger:'.my_wish_quantity:contains(3)',run:function(){window.location.href='/shop/wishlist';},},{content:"Check wishlist contains first variant",trigger:'#o_comparelist_table tr:contains("red")',run:function(){},},{content:"Check wishlist contains second variant",trigger:'#o_comparelist_table tr:contains("blue")',run:function(){},},{content:"Check wishlist contains third variant, then go to login",trigger:'#o_comparelist_table tr:contains("black")',run:function(){window.location.href="/web/login";},},{content:"Submit login as admin",trigger:'.oe_login_form',run:function(){$('.oe_login_form input[name="login"]').val("admin");$('.oe_login_form input[name="password"]').val("admin");$('.oe_login_form input[name="redirect"]').val("/");$('.oe_login_form').submit();},},{content:"Archive the first variant",trigger:'#top_menu:contains("Mitchell Admin")',run:function(){rpc.query({model:'product.product',method:'search',args:[[['name','=',"Bottle"]]],}).then(function(productIds){return rpc.query({model:'product.product',method:'write',args:[productIds[0],{active:false}],});}).then(function(){window.location.href='/web/session/logout?redirect=/shop?search=Bottle';});},},{content:"Check there is wishlist button on product from /shop",extra_trigger:'.js_sale',trigger:'.oe_product_cart:contains("Bottle") .o_add_wishlist',run:function(){},},{content:"Click on product",trigger:'.oe_product_cart a:contains("Bottle")',},{content:"Select Bottle with first variant (red) from /product",trigger:'.js_variant_change[data-value_name="red"]',},{content:"Check there is no wishlist button when selecting impossible variant",trigger:'#product_detail:not(:has(.o_add_wishlist))',run:function(){},},{content:"Select Bottle with second variant (blue) from /product",trigger:'.js_variant_change[data-value_name="blue"]',},{content:"Click on wishlist when selecting a possible variant from /product",trigger:'#product_detail .o_add_wishlist_dyn:not(.disabled)',},{content:"Check product added to wishlist and go to login",trigger:'.my_wish_quantity:contains(1)',run:function(){window.location.href="/web/login";},},{content:"Submit login",trigger:'.oe_login_form',run:function(){$('.oe_login_form input[name="login"]').val("admin");$('.oe_login_form input[name="password"]').val("admin");$('.oe_login_form input[name="redirect"]').val("/");$('.oe_login_form').submit();},},{content:"Archive all variants",trigger:'#top_menu:contains("Mitchell Admin")',run:function(){rpc.query({model:'product.product',method:'search',args:[[['name','=',"Bottle"]]],}).then(function(productIds){return rpc.query({model:'product.product',method:'write',args:[productIds,{active:false}],});}).then(function(){window.location.href='/web/session/logout?redirect=/shop?search=Bottle';});}},{content:"Check that there is no wishlist button from /shop",extra_trigger:'.js_sale',trigger:'.oe_product_cart:contains("Bottle"):not(:has(.o_add_wishlist))',run:function(){},},{content:"Click on product",trigger:'.oe_product_cart a:contains("Bottle")',},{content:"Check that there is no wishlist button from /product",trigger:'#product_detail:not(:has(.o_add_wishlist_dyn))',run:function(){},},]);});;

/* /website_product_carousel/static/src/js/owl.carousel.js defined in bundle 'web.assets_frontend' */
;(function($,window,document,undefined){function Owl(element,options){this.settings=null;this.options=$.extend({},Owl.Defaults,options);this.$element=$(element);this._handlers={};this._plugins={};this._supress={};this._current=null;this._speed=null;this._coordinates=[];this._breakpoint=null;this._width=null;this._items=[];this._clones=[];this._mergers=[];this._widths=[];this._invalidated={};this._pipe=[];this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null};this._states={current:{},tags:{'initializing':['busy'],'animating':['busy'],'dragging':['interacting']}};$.each(['onResize','onThrottledResize'],$.proxy(function(i,handler){this._handlers[handler]=$.proxy(this[handler],this);},this));$.each(Owl.Plugins,$.proxy(function(key,plugin){this._plugins[key.charAt(0).toLowerCase()+key.slice(1)]=new plugin(this);},this));$.each(Owl.Workers,$.proxy(function(priority,worker){this._pipe.push({'filter':worker.filter,'run':$.proxy(worker.run,this)});},this));this.setup();this.initialize();}
Owl.Defaults={items:3,loop:false,center:false,rewind:false,checkVisibility:true,mouseDrag:true,touchDrag:true,pullDrag:true,freeDrag:false,margin:0,stagePadding:0,merge:false,mergeFit:true,autoWidth:false,startPosition:0,rtl:false,smartSpeed:250,fluidSpeed:false,dragEndSpeed:false,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:window,fallbackEasing:'swing',info:false,nestedItemSelector:false,itemElement:'div',stageElement:'div',refreshClass:'owl-refresh',loadedClass:'owl-loaded',loadingClass:'owl-loading',rtlClass:'owl-rtl',responsiveClass:'owl-responsive',dragClass:'owl-drag',itemClass:'owl-item',stageClass:'owl-stage',stageOuterClass:'owl-stage-outer',grabClass:'owl-grab'};Owl.Width={Default:'default',Inner:'inner',Outer:'outer'};Owl.Type={Event:'event',State:'state'};Owl.Plugins={};Owl.Workers=[{filter:['width','settings'],run:function(){this._width=this.$element.width();}},{filter:['width','items','settings'],run:function(cache){cache.current=this._items&&this._items[this.relative(this._current)];}},{filter:['items','settings'],run:function(){this.$stage.children('.cloned').remove();}},{filter:['width','items','settings'],run:function(cache){var margin=this.settings.margin||'',grid=!this.settings.autoWidth,rtl=this.settings.rtl,css={'width':'auto','margin-left':rtl?margin:'','margin-right':rtl?'':margin};!grid&&this.$stage.children().css(css);cache.css=css;}},{filter:['width','items','settings'],run:function(cache){var width=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,merge=null,iterator=this._items.length,grid=!this.settings.autoWidth,widths=[];cache.items={merge:false,width:width};while(iterator--){merge=this._mergers[iterator];merge=this.settings.mergeFit&&Math.min(merge,this.settings.items)||merge;cache.items.merge=merge>1||cache.items.merge;widths[iterator]=!grid?this._items[iterator].width():width*merge;}
this._widths=widths;}},{filter:['items','settings'],run:function(){var clones=[],items=this._items,settings=this.settings,view=Math.max(settings.items*2,4),size=Math.ceil(items.length/2)*2,repeat=settings.loop&&items.length?settings.rewind?view:Math.max(view,size):0,append='',prepend='';repeat/=2;while(repeat>0){clones.push(this.normalize(clones.length/2,true));append=append+items[clones[clones.length-1]][0].outerHTML;clones.push(this.normalize(items.length-1-(clones.length-1)/2,true));prepend=items[clones[clones.length-1]][0].outerHTML+prepend;repeat-=1;}
this._clones=clones;$(append).addClass('cloned').appendTo(this.$stage);$(prepend).addClass('cloned').prependTo(this.$stage);}},{filter:['width','items','settings'],run:function(){var rtl=this.settings.rtl?1:-1,size=this._clones.length+this._items.length,iterator=-1,previous=0,current=0,coordinates=[];while(++iterator<size){previous=coordinates[iterator-1]||0;current=this._widths[this.relative(iterator)]+this.settings.margin;coordinates.push(previous+current*rtl);}
this._coordinates=coordinates;}},{filter:['width','items','settings'],run:function(){var padding=this.settings.stagePadding,coordinates=this._coordinates,css={'width':Math.ceil(Math.abs(coordinates[coordinates.length-1]))+padding*2,'padding-left':padding||'','padding-right':padding||''};this.$stage.css(css);}},{filter:['width','items','settings'],run:function(cache){var iterator=this._coordinates.length,grid=!this.settings.autoWidth,items=this.$stage.children();if(grid&&cache.items.merge){while(iterator--){cache.css.width=this._widths[this.relative(iterator)];items.eq(iterator).css(cache.css);}}else if(grid){cache.css.width=cache.items.width;items.css(cache.css);}}},{filter:['items'],run:function(){this._coordinates.length<1&&this.$stage.removeAttr('style');}},{filter:['width','items','settings'],run:function(cache){cache.current=cache.current?this.$stage.children().index(cache.current):0;cache.current=Math.max(this.minimum(),Math.min(this.maximum(),cache.current));this.reset(cache.current);}},{filter:['position'],run:function(){this.animate(this.coordinates(this._current));}},{filter:['width','position','items','settings'],run:function(){var rtl=this.settings.rtl?1:-1,padding=this.settings.stagePadding*2,begin=this.coordinates(this.current())+padding,end=begin+this.width()*rtl,inner,outer,matches=[],i,n;for(i=0,n=this._coordinates.length;i<n;i++){inner=this._coordinates[i-1]||0;outer=Math.abs(this._coordinates[i])+padding*rtl;if((this.op(inner,'<=',begin)&&(this.op(inner,'>',end)))||(this.op(outer,'<',begin)&&this.op(outer,'>',end))){matches.push(i);}}
this.$stage.children('.active').removeClass('active');this.$stage.children(':eq('+matches.join('), :eq(')+')').addClass('active');this.$stage.children('.center').removeClass('center');if(this.settings.center){this.$stage.children().eq(this.current()).addClass('center');}}}];Owl.prototype.initializeStage=function(){this.$stage=this.$element.find('.'+this.settings.stageClass);if(this.$stage.length){return;}
this.$element.addClass(this.options.loadingClass);this.$stage=$('<'+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>');this.$element.append(this.$stage.parent());};Owl.prototype.initializeItems=function(){var $items=this.$element.find('.owl-item');if($items.length){this._items=$items.get().map(function(item){return $(item);});this._mergers=this._items.map(function(){return 1;});this.refresh();return;}
this.replace(this.$element.children().not(this.$stage.parent()));if(this.isVisible()){this.refresh();}else{this.invalidate('width');}
this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass);};Owl.prototype.initialize=function(){this.enter('initializing');this.trigger('initialize');this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl);if(this.settings.autoWidth&&!this.is('pre-loading')){var imgs,nestedSelector,width;imgs=this.$element.find('img');nestedSelector=this.settings.nestedItemSelector?'.'+this.settings.nestedItemSelector:undefined;width=this.$element.children(nestedSelector).width();if(imgs.length&&width<=0){this.preloadAutoWidthImages(imgs);}}
this.initializeStage();this.initializeItems();this.registerEventHandlers();this.leave('initializing');this.trigger('initialized');};Owl.prototype.isVisible=function(){return this.settings.checkVisibility?this.$element.is(':visible'):true;};Owl.prototype.setup=function(){var viewport=this.viewport(),overwrites=this.options.responsive,match=-1,settings=null;if(!overwrites){settings=$.extend({},this.options);}else{$.each(overwrites,function(breakpoint){if(breakpoint<=viewport&&breakpoint>match){match=Number(breakpoint);}});settings=$.extend({},this.options,overwrites[match]);if(typeof settings.stagePadding==='function'){settings.stagePadding=settings.stagePadding();}
delete settings.responsive;if(settings.responsiveClass){this.$element.attr('class',this.$element.attr('class').replace(new RegExp('('+this.options.responsiveClass+'-)\\S+\\s','g'),'$1'+match));}}
this.trigger('change',{property:{name:'settings',value:settings}});this._breakpoint=match;this.settings=settings;this.invalidate('settings');this.trigger('changed',{property:{name:'settings',value:this.settings}});};Owl.prototype.optionsLogic=function(){if(this.settings.autoWidth){this.settings.stagePadding=false;this.settings.merge=false;}};Owl.prototype.prepare=function(item){var event=this.trigger('prepare',{content:item});if(!event.data){event.data=$('<'+this.settings.itemElement+'/>').addClass(this.options.itemClass).append(item)}
this.trigger('prepared',{content:event.data});return event.data;};Owl.prototype.update=function(){var i=0,n=this._pipe.length,filter=$.proxy(function(p){return this[p]},this._invalidated),cache={};while(i<n){if(this._invalidated.all||$.grep(this._pipe[i].filter,filter).length>0){this._pipe[i].run(cache);}
i++;}
this._invalidated={};!this.is('valid')&&this.enter('valid');};Owl.prototype.width=function(dimension){dimension=dimension||Owl.Width.Default;switch(dimension){case Owl.Width.Inner:case Owl.Width.Outer:return this._width;default:return this._width-this.settings.stagePadding*2+this.settings.margin;}};Owl.prototype.refresh=function(){this.enter('refreshing');this.trigger('refresh');this.setup();this.optionsLogic();this.$element.addClass(this.options.refreshClass);this.update();this.$element.removeClass(this.options.refreshClass);this.leave('refreshing');this.trigger('refreshed');};Owl.prototype.onThrottledResize=function(){window.clearTimeout(this.resizeTimer);this.resizeTimer=window.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate);};Owl.prototype.onResize=function(){if(!this._items.length){return false;}
if(this._width===this.$element.width()){return false;}
if(!this.isVisible()){return false;}
this.enter('resizing');if(this.trigger('resize').isDefaultPrevented()){this.leave('resizing');return false;}
this.invalidate('width');this.refresh();this.leave('resizing');this.trigger('resized');};Owl.prototype.registerEventHandlers=function(){if($.support.transition){this.$stage.on($.support.transition.end+'.owl.core',$.proxy(this.onTransitionEnd,this));}
if(this.settings.responsive!==false){this.on(window,'resize',this._handlers.onThrottledResize);}
if(this.settings.mouseDrag){this.$element.addClass(this.options.dragClass);this.$stage.on('mousedown.owl.core',$.proxy(this.onDragStart,this));this.$stage.on('dragstart.owl.core selectstart.owl.core',function(){return false});}
if(this.settings.touchDrag){this.$stage.on('touchstart.owl.core',$.proxy(this.onDragStart,this));this.$stage.on('touchcancel.owl.core',$.proxy(this.onDragEnd,this));}};Owl.prototype.onDragStart=function(event){var stage=null;if(event.which===3){return;}
if($.support.transform){stage=this.$stage.css('transform').replace(/.*\(|\)| /g,'').split(',');stage={x:stage[stage.length===16?12:4],y:stage[stage.length===16?13:5]};}else{stage=this.$stage.position();stage={x:this.settings.rtl?stage.left+this.$stage.width()-this.width()+this.settings.margin:stage.left,y:stage.top};}
if(this.is('animating')){$.support.transform?this.animate(stage.x):this.$stage.stop()
this.invalidate('position');}
this.$element.toggleClass(this.options.grabClass,event.type==='mousedown');this.speed(0);this._drag.time=new Date().getTime();this._drag.target=$(event.target);this._drag.stage.start=stage;this._drag.stage.current=stage;this._drag.pointer=this.pointer(event);$(document).on('mouseup.owl.core touchend.owl.core',$.proxy(this.onDragEnd,this));$(document).one('mousemove.owl.core touchmove.owl.core',$.proxy(function(event){var delta=this.difference(this._drag.pointer,this.pointer(event));$(document).on('mousemove.owl.core touchmove.owl.core',$.proxy(this.onDragMove,this));if(Math.abs(delta.x)<Math.abs(delta.y)&&this.is('valid')){return;}
event.preventDefault();this.enter('dragging');this.trigger('drag');},this));};Owl.prototype.onDragMove=function(event){var minimum=null,maximum=null,pull=null,delta=this.difference(this._drag.pointer,this.pointer(event)),stage=this.difference(this._drag.stage.start,delta);if(!this.is('dragging')){return;}
event.preventDefault();if(this.settings.loop){minimum=this.coordinates(this.minimum());maximum=this.coordinates(this.maximum()+1)-minimum;stage.x=(((stage.x-minimum)%maximum+maximum)%maximum)+minimum;}else{minimum=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum());maximum=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum());pull=this.settings.pullDrag?-1*delta.x/5:0;stage.x=Math.max(Math.min(stage.x,minimum+pull),maximum+pull);}
this._drag.stage.current=stage;this.animate(stage.x);};Owl.prototype.onDragEnd=function(event){var delta=this.difference(this._drag.pointer,this.pointer(event)),stage=this._drag.stage.current,direction=delta.x>0^this.settings.rtl?'left':'right';$(document).off('.owl.core');this.$element.removeClass(this.options.grabClass);if(delta.x!==0&&this.is('dragging')||!this.is('valid')){this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed);this.current(this.closest(stage.x,delta.x!==0?direction:this._drag.direction));this.invalidate('position');this.update();this._drag.direction=direction;if(Math.abs(delta.x)>3||new Date().getTime()-this._drag.time>300){this._drag.target.one('click.owl.core',function(){return false;});}}
if(!this.is('dragging')){return;}
this.leave('dragging');this.trigger('dragged');};Owl.prototype.closest=function(coordinate,direction){var position=-1,pull=30,width=this.width(),coordinates=this.coordinates();if(!this.settings.freeDrag){$.each(coordinates,$.proxy(function(index,value){if(direction==='left'&&coordinate>value-pull&&coordinate<value+pull){position=index;}else if(direction==='right'&&coordinate>value-width-pull&&coordinate<value-width+pull){position=index+1;}else if(this.op(coordinate,'<',value)&&this.op(coordinate,'>',coordinates[index+1]!==undefined?coordinates[index+1]:value-width)){position=direction==='left'?index+1:index;}
return position===-1;},this));}
if(!this.settings.loop){if(this.op(coordinate,'>',coordinates[this.minimum()])){position=coordinate=this.minimum();}else if(this.op(coordinate,'<',coordinates[this.maximum()])){position=coordinate=this.maximum();}}
return position;};Owl.prototype.animate=function(coordinate){var animate=this.speed()>0;this.is('animating')&&this.onTransitionEnd();if(animate){this.enter('animating');this.trigger('translate');}
if($.support.transform3d&&$.support.transition){this.$stage.css({transform:'translate3d('+coordinate+'px,0px,0px)',transition:(this.speed()/1000)+'s'});}else if(animate){this.$stage.animate({left:coordinate+'px'},this.speed(),this.settings.fallbackEasing,$.proxy(this.onTransitionEnd,this));}else{this.$stage.css({left:coordinate+'px'});}};Owl.prototype.is=function(state){return this._states.current[state]&&this._states.current[state]>0;};Owl.prototype.current=function(position){if(position===undefined){return this._current;}
if(this._items.length===0){return undefined;}
position=this.normalize(position);if(this._current!==position){var event=this.trigger('change',{property:{name:'position',value:position}});if(event.data!==undefined){position=this.normalize(event.data);}
this._current=position;this.invalidate('position');this.trigger('changed',{property:{name:'position',value:this._current}});}
return this._current;};Owl.prototype.invalidate=function(part){if($.type(part)==='string'){this._invalidated[part]=true;this.is('valid')&&this.leave('valid');}
return $.map(this._invalidated,function(v,i){return i});};Owl.prototype.reset=function(position){position=this.normalize(position);if(position===undefined){return;}
this._speed=0;this._current=position;this.suppress(['translate','translated']);this.animate(this.coordinates(position));this.release(['translate','translated']);};Owl.prototype.normalize=function(position,relative){var n=this._items.length,m=relative?0:this._clones.length;if(!this.isNumeric(position)||n<1){position=undefined;}else if(position<0||position>=n+m){position=((position-m/2)%n+n)%n+m/2;}
return position;};Owl.prototype.relative=function(position){position-=this._clones.length/2;return this.normalize(position,true);};Owl.prototype.maximum=function(relative){var settings=this.settings,maximum=this._coordinates.length,iterator,reciprocalItemsWidth,elementWidth;if(settings.loop){maximum=this._clones.length/2+this._items.length-1;}else if(settings.autoWidth||settings.merge){iterator=this._items.length;if(iterator){reciprocalItemsWidth=this._items[--iterator].width();elementWidth=this.$element.width();while(iterator--){reciprocalItemsWidth+=this._items[iterator].width()+this.settings.margin;if(reciprocalItemsWidth>elementWidth){break;}}}
maximum=iterator+1;}else if(settings.center){maximum=this._items.length-1;}else{maximum=this._items.length-settings.items;}
if(relative){maximum-=this._clones.length/2;}
return Math.max(maximum,0);};Owl.prototype.minimum=function(relative){return relative?0:this._clones.length/2;};Owl.prototype.items=function(position){if(position===undefined){return this._items.slice();}
position=this.normalize(position,true);return this._items[position];};Owl.prototype.mergers=function(position){if(position===undefined){return this._mergers.slice();}
position=this.normalize(position,true);return this._mergers[position];};Owl.prototype.clones=function(position){var odd=this._clones.length/2,even=odd+this._items.length,map=function(index){return index%2===0?even+index/2:odd-(index+1)/2};if(position===undefined){return $.map(this._clones,function(v,i){return map(i)});}
return $.map(this._clones,function(v,i){return v===position?map(i):null});};Owl.prototype.speed=function(speed){if(speed!==undefined){this._speed=speed;}
return this._speed;};Owl.prototype.coordinates=function(position){var multiplier=1,newPosition=position-1,coordinate;if(position===undefined){return $.map(this._coordinates,$.proxy(function(coordinate,index){return this.coordinates(index);},this));}
if(this.settings.center){if(this.settings.rtl){multiplier=-1;newPosition=position+1;}
coordinate=this._coordinates[position];coordinate+=(this.width()-coordinate+(this._coordinates[newPosition]||0))/2*multiplier;}else{coordinate=this._coordinates[newPosition]||0;}
coordinate=Math.ceil(coordinate);return coordinate;};Owl.prototype.duration=function(from,to,factor){if(factor===0){return 0;}
return Math.min(Math.max(Math.abs(to-from),1),6)*Math.abs((factor||this.settings.smartSpeed));};Owl.prototype.to=function(position,speed){var current=this.current(),revert=null,distance=position-this.relative(current),direction=(distance>0)-(distance<0),items=this._items.length,minimum=this.minimum(),maximum=this.maximum();if(this.settings.loop){if(!this.settings.rewind&&Math.abs(distance)>items/2){distance+=direction*-1*items;}
position=current+distance;revert=((position-minimum)%items+items)%items+minimum;if(revert!==position&&revert-distance<=maximum&&revert-distance>0){current=revert-distance;position=revert;this.reset(current);}}else if(this.settings.rewind){maximum+=1;position=(position%maximum+maximum)%maximum;}else{position=Math.max(minimum,Math.min(maximum,position));}
this.speed(this.duration(current,position,speed));this.current(position);if(this.isVisible()){this.update();}};Owl.prototype.next=function(speed){speed=speed||false;this.to(this.relative(this.current())+1,speed);};Owl.prototype.prev=function(speed){speed=speed||false;this.to(this.relative(this.current())-1,speed);};Owl.prototype.onTransitionEnd=function(event){if(event!==undefined){event.stopPropagation();if((event.target||event.srcElement||event.originalTarget)!==this.$stage.get(0)){return false;}}
this.leave('animating');this.trigger('translated');};Owl.prototype.viewport=function(){var width;if(this.options.responsiveBaseElement!==window){width=$(this.options.responsiveBaseElement).width();}else if(window.innerWidth){width=window.innerWidth;}else if(document.documentElement&&document.documentElement.clientWidth){width=document.documentElement.clientWidth;}else{console.warn('Can not detect viewport width.');}
return width;};Owl.prototype.replace=function(content){this.$stage.empty();this._items=[];if(content){content=(content instanceof jQuery)?content:$(content);}
if(this.settings.nestedItemSelector){content=content.find('.'+this.settings.nestedItemSelector);}
content.filter(function(){return this.nodeType===1;}).each($.proxy(function(index,item){item=this.prepare(item);this.$stage.append(item);this._items.push(item);this._mergers.push(item.find('[data-merge]').addBack('[data-merge]').attr('data-merge')*1||1);},this));this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0);this.invalidate('items');};Owl.prototype.add=function(content,position){var current=this.relative(this._current);position=position===undefined?this._items.length:this.normalize(position,true);content=content instanceof jQuery?content:$(content);this.trigger('add',{content:content,position:position});content=this.prepare(content);if(this._items.length===0||position===this._items.length){this._items.length===0&&this.$stage.append(content);this._items.length!==0&&this._items[position-1].after(content);this._items.push(content);this._mergers.push(content.find('[data-merge]').addBack('[data-merge]').attr('data-merge')*1||1);}else{this._items[position].before(content);this._items.splice(position,0,content);this._mergers.splice(position,0,content.find('[data-merge]').addBack('[data-merge]').attr('data-merge')*1||1);}
this._items[current]&&this.reset(this._items[current].index());this.invalidate('items');this.trigger('added',{content:content,position:position});};Owl.prototype.remove=function(position){position=this.normalize(position,true);if(position===undefined){return;}
this.trigger('remove',{content:this._items[position],position:position});this._items[position].remove();this._items.splice(position,1);this._mergers.splice(position,1);this.invalidate('items');this.trigger('removed',{content:null,position:position});};Owl.prototype.preloadAutoWidthImages=function(images){images.each($.proxy(function(i,element){this.enter('pre-loading');element=$(element);$(new Image()).one('load',$.proxy(function(e){element.attr('src',e.target.src);element.css('opacity',1);this.leave('pre-loading');!this.is('pre-loading')&&!this.is('initializing')&&this.refresh();},this)).attr('src',element.attr('src')||element.attr('data-src')||element.attr('data-src-retina'));},this));};Owl.prototype.destroy=function(){this.$element.off('.owl.core');this.$stage.off('.owl.core');$(document).off('.owl.core');if(this.settings.responsive!==false){window.clearTimeout(this.resizeTimer);this.off(window,'resize',this._handlers.onThrottledResize);}
for(var i in this._plugins){this._plugins[i].destroy();}
this.$stage.children('.cloned').remove();this.$stage.unwrap();this.$stage.children().contents().unwrap();this.$stage.children().unwrap();this.$stage.remove();this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr('class',this.$element.attr('class').replace(new RegExp(this.options.responsiveClass+'-\\S+\\s','g'),'')).removeData('owl.carousel');};Owl.prototype.op=function(a,o,b){var rtl=this.settings.rtl;switch(o){case'<':return rtl?a>b:a<b;case'>':return rtl?a<b:a>b;case'>=':return rtl?a<=b:a>=b;case'<=':return rtl?a>=b:a<=b;default:break;}};Owl.prototype.on=function(element,event,listener,capture){if(element.addEventListener){element.addEventListener(event,listener,capture);}else if(element.attachEvent){element.attachEvent('on'+event,listener);}};Owl.prototype.off=function(element,event,listener,capture){if(element.removeEventListener){element.removeEventListener(event,listener,capture);}else if(element.detachEvent){element.detachEvent('on'+event,listener);}};Owl.prototype.trigger=function(name,data,namespace,state,enter){var status={item:{count:this._items.length,index:this.current()}},handler=$.camelCase($.grep(['on',name,namespace],function(v){return v}).join('-').toLowerCase()),event=$.Event([name,'owl',namespace||'carousel'].join('.').toLowerCase(),$.extend({relatedTarget:this},status,data));if(!this._supress[name]){$.each(this._plugins,function(name,plugin){if(plugin.onTrigger){plugin.onTrigger(event);}});this.register({type:Owl.Type.Event,name:name});this.$element.trigger(event);if(this.settings&&typeof this.settings[handler]==='function'){this.settings[handler].call(this,event);}}
return event;};Owl.prototype.enter=function(name){$.each([name].concat(this._states.tags[name]||[]),$.proxy(function(i,name){if(this._states.current[name]===undefined){this._states.current[name]=0;}
this._states.current[name]++;},this));};Owl.prototype.leave=function(name){$.each([name].concat(this._states.tags[name]||[]),$.proxy(function(i,name){this._states.current[name]--;},this));};Owl.prototype.register=function(object){if(object.type===Owl.Type.Event){if(!$.event.special[object.name]){$.event.special[object.name]={};}
if(!$.event.special[object.name].owl){var _default=$.event.special[object.name]._default;$.event.special[object.name]._default=function(e){if(_default&&_default.apply&&(!e.namespace||e.namespace.indexOf('owl')===-1)){return _default.apply(this,arguments);}
return e.namespace&&e.namespace.indexOf('owl')>-1;};$.event.special[object.name].owl=true;}}else if(object.type===Owl.Type.State){if(!this._states.tags[object.name]){this._states.tags[object.name]=object.tags;}else{this._states.tags[object.name]=this._states.tags[object.name].concat(object.tags);}
this._states.tags[object.name]=$.grep(this._states.tags[object.name],$.proxy(function(tag,i){return $.inArray(tag,this._states.tags[object.name])===i;},this));}};Owl.prototype.suppress=function(events){$.each(events,$.proxy(function(index,event){this._supress[event]=true;},this));};Owl.prototype.release=function(events){$.each(events,$.proxy(function(index,event){delete this._supress[event];},this));};Owl.prototype.pointer=function(event){var result={x:null,y:null};event=event.originalEvent||event||window.event;event=event.touches&&event.touches.length?event.touches[0]:event.changedTouches&&event.changedTouches.length?event.changedTouches[0]:event;if(event.pageX){result.x=event.pageX;result.y=event.pageY;}else{result.x=event.clientX;result.y=event.clientY;}
return result;};Owl.prototype.isNumeric=function(number){return!isNaN(parseFloat(number));};Owl.prototype.difference=function(first,second){return{x:first.x-second.x,y:first.y-second.y};};$.fn.owlCarousel=function(option){var args=Array.prototype.slice.call(arguments,1);return this.each(function(){var $this=$(this),data=$this.data('owl.carousel');if(!data){data=new Owl(this,typeof option=='object'&&option);$this.data('owl.carousel',data);$.each(['next','prev','to','destroy','refresh','replace','add','remove'],function(i,event){data.register({type:Owl.Type.Event,name:event});data.$element.on(event+'.owl.carousel.core',$.proxy(function(e){if(e.namespace&&e.relatedTarget!==this){this.suppress([event]);data[event].apply(this,[].slice.call(arguments,1));this.release([event]);}},data));});}
if(typeof option=='string'&&option.charAt(0)!=='_'){data[option].apply(data,args);}});};$.fn.owlCarousel.Constructor=Owl;})(window.Zepto||window.jQuery,window,document);;(function($,window,document,undefined){var AutoRefresh=function(carousel){this._core=carousel;this._interval=null;this._visible=null;this._handlers={'initialized.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.autoRefresh){this.watch();}},this)};this._core.options=$.extend({},AutoRefresh.Defaults,this._core.options);this._core.$element.on(this._handlers);};AutoRefresh.Defaults={autoRefresh:true,autoRefreshInterval:500};AutoRefresh.prototype.watch=function(){if(this._interval){return;}
this._visible=this._core.isVisible();this._interval=window.setInterval($.proxy(this.refresh,this),this._core.settings.autoRefreshInterval);};AutoRefresh.prototype.refresh=function(){if(this._core.isVisible()===this._visible){return;}
this._visible=!this._visible;this._core.$element.toggleClass('owl-hidden',!this._visible);this._visible&&(this._core.invalidate('width')&&this._core.refresh());};AutoRefresh.prototype.destroy=function(){var handler,property;window.clearInterval(this._interval);for(handler in this._handlers){this._core.$element.off(handler,this._handlers[handler]);}
for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.AutoRefresh=AutoRefresh;})(window.Zepto||window.jQuery,window,document);;(function($,window,document,undefined){var Lazy=function(carousel){this._core=carousel;this._loaded=[];this._handlers={'initialized.owl.carousel change.owl.carousel resized.owl.carousel':$.proxy(function(e){if(!e.namespace){return;}
if(!this._core.settings||!this._core.settings.lazyLoad){return;}
if((e.property&&e.property.name=='position')||e.type=='initialized'){var settings=this._core.settings,n=(settings.center&&Math.ceil(settings.items/2)||settings.items),i=((settings.center&&n*-1)||0),position=(e.property&&e.property.value!==undefined?e.property.value:this._core.current())+i,clones=this._core.clones().length,load=$.proxy(function(i,v){this.load(v)},this);while(i++<n){this.load(clones/2+this._core.relative(position));clones&&$.each(this._core.clones(this._core.relative(position)),load);position++;}}},this)};this._core.options=$.extend({},Lazy.Defaults,this._core.options);this._core.$element.on(this._handlers);};Lazy.Defaults={lazyLoad:false};Lazy.prototype.load=function(position){var $item=this._core.$stage.children().eq(position),$elements=$item&&$item.find('.owl-lazy');if(!$elements||$.inArray($item.get(0),this._loaded)>-1){return;}
$elements.each($.proxy(function(index,element){var $element=$(element),image,url=(window.devicePixelRatio>1&&$element.attr('data-src-retina'))||$element.attr('data-src')||$element.attr('data-srcset');this._core.trigger('load',{element:$element,url:url},'lazy');if($element.is('img')){$element.one('load.owl.lazy',$.proxy(function(){$element.css('opacity',1);this._core.trigger('loaded',{element:$element,url:url},'lazy');},this)).attr('src',url);}else if($element.is('source')){$element.one('load.owl.lazy',$.proxy(function(){this._core.trigger('loaded',{element:$element,url:url},'lazy');},this)).attr('srcset',url);}else{image=new Image();image.onload=$.proxy(function(){$element.css({'background-image':'url("'+url+'")','opacity':'1'});this._core.trigger('loaded',{element:$element,url:url},'lazy');},this);image.src=url;}},this));this._loaded.push($item.get(0));};Lazy.prototype.destroy=function(){var handler,property;for(handler in this.handlers){this._core.$element.off(handler,this.handlers[handler]);}
for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.Lazy=Lazy;})(window.Zepto||window.jQuery,window,document);;(function($,window,document,undefined){var AutoHeight=function(carousel){this._core=carousel;this._handlers={'initialized.owl.carousel refreshed.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.autoHeight){this.update();}},this),'changed.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.autoHeight&&e.property.name==='position'){console.log('update called');this.update();}},this),'loaded.owl.lazy':$.proxy(function(e){if(e.namespace&&this._core.settings.autoHeight&&e.element.closest('.'+this._core.settings.itemClass).index()===this._core.current()){this.update();}},this)};this._core.options=$.extend({},AutoHeight.Defaults,this._core.options);this._core.$element.on(this._handlers);this._intervalId=null;var refThis=this;$(window).on('load',function(){if(refThis._core.settings.autoHeight){refThis.update();}});$(window).resize(function(){if(refThis._core.settings.autoHeight){if(refThis._intervalId!=null){clearTimeout(refThis._intervalId);}
refThis._intervalId=setTimeout(function(){refThis.update();},250);}});};AutoHeight.Defaults={autoHeight:false,autoHeightClass:'owl-height'};AutoHeight.prototype.update=function(){var start=this._core._current,end=start+this._core.settings.items,visible=this._core.$stage.children().toArray().slice(start,end),heights=[],maxheight=0;$.each(visible,function(index,item){heights.push($(item).height());});maxheight=Math.max.apply(null,heights);this._core.$stage.parent().height(maxheight).addClass(this._core.settings.autoHeightClass);};AutoHeight.prototype.destroy=function(){var handler,property;for(handler in this._handlers){this._core.$element.off(handler,this._handlers[handler]);}
for(property in Object.getOwnPropertyNames(this)){typeof this[property]!=='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.AutoHeight=AutoHeight;})(window.Zepto||window.jQuery,window,document);;(function($,window,document,undefined){var Video=function(carousel){this._core=carousel;this._videos={};this._playing=null;this._handlers={'initialized.owl.carousel':$.proxy(function(e){if(e.namespace){this._core.register({type:'state',name:'playing',tags:['interacting']});}},this),'resize.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.video&&this.isInFullScreen()){e.preventDefault();}},this),'refreshed.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.is('resizing')){this._core.$stage.find('.cloned .owl-video-frame').remove();}},this),'changed.owl.carousel':$.proxy(function(e){if(e.namespace&&e.property.name==='position'&&this._playing){this.stop();}},this),'prepared.owl.carousel':$.proxy(function(e){if(!e.namespace){return;}
var $element=$(e.content).find('.owl-video');if($element.length){$element.css('display','none');this.fetch($element,$(e.content));}},this)};this._core.options=$.extend({},Video.Defaults,this._core.options);this._core.$element.on(this._handlers);this._core.$element.on('click.owl.video','.owl-video-play-icon',$.proxy(function(e){this.play(e);},this));};Video.Defaults={video:false,videoHeight:false,videoWidth:false};Video.prototype.fetch=function(target,item){var type=(function(){if(target.attr('data-vimeo-id')){return'vimeo';}else if(target.attr('data-vzaar-id')){return'vzaar'}else{return'youtube';}})(),id=target.attr('data-vimeo-id')||target.attr('data-youtube-id')||target.attr('data-vzaar-id'),width=target.attr('data-width')||this._core.settings.videoWidth,height=target.attr('data-height')||this._core.settings.videoHeight,url=target.attr('href');if(url){id=url.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);if(id[3].indexOf('youtu')>-1){type='youtube';}else if(id[3].indexOf('vimeo')>-1){type='vimeo';}else if(id[3].indexOf('vzaar')>-1){type='vzaar';}else{throw new Error('Video URL not supported.');}
id=id[6];}else{throw new Error('Missing video URL.');}
this._videos[url]={type:type,id:id,width:width,height:height};item.attr('data-video',url);this.thumbnail(target,this._videos[url]);};Video.prototype.thumbnail=function(target,video){var tnLink,icon,path,dimensions=video.width&&video.height?'style="width:'+video.width+'px;height:'+video.height+'px;"':'',customTn=target.find('img'),srcType='src',lazyClass='',settings=this._core.settings,create=function(path){icon='<div class="owl-video-play-icon"></div>';if(settings.lazyLoad){tnLink='<div class="owl-video-tn '+lazyClass+'" '+srcType+'="'+path+'"></div>';}else{tnLink='<div class="owl-video-tn" style="opacity:1;background-image:url('+path+')"></div>';}
target.after(tnLink);target.after(icon);};target.wrap('<div class="owl-video-wrapper"'+dimensions+'></div>');if(this._core.settings.lazyLoad){srcType='data-src';lazyClass='owl-lazy';}
if(customTn.length){create(customTn.attr(srcType));customTn.remove();return false;}
if(video.type==='youtube'){path="//img.youtube.com/vi/"+video.id+"/hqdefault.jpg";create(path);}else if(video.type==='vimeo'){$.ajax({type:'GET',url:'//vimeo.com/api/v2/video/'+video.id+'.json',jsonp:'callback',dataType:'jsonp',success:function(data){path=data[0].thumbnail_large;create(path);}});}else if(video.type==='vzaar'){$.ajax({type:'GET',url:'//vzaar.com/api/videos/'+video.id+'.json',jsonp:'callback',dataType:'jsonp',success:function(data){path=data.framegrab_url;create(path);}});}};Video.prototype.stop=function(){this._core.trigger('stop',null,'video');this._playing.find('.owl-video-frame').remove();this._playing.removeClass('owl-video-playing');this._playing=null;this._core.leave('playing');this._core.trigger('stopped',null,'video');};Video.prototype.play=function(event){var target=$(event.target),item=target.closest('.'+this._core.settings.itemClass),video=this._videos[item.attr('data-video')],width=video.width||'100%',height=video.height||this._core.$stage.height(),html;if(this._playing){return;}
this._core.enter('playing');this._core.trigger('play',null,'video');item=this._core.items(this._core.relative(item.index()));this._core.reset(item.index());if(video.type==='youtube'){html='<iframe width="'+width+'" height="'+height+'" src="//www.youtube.com/embed/'+
video.id+'?autoplay=1&rel=0&v='+video.id+'" frameborder="0" allowfullscreen></iframe>';}else if(video.type==='vimeo'){html='<iframe src="//player.vimeo.com/video/'+video.id+'?autoplay=1" width="'+width+'" height="'+height+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';}else if(video.type==='vzaar'){html='<iframe frameborder="0"'+'height="'+height+'"'+'width="'+width+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen '+'src="//view.vzaar.com/'+video.id+'/player?autoplay=true"></iframe>';}
$('<div class="owl-video-frame">'+html+'</div>').insertAfter(item.find('.owl-video'));this._playing=item.addClass('owl-video-playing');};Video.prototype.isInFullScreen=function(){var element=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;return element&&$(element).parent().hasClass('owl-video-frame');};Video.prototype.destroy=function(){var handler,property;this._core.$element.off('click.owl.video');for(handler in this._handlers){this._core.$element.off(handler,this._handlers[handler]);}
for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.Video=Video;})(window.Zepto||window.jQuery,window,document);;(function($,window,document,undefined){var Animate=function(scope){this.core=scope;this.core.options=$.extend({},Animate.Defaults,this.core.options);this.swapping=true;this.previous=undefined;this.next=undefined;this.handlers={'change.owl.carousel':$.proxy(function(e){if(e.namespace&&e.property.name=='position'){this.previous=this.core.current();this.next=e.property.value;}},this),'drag.owl.carousel dragged.owl.carousel translated.owl.carousel':$.proxy(function(e){if(e.namespace){this.swapping=e.type=='translated';}},this),'translate.owl.carousel':$.proxy(function(e){if(e.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)){this.swap();}},this)};this.core.$element.on(this.handlers);};Animate.Defaults={animateOut:false,animateIn:false};Animate.prototype.swap=function(){if(this.core.settings.items!==1){return;}
if(!$.support.animation||!$.support.transition){return;}
this.core.speed(0);var left,clear=$.proxy(this.clear,this),previous=this.core.$stage.children().eq(this.previous),next=this.core.$stage.children().eq(this.next),incoming=this.core.settings.animateIn,outgoing=this.core.settings.animateOut;if(this.core.current()===this.previous){return;}
if(outgoing){left=this.core.coordinates(this.previous)-this.core.coordinates(this.next);previous.one($.support.animation.end,clear).css({'left':left+'px'}).addClass('animated owl-animated-out').addClass(outgoing);}
if(incoming){next.one($.support.animation.end,clear).addClass('animated owl-animated-in').addClass(incoming);}};Animate.prototype.clear=function(e){$(e.target).css({'left':''}).removeClass('animated owl-animated-out owl-animated-in').removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut);this.core.onTransitionEnd();};Animate.prototype.destroy=function(){var handler,property;for(handler in this.handlers){this.core.$element.off(handler,this.handlers[handler]);}
for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.Animate=Animate;})(window.Zepto||window.jQuery,window,document);;(function($,window,document,undefined){var Autoplay=function(carousel){this._core=carousel;this._call=null;this._time=0;this._timeout=0;this._paused=true;this._handlers={'changed.owl.carousel':$.proxy(function(e){if(e.namespace&&e.property.name==='settings'){if(this._core.settings.autoplay){this.play();}else{this.stop();}}else if(e.namespace&&e.property.name==='position'&&this._paused){this._time=0;}},this),'initialized.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.autoplay){this.play();}},this),'play.owl.autoplay':$.proxy(function(e,t,s){if(e.namespace){this.play(t,s);}},this),'stop.owl.autoplay':$.proxy(function(e){if(e.namespace){this.stop();}},this),'mouseover.owl.autoplay':$.proxy(function(){if(this._core.settings.autoplayHoverPause&&this._core.is('rotating')){this.pause();}},this),'mouseleave.owl.autoplay':$.proxy(function(){if(this._core.settings.autoplayHoverPause&&this._core.is('rotating')){this.play();}},this),'touchstart.owl.core':$.proxy(function(){if(this._core.settings.autoplayHoverPause&&this._core.is('rotating')){this.pause();}},this),'touchend.owl.core':$.proxy(function(){if(this._core.settings.autoplayHoverPause){this.play();}},this)};this._core.$element.on(this._handlers);this._core.options=$.extend({},Autoplay.Defaults,this._core.options);};Autoplay.Defaults={autoplay:false,autoplayTimeout:5000,autoplayHoverPause:false,autoplaySpeed:false};Autoplay.prototype._next=function(speed){this._call=window.setTimeout($.proxy(this._next,this,speed),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read());if(this._core.is('interacting')||document.hidden){return;}
this._core.next(speed||this._core.settings.autoplaySpeed);}
Autoplay.prototype.read=function(){return new Date().getTime()-this._time;};Autoplay.prototype.play=function(timeout,speed){var elapsed;if(!this._core.is('rotating')){this._core.enter('rotating');}
timeout=timeout||this._core.settings.autoplayTimeout;elapsed=Math.min(this._time%(this._timeout||timeout),timeout);if(this._paused){this._time=this.read();this._paused=false;}else{window.clearTimeout(this._call);}
this._time+=this.read()%timeout-elapsed;this._timeout=timeout;this._call=window.setTimeout($.proxy(this._next,this,speed),timeout-elapsed);};Autoplay.prototype.stop=function(){if(this._core.is('rotating')){this._time=0;this._paused=true;window.clearTimeout(this._call);this._core.leave('rotating');}};Autoplay.prototype.pause=function(){if(this._core.is('rotating')&&!this._paused){this._time=this.read();this._paused=true;window.clearTimeout(this._call);}};Autoplay.prototype.destroy=function(){var handler,property;this.stop();for(handler in this._handlers){this._core.$element.off(handler,this._handlers[handler]);}
for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.autoplay=Autoplay;})(window.Zepto||window.jQuery,window,document);;(function($,window,document,undefined){'use strict';var Navigation=function(carousel){this._core=carousel;this._initialized=false;this._pages=[];this._controls={};this._templates=[];this.$element=this._core.$element;this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to};this._handlers={'prepared.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.dotsData){this._templates.push('<div class="'+this._core.settings.dotClass+'">'+
$(e.content).find('[data-dot]').addBack('[data-dot]').attr('data-dot')+'</div>');}},this),'added.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.dotsData){this._templates.splice(e.position,0,this._templates.pop());}},this),'remove.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.dotsData){this._templates.splice(e.position,1);}},this),'changed.owl.carousel':$.proxy(function(e){if(e.namespace&&e.property.name=='position'){this.draw();}},this),'initialized.owl.carousel':$.proxy(function(e){if(e.namespace&&!this._initialized){this._core.trigger('initialize',null,'navigation');this.initialize();this.update();this.draw();this._initialized=true;this._core.trigger('initialized',null,'navigation');}},this),'refreshed.owl.carousel':$.proxy(function(e){if(e.namespace&&this._initialized){this._core.trigger('refresh',null,'navigation');this.update();this.draw();this._core.trigger('refreshed',null,'navigation');}},this)};this._core.options=$.extend({},Navigation.Defaults,this._core.options);this.$element.on(this._handlers);};Navigation.Defaults={nav:false,navText:['<span aria-label="'+'Previous'+'">&#x2039;</span>','<span aria-label="'+'Next'+'">&#x203a;</span>'],navSpeed:false,navElement:'button type="button" role="presentation"',navContainer:false,navContainerClass:'owl-nav',navClass:['owl-prev','owl-next'],slideBy:1,dotClass:'owl-dot',dotsClass:'owl-dots',dots:true,dotsEach:false,dotsData:false,dotsSpeed:false,dotsContainer:false};Navigation.prototype.initialize=function(){var override,settings=this._core.settings;this._controls.$relative=(settings.navContainer?$(settings.navContainer):$('<div>').addClass(settings.navContainerClass).appendTo(this.$element)).addClass('disabled');this._controls.$previous=$('<'+settings.navElement+'>').addClass(settings.navClass[0]).html(settings.navText[0]).prependTo(this._controls.$relative).on('click',$.proxy(function(e){this.prev(settings.navSpeed);},this));this._controls.$next=$('<'+settings.navElement+'>').addClass(settings.navClass[1]).html(settings.navText[1]).appendTo(this._controls.$relative).on('click',$.proxy(function(e){this.next(settings.navSpeed);},this));if(!settings.dotsData){this._templates=[$('<button role="button">').addClass(settings.dotClass).append($('<span>')).prop('outerHTML')];}
this._controls.$absolute=(settings.dotsContainer?$(settings.dotsContainer):$('<div>').addClass(settings.dotsClass).appendTo(this.$element)).addClass('disabled');this._controls.$absolute.on('click','button',$.proxy(function(e){var index=$(e.target).parent().is(this._controls.$absolute)?$(e.target).index():$(e.target).parent().index();e.preventDefault();this.to(index,settings.dotsSpeed);},this));for(override in this._overrides){this._core[override]=$.proxy(this[override],this);}};Navigation.prototype.destroy=function(){var handler,control,property,override,settings;settings=this._core.settings;for(handler in this._handlers){this.$element.off(handler,this._handlers[handler]);}
for(control in this._controls){if(control==='$relative'&&settings.navContainer){this._controls[control].html('');}else{this._controls[control].remove();}}
for(override in this.overides){this._core[override]=this._overrides[override];}
for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};Navigation.prototype.update=function(){var i,j,k,lower=this._core.clones().length/2,upper=lower+this._core.items().length,maximum=this._core.maximum(true),settings=this._core.settings,size=settings.center||settings.autoWidth||settings.dotsData?1:settings.dotsEach||settings.items;if(settings.slideBy!=='page'){settings.slideBy=Math.min(settings.slideBy,settings.items);}
if(settings.dots||settings.slideBy=='page'){this._pages=[];for(i=lower,j=0,k=0;i<upper;i++){if(j>=size||j===0){this._pages.push({start:Math.min(maximum,i-lower),end:i-lower+size-1});if(Math.min(maximum,i-lower)===maximum){break;}
j=0,++k;}
j+=this._core.mergers(this._core.relative(i));}}};Navigation.prototype.draw=function(){var difference,settings=this._core.settings,disabled=this._core.items().length<=settings.items,index=this._core.relative(this._core.current()),loop=settings.loop||settings.rewind;this._controls.$relative.toggleClass('disabled',!settings.nav||disabled);if(settings.nav){this._controls.$previous.toggleClass('disabled',!loop&&index<=this._core.minimum(true));this._controls.$next.toggleClass('disabled',!loop&&index>=this._core.maximum(true));}
this._controls.$absolute.toggleClass('disabled',!settings.dots||disabled);if(settings.dots){difference=this._pages.length-this._controls.$absolute.children().length;if(settings.dotsData&&difference!==0){this._controls.$absolute.html(this._templates.join(''));}else if(difference>0){this._controls.$absolute.append(new Array(difference+1).join(this._templates[0]));}else if(difference<0){this._controls.$absolute.children().slice(difference).remove();}
this._controls.$absolute.find('.active').removeClass('active');this._controls.$absolute.children().eq($.inArray(this.current(),this._pages)).addClass('active');}};Navigation.prototype.onTrigger=function(event){var settings=this._core.settings;event.page={index:$.inArray(this.current(),this._pages),count:this._pages.length,size:settings&&(settings.center||settings.autoWidth||settings.dotsData?1:settings.dotsEach||settings.items)};};Navigation.prototype.current=function(){var current=this._core.relative(this._core.current());return $.grep(this._pages,$.proxy(function(page,index){return page.start<=current&&page.end>=current;},this)).pop();};Navigation.prototype.getPosition=function(successor){var position,length,settings=this._core.settings;if(settings.slideBy=='page'){position=$.inArray(this.current(),this._pages);length=this._pages.length;successor?++position:--position;position=this._pages[((position%length)+length)%length].start;}else{position=this._core.relative(this._core.current());length=this._core.items().length;successor?position+=settings.slideBy:position-=settings.slideBy;}
return position;};Navigation.prototype.next=function(speed){$.proxy(this._overrides.to,this._core)(this.getPosition(true),speed);};Navigation.prototype.prev=function(speed){$.proxy(this._overrides.to,this._core)(this.getPosition(false),speed);};Navigation.prototype.to=function(position,speed,standard){var length;if(!standard&&this._pages.length){length=this._pages.length;$.proxy(this._overrides.to,this._core)(this._pages[((position%length)+length)%length].start,speed);}else{$.proxy(this._overrides.to,this._core)(position,speed);}};$.fn.owlCarousel.Constructor.Plugins.Navigation=Navigation;})(window.Zepto||window.jQuery,window,document);;(function($,window,document,undefined){'use strict';var Hash=function(carousel){this._core=carousel;this._hashes={};this.$element=this._core.$element;this._handlers={'initialized.owl.carousel':$.proxy(function(e){if(e.namespace&&this._core.settings.startPosition==='URLHash'){$(window).trigger('hashchange.owl.navigation');}},this),'prepared.owl.carousel':$.proxy(function(e){if(e.namespace){var hash=$(e.content).find('[data-hash]').addBack('[data-hash]').attr('data-hash');if(!hash){return;}
this._hashes[hash]=e.content;}},this),'changed.owl.carousel':$.proxy(function(e){if(e.namespace&&e.property.name==='position'){var current=this._core.items(this._core.relative(this._core.current())),hash=$.map(this._hashes,function(item,hash){return item===current?hash:null;}).join();if(!hash||window.location.hash.slice(1)===hash){return;}
window.location.hash=hash;}},this)};this._core.options=$.extend({},Hash.Defaults,this._core.options);this.$element.on(this._handlers);$(window).on('hashchange.owl.navigation',$.proxy(function(e){var hash=window.location.hash.substring(1),items=this._core.$stage.children(),position=this._hashes[hash]&&items.index(this._hashes[hash]);if(position===undefined||position===this._core.current()){return;}
this._core.to(this._core.relative(position),false,true);},this));};Hash.Defaults={URLhashListener:false};Hash.prototype.destroy=function(){var handler,property;$(window).off('hashchange.owl.navigation');for(handler in this._handlers){this._core.$element.off(handler,this._handlers[handler]);}
for(property in Object.getOwnPropertyNames(this)){typeof this[property]!='function'&&(this[property]=null);}};$.fn.owlCarousel.Constructor.Plugins.Hash=Hash;})(window.Zepto||window.jQuery,window,document);;(function($,window,document,undefined){var style=$('<support>').get(0).style,prefixes='Webkit Moz O ms'.split(' '),events={transition:{end:{WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd',transition:'transitionend'}},animation:{end:{WebkitAnimation:'webkitAnimationEnd',MozAnimation:'animationend',OAnimation:'oAnimationEnd',animation:'animationend'}}},tests={csstransforms:function(){return!!test('transform');},csstransforms3d:function(){return!!test('perspective');},csstransitions:function(){return!!test('transition');},cssanimations:function(){return!!test('animation');}};function test(property,prefixed){var result=false,upper=property.charAt(0).toUpperCase()+property.slice(1);$.each((property+' '+prefixes.join(upper+' ')+upper).split(' '),function(i,property){if(style[property]!==undefined){result=prefixed?property:true;return false;}});return result;}
function prefixed(property){return test(property,true);}
if(tests.csstransitions()){$.support.transition=new String(prefixed('transition'))
$.support.transition.end=events.transition.end[$.support.transition];}
if(tests.cssanimations()){$.support.animation=new String(prefixed('animation'))
$.support.animation.end=events.animation.end[$.support.animation];}
if(tests.csstransforms()){$.support.transform=new String(prefixed('transform'));$.support.transform3d=tests.csstransforms3d();}})(window.Zepto||window.jQuery,window,document);;

/* /website_product_carousel/static/src/js/c_frontend.js defined in bundle 'web.assets_frontend' */
odoo.define('website_product_carousel.carousel_frontend',function(require){"use strict";var core=require('web.core');var ajax=require('web.ajax');var website=require('website.website');var sAnimation=require('website.content.snippets.animation');var _t=core._t;var qweb=core.qweb;var page_widgets={};sAnimation.registry.js_get_objects=sAnimation.Class.extend({selector:".js_get_objects",start:function(){this.redraw()},destroy:function(){this.clean(),this._super.apply(this,arguments)},redraw:function(t){this.clean(t),this.build(t)},clean:function(t){this.$target.empty()},carousel_view:function(t){$(".owl-carousel").owlCarousel({loop:!0,margin:10,responsiveClass:!0,dots:!1,nav:!0,pagination:!1,autoplay:!1,responsive:{768:{items:2},979:{items:2},479:{items:1},320:{items:1},1199:{items:this.$target.data("objects_in_slide")}}})},build:function(t){var e=this,i=e.$target.data("objects_limit"),a=e.$target.data("filter_by_filter_id"),n=e.$target.data("objects_in_slide");e.$target.attr("contentEditable",!1),n||(n=3),i||(i=6),ajax.jsonRpc("/render_product_carousel_slider/product_slider/","call",{filter_id:a,objects_in_slide:n,limit:i}).then(function(t){$(t).appendTo(e.$target),e.carousel_view(t)}).then(function(){e.loading(t)}).fail(function(t){})},loading:function(t){}});});